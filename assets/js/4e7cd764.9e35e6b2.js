"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4717],{5130:function(e,t,n){var i,r,o=n(7294),a=["title","titleId"];function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s.apply(this,arguments)}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}t.Z=function(e){var t=e.title,n=e.titleId,c=l(e,a);return o.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,fill:"#FFF","aria-labelledby":n},c),t?o.createElement("title",{id:n},t):null,i||(i=o.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),r||(r=o.createElement("path",{d:"m10 17 5-5-5-5v10z"})))}},3862:function(e,t,n){var i,r,o=n(7294),a=["title","titleId"];function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s.apply(this,arguments)}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}t.Z=function(e){var t=e.title,n=e.titleId,c=l(e,a);return o.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,"aria-labelledby":n},c),t?o.createElement("title",{id:n},t):null,i||(i=o.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),r||(r=o.createElement("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"})))}},3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return _}});var i=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=i.createContext({}),c=function(e){var t=i.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},u=function(e){var t=c(e.components);return i.createElement(l.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},d=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=c(n),_=r,v=d["".concat(l,".").concat(_)]||d[_]||h[_]||o;return n?i.createElement(v,a(a({ref:t},u),{},{components:n})):i.createElement(v,a({ref:t},u))}));function _(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,a=new Array(o);a[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,a[1]=s;for(var c=2;c<o;c++)a[c]=n[c];return i.createElement.apply(null,a)}return i.createElement.apply(null,n)}d.displayName="MDXCreateElement"},6240:function(e,t,n){n.d(t,{Z:function(){return h}});var i,r,o=n(7294),a=["title","titleId"];function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s.apply(this,arguments)}function l(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=function(e){var t=e.title,n=e.titleId,c=l(e,a);return o.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",height:18,viewBox:"0 0 24 24",width:18,"aria-labelledby":n},c),t?o.createElement("title",{id:n},t):null,i||(i=o.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),r||(r=o.createElement("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})))},u={CC0:"https://creativecommons.org/publicdomain/zero/1.0/","Creative Commons Attribution":"https://creativecommons.org/licenses/by/4.0/","CC Attribution-NonCommercial-ShareAlike":"http://creativecommons.org/licenses/by-nc-sa/4.0/"},h=function(e){var t=e.items,n=void 0===t?[]:t,i=e.className,r=void 0===i?"":i;return o.createElement("div",{className:r},o.createElement("article",{className:"message is-info"},o.createElement("div",{className:"message-body"},o.createElement("div",{className:"mb-2 is-flex is-align-items-center"},o.createElement(c,{className:"mr-1"}),o.createElement("span",{className:"has-text-weight-bold"},"Assets Used")),n.map((function(e,t){return o.createElement("div",{key:t},o.createElement("span",{className:"mx-2"},"\u25aa"),o.createElement("a",{href:e.link},e.name)," by ",o.createElement("a",{href:e.authorLink},e.author)," licensed under ",o.createElement("a",{href:u[e.license]},e.license))})))))}},1094:function(e,t,n){n.d(t,{bU:function(){return y.bU},ZP:function(){return V}});var i=n(3366),r=n(3144),o=n(4578),a=n(7294),s=n(6010),l=n(6455),c=n.n(l),u=n(2212),h=n(5861),d=n(7757),_=n.n(d),v=n(6532),p=n(2451),f=function(){function e(e){void 0===e&&(e={}),this._options=e,this._button=null}var t=e.prototype;return t.init=function(){var e=(0,h.Z)(_().mark((function e(t){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._addButton(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.teardown=function(e){var t=this._button;t&&(t.parentElement===e.rootEl&&e.rootEl.removeChild(t),this._button=null)},t._addButton=function(){var e=(0,h.Z)(_().mark((function e(t){var n,i,r,o,a,s,l,c,u,h,d,f,m,g=this;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._options,i=n.availableText,r=void 0===i?"View in AR":i,o=n.unavailableText,a=void 0===o?"AR is not available in this browser":o,s=n.buttonClass,l=void 0===s?"view3d-ar-button":s,c=n.tooltipClass,u=void 0===c?"view3d-tooltip":c,e.next=3,t.ar.isAvailable();case 3:if(h=e.sent,d=document.createElement(p.L2),f=document.createElement(p.yy),m=document.createTextNode(h?r:a),d.classList.add(l),f.classList.add(u),d.disabled=!0,d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" viewBox="0 0 24 24" width="32px" height="32px"><g><rect fill="none" height="24" width="24" x="0" y="0"/></g><g><g><path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.34,1,1,2.34,1,4v2h2V4z"/><path d="M3,20v-2H1v2c0,1.66,1.34,3,3,3h2v-2H4C3.45,21,3,20.55,3,20z"/><path d="M20,1h-2v2h2c0.55,0,1,0.45,1,1v2h2V4C23,2.34,21.66,1,20,1z"/><path d="M21,20c0,0.55-0.45,1-1,1h-2v2h2c1.66,0,3-1.34,3-3v-2h-2V20z"/><path d="M19,14.87V9.13c0-0.72-0.38-1.38-1-1.73l-5-2.88c-0.31-0.18-0.65-0.27-1-0.27s-0.69,0.09-1,0.27L6,7.39 C5.38,7.75,5,8.41,5,9.13v5.74c0,0.72,0.38,1.38,1,1.73l5,2.88c0.31,0.18,0.65,0.27,1,0.27s0.69-0.09,1-0.27l5-2.88 C18.62,16.25,19,15.59,19,14.87z M11,17.17l-4-2.3v-4.63l4,2.33V17.17z M12,10.84L8.04,8.53L12,6.25l3.96,2.28L12,10.84z M17,14.87l-4,2.3v-4.6l4-2.33V14.87z"/></g></g></svg>',d.appendChild(f),f.appendChild(m),t.rootEl.appendChild(d),this._button=d,!t.initialized){e.next=20;break}return e.next=18,this._setAvailable(t,d,h);case 18:e.next=21;break;case 20:t.once(v.FP.MODEL_CHANGE,(function(){g._setAvailable(t,d,h)}));case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t._setAvailable=function(){var e=(0,h.Z)(_().mark((function e(t,n,i){return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i?(n.disabled=!1,n.addEventListener("click",(function(){t.ar.enter()}))):n.disabled=!0;case 1:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),e}(),m=f,g=n(7450),E=function(){function e(e){var t=void 0===e?{}:e,n=t.className,i=void 0===n?{}:n,r=t.showPlaneDetection,o=void 0===r||r,a=t.toastText,s=void 0===a?"Point your device downwards to find the ground and move it around.":a;this.className=i,this.showPlaneDetection=o,this.toastText=s,this._createElements()}var t=e.prototype;return t.init=function(){var t=(0,h.Z)(_().mark((function t(n){var i,r,o,a;return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=this._rootEl,r=this._detectionRootEl,o=this._closeButtonEl,a=Object.assign({},e.DEFAULT_CLASS,this.className),n.on(v.FP.AR_START,(function(e){var t=e.session,s=t.domOverlay.root;if(s){s.appendChild(i);var l=function(){t.exit()};null==r||r.classList.add(a.DETECTION_VISIBLE);var c=function(){null==r||r.classList.remove(a.DETECTION_VISIBLE)};n.once(v.FP.AR_MODEL_PLACED,c),o.addEventListener(p.FP.CLICK,l),n.once(v.FP.AR_END,(function(){i.parentElement&&i.parentElement.removeChild(i),o.removeEventListener(p.FP.CLICK,l),n.off(v.FP.AR_MODEL_PLACED,c)}))}}));case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t.teardown=function(){},t._createElements=function(){var t=Object.assign({},e.DEFAULT_CLASS,this.className),n=document.createElement(p.yy),i=document.createElement(p.yy);i.classList.add(t.CLOSE_BUTTON),i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="48px" height="48px" fill="#FFFFFF"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>',n.classList.add(t.ROOT),n.appendChild(i),this.showPlaneDetection&&(this._detectionRootEl=this._createPlaneDetectionElements(),n.appendChild(this._detectionRootEl)),this._rootEl=n,this._closeButtonEl=i},t._createPlaneDetectionElements=function(){var t=Object.assign({},e.DEFAULT_CLASS,this.className),n=document.createElement(p.yy),i=document.createElement(p.yy),r=document.createElement(p.yy),o=document.createElement(p.yy),a=document.createElement(p.yy),s=document.createElement(p.yy),l=(0,g.w6)(5).map((function(){return document.createElement(p.yy)}));return n.classList.add(t.DETECTION_ROOT),i.classList.add(t.DETECTION_ICON),r.classList.add(t.DETECTION_TOAST),o.classList.add(t.DETECTION_PHONE),a.classList.add(t.DETECTION_CUBE),s.classList.add(t.DETECTION_PLANE),r.innerHTML=this.toastText,l.forEach((function(e){e.classList.add(t.DETECTION_CUBE_FACE),a.appendChild(e)})),i.appendChild(o),i.appendChild(a),i.appendChild(s),n.appendChild(i),n.appendChild(r),n},e}();E.DEFAULT_CLASS={ROOT:"view3d-ar-root",CLOSE_BUTTON:"view3d-ar-close",DETECTION_ROOT:"view3d-ar-detection",DETECTION_ICON:"view3d-ar-detection-icon",DETECTION_TOAST:"view3d-ar-detection-toast",DETECTION_PHONE:"view3d-ar-phone",DETECTION_CUBE:"view3d-ar-cube",DETECTION_CUBE_FACE:"view3d-ar-cube-face",DETECTION_PLANE:"view3d-ar-plane",DETECTION_VISIBLE:"visible"};var w=E,y=n(7939),b=n(9294),T=n(4943),O=n(3862),k=n(9877),P=n(8215),S=n(1736),x=function(e){var t=e.options,n=Object.keys(t).map((function(e,n){return e+"="+("string"==typeof t[e]?'"'+t[e]+'"':"{"+JSON.stringify(t[e])+"}")})).join("\n  ");return a.createElement(S.Z,{className:"language-jsx"},"<View3D "+n+" />")},C=function(e){var t=e.options,n=Object.keys(t).map((function(e){return"["+e+"]="+("string"==typeof t[e]?"\"'"+t[e]+"'\"":'"'+JSON.stringify(t[e]).replace(/\"/g,"'")+'"')})).join("\n  ");return a.createElement(S.Z,{className:"language-html"},"<ngx-view3d "+n+" />")},N=function(e){var t=e.options,n=Object.keys(t).map((function(e){return"string"==typeof t[e]?e+'="'+t[e]+'"':":"+e+'="'+JSON.stringify(t[e]).replace(/\"/g,"'")+'"'})).join("\n  ");return a.createElement(S.Z,{className:"language-html"},"<View3D "+n+" />")},A=function(e){var t=e.options,n=Object.keys(t).map((function(e){return e+"="+("string"==typeof t[e]?'"'+t[e]+'"':"{"+JSON.stringify(t[e])+"}")})).join("\n  ");return a.createElement(S.Z,{className:"language-jsx"},"<View3D "+n+" />")},D=function(e){var t=e.options,n=void 0===t?{}:t,i=JSON.stringify(n,void 0,4).replace(/"([^"]+)":/g,"$1:");return a.createElement("div",null,a.createElement(k.Z,{groupId:"options",defaultValue:"json",lazy:!0,values:[{label:"JSON",value:"json"},{label:"JavaScript",value:"js"},{label:"React",value:"react"},{label:"Angular",value:"ng"},{label:"Vue@2",value:"vue2"},{label:"Vue@3",value:"vue3"},{label:"Svelte",value:"svelte"}]},a.createElement(P.Z,{value:"json"},a.createElement(S.Z,{className:"language-json"},i)),a.createElement(P.Z,{value:"js"},a.createElement(S.Z,{className:"language-js"},'new View3D("#el", '+i+");")),a.createElement(P.Z,{value:"react"},a.createElement(x,{options:n})),a.createElement(P.Z,{value:"ng"},a.createElement(C,{options:n})),a.createElement(P.Z,{value:"vue2"},a.createElement(N,{options:n})),a.createElement(P.Z,{value:"vue3"},a.createElement(N,{options:n})),a.createElement(P.Z,{value:"svelte"},a.createElement(A,{options:n}))))},L=n(5130),R="overlay_CVb9",M="events_EnEF",I="tagWrapper_RURp",F="arrow_DXy6",z="tags_zihy",Z=function(e){function t(t){var n;return(n=e.call(this,t)||this)._onEvent=function(e){var t=n.state.events,i=t[t.length-1];i&&e.type===i.name?i.count+=1:t.push({name:e.type,count:1}),n.setState({events:t})},n.state={events:[]},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;setTimeout((function(){var t=e.props,n=t.view3D,i=t.events;Object.values(i).forEach((function(t){n.view3D.on(t,e._onEvent)}))}))},n.render=function(){var e=this.state.events;return a.createElement("div",{className:R},a.createElement("div",{className:M},a.createElement("div",{className:"button is-white is-outlined",style:{pointerEvents:"none"}},"Events Triggered"),a.createElement("div",{className:e.length>0?"mt-2":""},e.map((function(e,t){return a.createElement("span",{key:t,className:(0,s.Z)(I,"mb-2")},t>0&&a.createElement(L.Z,{className:(0,s.Z)(F)}),a.createElement("span",{className:(0,s.Z)(z,"bulma-tags","has-addons","mb-0"),key:t},a.createElement("span",{className:"bulma-tag mb-0 is-medium is-dark"},e.name),a.createElement("span",{className:"bulma-tag mb-0 is-medium is-info"},e.count)))})))))},t}(a.Component);Z.defaultProps={events:[]};var U=Z,B=["children","showBbox","showARButton","showLoadingBar","showControlBar","showExampleCode","clickToLoad"],H=["children","className","clickToLoad","showBbox","showARButton","showLoadingBar","showControlBar","showExampleCode","showEventsTriggered","style"],j=function(e){function t(t){var n;return(n=e.call(this,t)||this)._rootRef=a.createRef(),n.state={arAvailable:!1,initialized:!1},n}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e,t=this,n=this.props,r=(n.children,n.showBbox),o=n.showARButton,a=n.showLoadingBar,s=n.showControlBar,l=(n.showExampleCode,n.clickToLoad),c=(0,i.Z)(n,B),h=null!=(e=c.plugins)?e:[];o&&h.push(new m,new w),a&&h.push(new b.Z(a)),s&&h.push(new T.Z(s));var d=Object.assign({},c,{plugins:h,autoInit:!l&&c.autoInit}),_=new y.ZP(this._rootRef.current,d);_.on("ready",(function(){t.setState({initialized:!0})})),this._view3D=_,r&&_.once("modelChange",(function(e){var t=e.model,n=t.bbox.clone().applyMatrix4(t.scene.matrixWorld),i=new u.GQ(n,new u.Ilk(65535));_.scene.add(i)}))},n.componentWillUnmount=function(){this._view3D.destroy()},n.render=function(){var e=this,n=this.state.initialized,r=this.props,o=r.children,l=r.className,u=r.clickToLoad,h=(r.showBbox,r.showARButton,r.showLoadingBar,r.showControlBar,r.showExampleCode),d=r.showEventsTriggered,_=r.style,v=(0,i.Z)(r,H),p=Array.isArray(h)?h:[],f=Object.keys(v).filter((function(e){return e in y.ZP.prototype&&(v[e]!==t.defaultProps[e]||p.includes(e))})).reduce((function(e,t){var n;return Object.assign({},e,((n={})[t]=v[t],n))}),{});return delete f.on,a.createElement(a.Fragment,null,a.createElement("div",{ref:this._rootRef,className:(0,s.Z)(l,"view3d-wrapper","view3d-1by1","mb-2"),style:_},a.createElement("canvas",{className:"view3d-canvas"}),u&&a.createElement("div",{className:(0,s.Z)({"view3d-overlay":!0,hidden:n})},a.createElement("div",{className:"button is-medium",onClick:function(t){var n=t.currentTarget;n.classList.contains("is-loading")||(n.classList.add("is-loading"),e._view3D.init().catch((function(t){c().fire({title:"Error!",text:t.message,icon:"error"}),e.setState({initialized:!0})})))}},a.createElement("span",{className:"icon is-medium"},a.createElement(O.Z,null)),a.createElement("span",null,"Load 3D model"))),d&&a.createElement(U,{view3D:this,events:d}),o),h&&a.createElement(D,{options:f}))},(0,r.Z)(t,[{key:"view3D",get:function(){return this._view3D}}]),t}(a.Component);j.defaultProps={className:"",clickToLoad:!1,showARButton:!1,showLoadingBar:null,showControlBar:null,showBbox:!1,showExampleCode:!1,showEventsTriggered:null,dracoPath:"/egjs-view3d/lib/draco/",ktxPath:"/egjs-view3d/lib/basis/",meshoptPath:"/egjs-view3d/lib/meshopt_decoder.js"};var V=j},2451:function(e,t,n){n.d(t,{FP:function(){return a},L2:function(){return u},T:function(){return i},WV:function(){return s},cj:function(){return r},o2:function(){return l},wZ:function(){return o},yy:function(){return c}});var i,r=function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1},o=function(){return/android/i.test(navigator.userAgent)},a={MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",WHEEL:"wheel",RESIZE:"resize",CONTEXT_MENU:"contextmenu",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_UP:"pointerup",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",LOAD:"load",ERROR:"error",CLICK:"click",DOUBLE_CLICK:"dblclick",CONTEXT_LOST:"webglcontextlost",CONTEXT_RESTORED:"webglcontextrestored"},s={GRAB:"grab",GRABBING:"grabbing",NONE:""};!function(e){e[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT"}(i||(i={}));Number.MAX_SAFE_INTEGER;var l="anonymous",c="div",u="button"},1372:function(e,t,n){n.d(t,{FW:function(){return h},Fw:function(){return a},QU:function(){return p},XK:function(){return s},Xt:function(){return r},eA:function(){return v},es:function(){return d},oK:function(){return c},xg:function(){return l},y2:function(){return u},yt:function(){return _},zn:function(){return o}});var i=n(6532),r=i.Xt.EASE_OUT_CUBIC,o=300,a=!1,s={min:0,max:1},l=45,c={min:-1/0,max:1/0},u={min:-89.9,max:89.9},h={165:0,135:.4,0:1},d="view3d-ar-overlay",_="https://www.gstatic.com/draco/versioned/decoders/1.4.1/",v="https://unpkg.com/three@0.134.0/examples/js/libs/basis/",p=[i.ok.WEBXR,i.ok.SCENE_VIEWER,i.ok.QUICK_LOOK]},7923:function(e,t,n){t.ZP={CODES:{WRONG_TYPE:0,ELEMENT_NOT_FOUND:1,CANVAS_NOT_FOUND:2,WEBGL_NOT_SUPPORTED:3,PROVIDE_SRC_FIRST:4,FILE_NOT_SUPPORTED:5,NOT_INITIALIZED:6,MODEL_FAIL_TO_LOAD:7},MESSAGES:{WRONG_TYPE:function(e,t){return typeof e+" is not a "+t.map((function(e){return'"'+e+'"'})).join(" or ")+"."},ELEMENT_NOT_FOUND:function(e){return'Element with selector "'+e+'" not found.'},CANVAS_NOT_FOUND:"The canvas element was not found inside the given root element.",WEBGL_NOT_SUPPORTED:"WebGL is not supported on this browser.",PROVIDE_SRC_FIRST:'"src" should be provided before initialization.',FILE_NOT_SUPPORTED:function(e){return'Given file "'+e+'" is not supported.'},NOT_INITIALIZED:"View3D is not initialized yet.",MODEL_FAIL_TO_LOAD:function(e){return'Failed to load/parse the 3D model with the given url: "'+e+'". Check "loadError" event for actual error instance.'}}}},6532:function(e,t,n){n.d(t,{B7:function(){return r},FP:function(){return o},Qz:function(){return s},U3:function(){return _},Xi:function(){return h},Xt:function(){return a},bU:function(){return l},ok:function(){return u},rC:function(){return d},sO:function(){return c}});var i=n(4412),r="auto",o={READY:"ready",LOAD_START:"loadStart",LOAD:"load",LOAD_ERROR:"loadError",LOAD_FINISH:"loadFinish",MODEL_CHANGE:"modelChange",RESIZE:"resize",BEFORE_RENDER:"beforeRender",RENDER:"render",PROGRESS:"progress",INPUT_START:"inputStart",INPUT_END:"inputEnd",CAMERA_CHANGE:"cameraChange",ANIMATION_START:"animationStart",ANIMATION_LOOP:"animationLoop",ANIMATION_FINISHED:"animationFinished",ANNOTATION_FOCUS:"annotationFocus",ANNOTATION_UNFOCUS:"annotationUnfocus",AR_START:"arStart",AR_END:"arEnd",AR_MODEL_PLACED:"arModelPlaced",QUICK_LOOK_TAP:"quickLookTap"},a={SINE_WAVE:function(e){return Math.sin(e*Math.PI*2)},EASE_OUT_CUBIC:function(e){return 1-Math.pow(1-e,3)},EASE_OUT_BOUNCE:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}},s={WRAPPER:"view3d-wrapper",CANVAS:"view3d-canvas",POSTER:"view3d-poster",AR_OVERLAY:"view3d-ar-overlay",ANNOTATION_WRAPPER:"view3d-annotation-wrapper",ANNOTATION:"view3d-annotation",ANNOTATION_TOOLTIP:"view3d-annotation-tooltip",ANNOTATION_DEFAULT:"default",ANNOTATION_SELECTED:"selected",ANNOTATION_HIDDEN:"hidden",ANNOTATION_FLIP_X:"flip-x",ANNOTATION_FLIP_Y:"flip-y",CTX_LOST:"ctx-lost"},l={LINEAR:i.EoG,REINHARD:i.CdI,CINEON:i.YGz,ACES_FILMIC:i.LY2},c={FOV:"fov",DISTANCE:"distance"},u={WEBXR:"webAR",SCENE_VIEWER:"sceneViewer",QUICK_LOOK:"quickLook"},h={ONLY_AR:"ar_only",ONLY_3D:"3d_only",PREFER_AR:"ar_preferred",PREFER_3D:"3d_preferred"},d={ROTATE:0,TRANSLATE:1,ZOOM:2},_={ONE:"one",NONE:"none",ALL:"all"}},536:function(e,t,n){n.d(t,{Fy:function(){return s},HZ:function(){return l},QA:function(){return o},ei:function(){return a},u1:function(){return i},xI:function(){return r}});var i,r=["alphaMap","aoMap","bumpMap","displacementMap","emissiveMap","envMap","lightMap","map","metalnessMap","normalMap","roughnessMap","sheenColorMap","sheenRoughnessMap","specularColorMap","specularIntensityMap","transmissionMap","clearcoatMap","clearcoatNormalMap"],o={HOLD:"hold",RELEASE:"release",ENABLE:"enable",DISABLE:"disable"};!function(e){e[e.NONE=0]="NONE",e[e.ONE_FINGER_HORIZONTAL=1]="ONE_FINGER_HORIZONTAL",e[e.ONE_FINGER_VERTICAL=2]="ONE_FINGER_VERTICAL",e[e.ONE_FINGER=3]="ONE_FINGER",e[e.TWO_FINGER_HORIZONTAL=4]="TWO_FINGER_HORIZONTAL",e[e.TWO_FINGER_VERTICAL=8]="TWO_FINGER_VERTICAL",e[e.TWO_FINGER=12]="TWO_FINGER",e[e.PINCH=16]="PINCH"}(i||(i={}));var a="EXT_View3D_texture_LOD",s="view3d-lod",l="view3d-annotation"},1354:function(e,t,n){var i=n(3144),r=n(2519),o=n(1372),a=n(7450),s=function(){function e(e,t,n,i){var a=void 0===i?{}:i,s=a.duration,l=void 0===s?o.zn:s,c=a.easing,u=void 0===c?o.Xt:c,h=a.disableOnFinish,d=void 0===h||h;this._enabled=!1,this._finishCallbacks=[],this._view3D=e,this._motion=new r.Z({duration:l,range:o.XK,easing:u}),this._disableOnFinish=d,this.changeStartEnd(t,n)}var t=e.prototype;return t.destroy=function(){this.disable()},t.changeStartEnd=function(e,t){e=e.clone(),t=t.clone(),e.yaw=(0,a.zc)(e.yaw,0,360),t.yaw=(0,a.zc)(t.yaw,0,360),Math.abs(t.yaw-e.yaw)>180&&(t.yaw=t.yaw<e.yaw?t.yaw+360:t.yaw-360),this._from=e,this._to=t},t.update=function(e){if(this._enabled){var t=this._view3D.camera,n=this._from,i=this._to,r=this._motion;r.update(e);var o=r.val;t.yaw=(0,a.t7)(n.yaw,i.yaw,o),t.pitch=(0,a.t7)(n.pitch,i.pitch,o),t.zoom=(0,a.t7)(n.zoom,i.zoom,o),t.pivot=n.pivot.clone().lerp(i.pivot,o),o>=1&&(this._disableOnFinish&&this.disable(),this._finishCallbacks.forEach((function(e){return e()})),this.clearFinished())}},t.enable=function(){this._enabled||(this._enabled=!0,this.reset())},t.disable=function(){this._enabled&&(this._enabled=!1)},t.reset=function(){this._motion.reset(0),this._motion.setEndDelta(1)},t.onFinished=function(e){this._finishCallbacks.push(e)},t.clearFinished=function(){this._finishCallbacks=[]},t.resize=function(e){},t.sync=function(){},(0,i.Z)(e,[{key:"element",get:function(){return null}},{key:"enabled",get:function(){return this._enabled}},{key:"duration",get:function(){return this._motion.duration},set:function(e){this._motion.duration=e}},{key:"easing",get:function(){return this._motion.easing},set:function(e){this._motion.easing=e}},{key:"animating",get:function(){return this._motion.activated}}]),e}();t.Z=s},3586:function(e,t,n){var i=n(3144),r=n(4412),o=n(7450),a=function(){function e(e){var t=e.src,n=e.scenes,i=e.animations,o=void 0===i?[]:i,a=e.annotations,s=void 0===a?[]:a,l=e.fixSkinnedBbox,c=void 0!==l&&l,u=e.castShadow,h=void 0===u||u,d=e.receiveShadow,_=void 0!==d&&d;this._src=t;var v=new r.ZAu;v.add.apply(v,n),this._animations=o,this._annotations=s,this._scene=v;var p=this._getInitialBbox(c),f=p.min.y;v.translateY(-f),v.updateMatrixWorld(),p.translate(new r.Pa4(0,-f,0)),this._fixSkinnedBbox=c,this._bbox=p,this.castShadow=h,this.receiveShadow=_}var t=e.prototype;return t.reduceVertices=function(e,t){var n=this,i=this.meshes,a=t;return i.forEach((function(t){var i=t.geometry.attributes.position;if(i)if(t.updateMatrixWorld(),n._fixSkinnedBbox&&t.isSkinnedMesh)n._forEachSkinnedVertices(t,(function(t){a=e(a,t)}));else for(var s=(0,o.Gr)(i),l=0;l<i.count;l++){var c=(new r.Pa4).fromBufferAttribute(i,l);i.normalized&&c.multiplyScalar(s),c.applyMatrix4(t.matrixWorld),a=e(a,c)}})),a},t._getInitialBbox=function(e){return this._scene.updateMatrixWorld(),e&&this._hasSkinnedMesh()?this._getSkeletonBbox():(new r.ZzF).setFromObject(this._scene)},t._getSkeletonBbox=function(){var e=this,t=new r.ZzF;return this.meshes.forEach((function(n){n.isSkinnedMesh?e._forEachSkinnedVertices(n,(function(e){return t.expandByPoint(e)})):t.expandByObject(n)})),t},t._getAllMeshes=function(){var e=[];return this._scene.traverse((function(t){t.isMesh&&e.push(t)})),e.sort((function(e,t){return e.name.localeCompare(t.name)}))},t._hasSkinnedMesh=function(){return this._getAllMeshes().some((function(e){return e.isSkinnedMesh}))},t._forEachSkinnedVertices=function(e,t){var n=e.geometry,i=n.attributes.position,r=n.attributes.skinWeight;e.skeleton.update();for(var a=(0,o.Gr)(i),s=(0,o.Gr)(r),l=0;l<i.count;l++){t((0,o.cy)(l,e,a,s))}},(0,i.Z)(e,[{key:"src",get:function(){return this._src}},{key:"scene",get:function(){return this._scene}},{key:"animations",get:function(){return this._animations}},{key:"annotations",get:function(){return this._annotations}},{key:"meshes",get:function(){return this._getAllMeshes()}},{key:"bbox",get:function(){return this._bbox}},{key:"castShadow",set:function(e){this.meshes.forEach((function(t){return t.castShadow=e}))}},{key:"receiveShadow",set:function(e){this.meshes.forEach((function(t){return t.receiveShadow=e}))}}]),e}();t.Z=a},2519:function(e,t,n){var i=n(3144),r=n(7450),o=n(1372),a=function(){function e(e){var t=void 0===e?{}:e,n=t.duration,i=void 0===n?o.zn:n,r=t.loop,a=void 0===r?o.Fw:r,s=t.range,l=void 0===s?o.XK:s,c=t.easing,u=void 0===c?o.Xt:c;this._duration=i,this._loop=a,this._range=l,this._easing=u,this._activated=!1,this.reset(0)}var t=e.prototype;return t.update=function(e){if(!this._activated)return 0;var t=this._start,n=this._end,i=this._duration,o=this._val,a=this._loop,s=this._progress+e/i;this._progress=a?(0,r.zc)(s,0,1):(0,r.uZ)(s,0,1);var l=this._easing(this._progress);return this._val=(0,r.t7)(t,n,l),!a&&this._progress>=1&&(this._activated=!1),this._val-o},t.reset=function(e){var t=this._range,n=(0,r.uZ)(e,t.min,t.max);this._start=n,this._end=n,this._val=n,this._progress=0,this._activated=!1},t.setEndDelta=function(e){var t=this._range;this._start=this._val,this._end=(0,r.uZ)(this._end+e,t.min,t.max),this._progress=0,this._activated=!0},(0,i.Z)(e,[{key:"val",get:function(){return this._val}},{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}},{key:"progress",get:function(){return this._progress}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e}},{key:"loop",get:function(){return this._loop},set:function(e){this._loop=e}},{key:"range",get:function(){return this._range},set:function(e){this._range=e}},{key:"easing",get:function(){return this._easing},set:function(e){this._easing=e}},{key:"activated",get:function(){return this._activated}}]),e}();t.Z=a},7130:function(e,t,n){var i=n(4412),r=n(7450),o=function(){function e(e,t,n,r){void 0===r&&(r=[0,0,0]),this.yaw=e,this.pitch=t,this.zoom=n,this.pivot=(new i.Pa4).fromArray(r)}var t=e.prototype;return t.clone=function(){return new e(this.yaw,this.pitch,this.zoom,this.pivot.toArray())},t.copy=function(e){this.yaw=e.yaw,this.pitch=e.pitch,this.zoom=e.zoom,this.pivot.copy(e.pivot)},t.equals=function(e){var t=this.yaw,n=this.pitch,i=this.zoom,o=this.pivot;return(0,r.zc)(t,0,360)===(0,r.zc)(e.yaw,0,360)&&n===e.pitch&&i===e.zoom&&o.equals(e.pivot)},e}();t.Z=o},7084:function(e,t,n){var i=n(4412),r=n(8212),o=function(){function e(){}return e.createDefaultEnv=function(t){var n=new i.xsS,r=new i.cek(16777215,.8,20);r.decay=2,r.position.set(0,7,0),n.add(r);var o=new i.nvb(1,1,1),a=new i.Wid({side:i._Li}),s=new i.Kj0(o,a);s.castShadow=!1,s.scale.set(15,45,15),s.position.set(0,20,0),n.add(s);var l=e._createRectAreaLightSource({intensity:4.5,width:4,height:4});l.position.set(0,2.5,0),l.rotateX(Math.PI/2);var c=e._createRectAreaLightSource({intensity:3,width:2,height:2});c.position.set(0,1,4),c.lookAt(0,0,0);var u=e._createRectAreaLightSource({intensity:3,width:2,height:2});u.position.set(-4,1,1),u.lookAt(0,0,0);var h=e._createRectAreaLightSource({intensity:3,width:2,height:2});h.position.set(4,1,1),h.lookAt(0,0,0);var d=e._createRectAreaLightSource({intensity:2.5,width:2,height:2});d.position.set(1.5,1,-4),d.lookAt(0,0,0);var _=e._createRectAreaLightSource({intensity:2.5,width:2,height:2});_.position.set(-1.5,1,-4),_.lookAt(0,0,0),n.add(l,c,u,h,d,_);var v=t.outputEncoding,p=t.toneMapping;t.outputEncoding=i.rnI,t.toneMapping=i.uL9;var f=new i.anP(t).fromScene(n,.035);return t.outputEncoding=v,t.toneMapping=p,f.texture},e.createBlurredHDR=function(e,t){var n=e.renderer.threeRenderer,o=new i.xsS;o.background=t;var a=n.toneMappingExposure;n.toneMappingExposure=1;var s=new i.oAp(256,{encoding:i.knz,format:i.wk1}),l=new i._am(.1,1e3,s);l.update(n,o);for(var c=r.F.fromCubeRenderTarget(n,s),u=new i.Wid({side:i._Li}),h=new i.Wjw(1,4),d=new i.xsS,_=new i.Kj0(h,u),v=h.getAttribute("normal"),p=0;p<v.count;p++)v.setXYZ(p,-v.getX(p),-v.getY(p),-v.getZ(p));return d.add(_),d.add(c),l.update(n,d),n.toneMappingExposure=a,s.texture},e._createRectAreaLightSource=function(e){var t=e.intensity,n=e.width,r=e.height,o=new i.BKK(n,r),a=new i.vBJ;return a.color.setScalar(t),new i.Kj0(o,a)},e}();t.Z=o},662:function(e,t,n){var i=n(7326),r=n(4578),o=function(e){function t(n,r){var o;return o=e.call(this,n)||this,Object.setPrototypeOf((0,i.Z)(o),t.prototype),o.name="View3DError",o.code=r,o}return(0,r.Z)(t,e),t}((0,n(4542).Z)(Error));t.Z=o},521:function(e,t,n){var i=n(3144),r=n(4412),o=n(2451),a=n(6532),s=n(7450),l=function(){function e(e,t){var n=this,i=void 0===t?{}:t,o=i.element,a=void 0===o?null:o,s=i.focus,l=void 0===s?[]:s,c=i.focusDuration,u=void 0===c?1e3:c,h=i.baseFov,d=void 0===h?45:h,_=i.baseDistance,v=void 0===_?null:_,p=i.aspect,f=void 0===p?1:p;this._onClick=function(){n.focus()},this._onWheel=function(e){e.preventDefault(),e.stopPropagation()},this._view3D=e,this._element=a,this._focus=l,this._focusDuration=u,this._baseFov=d,this._baseDistance=v,this._aspect=f,this._enabled=!1,this._hidden=!1,this._focusing=!1,this._tooltipSize=new r.FM8,a&&(a.draggable=!1,this.resize())}var t=e.prototype;return t.destroy=function(){var e=this._view3D.annotation.wrapper,t=this._element;this.disableEvents(),t&&t.parentElement===e&&e.removeChild(t)},t.resize=function(){var e=this._element;if(e){var t=e.querySelector("."+a.Qz.ANNOTATION_TOOLTIP);t&&this._tooltipSize.set(t.offsetWidth,t.offsetHeight)}},t.render=function(e){var t=e.screenPos,n=e.screenSize,i=e.renderOrder,r=this._element,o=this._tooltipSize;r&&!this._hidden&&(r.style.zIndex=""+(i+1),r.style.transform="translate(-50%, -50%) translate("+t.x+"px, "+t.y+"px)",t.y+o.y>n.y?r.classList.add(a.Qz.ANNOTATION_FLIP_Y):r.classList.remove(a.Qz.ANNOTATION_FLIP_Y),t.x+o.x>n.x?r.classList.add(a.Qz.ANNOTATION_FLIP_X):r.classList.remove(a.Qz.ANNOTATION_FLIP_X))},t.show=function(){var e=this._element;this._hidden=!1,e&&e.classList.remove(a.Qz.ANNOTATION_HIDDEN)},t.hide=function(){var e=this._element;this._hidden=!0,e&&e.classList.add(a.Qz.ANNOTATION_HIDDEN)},t.setOpacity=function(e){var t=this._element;t&&(t.style.opacity=""+e)},t.enableEvents=function(){var e=this._element;e&&!this._enabled&&(e.addEventListener(o.FP.CLICK,this._onClick),e.addEventListener(o.FP.WHEEL,this._onWheel),this._enabled=!0)},t.disableEvents=function(){var e=this._element;e&&this._enabled&&(e.removeEventListener(o.FP.CLICK,this._onClick),e.removeEventListener(o.FP.WHEEL,this._onWheel),this._enabled=!1)},t._getFocus=function(){var e,t=this._view3D,n=(new r.Pa4).fromArray(this._focus),i=t.camera.baseDistance,o=t.renderer.size,a=Math.max(o.height/o.width,1),l=this._aspect,c=this._baseFov,u=a/l*(null!=(e=this._baseDistance)?e:i)*Math.tan((0,s.c$)((c-n.z)/2)),h=2*(0,s.Dc)(Math.atan(u/i));return n.z=t.camera.baseFov-h,n},t._onFocus=function(){var e=this._view3D,t=this._element;t&&t.classList.add(a.Qz.ANNOTATION_SELECTED),this._focusing=!0,e.trigger(a.FP.ANNOTATION_FOCUS,{type:a.FP.ANNOTATION_FOCUS,target:e,annotation:this})},t._onUnfocus=function(){var e=this._view3D,t=this._element;t&&t.classList.remove(a.Qz.ANNOTATION_SELECTED),this._focusing=!1,e.trigger(a.FP.ANNOTATION_UNFOCUS,{type:a.FP.ANNOTATION_UNFOCUS,target:e,annotation:this})},(0,i.Z)(e,[{key:"element",get:function(){return this._element}},{key:"renderable",get:function(){return!!this._element}},{key:"focusPose",get:function(){return this._focus}},{key:"focusDuration",get:function(){return this._focusDuration},set:function(e){this._focusDuration=e}},{key:"baseFov",get:function(){return this._baseFov},set:function(e){this._baseFov=e}},{key:"baseDistance",get:function(){return this._baseDistance},set:function(e){this._baseDistance=e}},{key:"aspect",get:function(){return this._aspect},set:function(e){this._aspect=e}},{key:"hidden",get:function(){return this._hidden}}]),e}();t.Z=l},9396:function(e,t,n){var i=n(5861),r=n(3366),o=n(3144),a=n(4578),s=n(7757),l=n.n(s),c=n(4412),u=n(7130),h=n(1354),d=n(7450),_=n(521),v=["meshIndex","faceIndex","weights"],p=function(e){function t(t,n){var i,o=void 0===n?{}:n,a=o.meshIndex,s=void 0===a?-1:a,l=o.faceIndex,c=void 0===l?-1:l,u=o.weights,h=void 0===u?(0,d.w6)(3).map((function(){return 1/3})):u,_=(0,r.Z)(o,v);return(i=e.call(this,t,_)||this)._meshIndex=s,i._faceIndex=c,i._weights=h,i._trackingControl=null,i}(0,a.Z)(t,e);var n=t.prototype;return n.focus=function(){var e=(0,i.Z)(l().mark((function e(){var t,n,i,r,o,a,s,c=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._focusing){e.next=2;break}return e.abrupt("return");case 2:t=this._view3D,n=t.camera,i=t.control,r=this._getFocus(),o=this._getPosition(),a=new u.Z(r.x,r.y,r.z,o.toArray()),s=new h.Z(t,n.currentPose,a,{duration:this._focusDuration,disableOnFinish:!1}),this._trackingControl=s,s.enable(),i.add(s),window.addEventListener("click",(function(){c.unfocus()}),{once:!0,capture:!0}),this._onFocus();case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.unfocus=function(){if(this._focusing){var e=this._view3D.control,t=this._trackingControl;t&&(e.sync(),e.remove(t),t.destroy(),this._trackingControl=null),this._onUnfocus()}},n.render=function(t){e.prototype.render.call(this,t);var n=this._trackingControl;if(n){var i=this._view3D.camera,r=this._getFocus(),o=this._getPosition(),a=new u.Z(r.x,r.y,r.z,o.toArray());n.changeStartEnd(i.currentPose,a),n.reset()}},n.toJSON=function(){return{meshIndex:this._meshIndex,faceIndex:this._faceIndex,focus:this._focus,duration:this._focusDuration}},n._getPosition=function(){var e=this._view3D.model,t=this._meshIndex,n=this._faceIndex,i=this._weights,r=(0,d.pU)(e,t,n);return r?(new c.Pa4).addScaledVector(r[0],i[0]).addScaledVector(r[1],i[1]).addScaledVector(r[2],i[2]):new c.Pa4},(0,o.Z)(t,[{key:"position",get:function(){return this._getPosition()}},{key:"renderable",get:function(){return!!this._element&&this._meshIndex>=0&&this._faceIndex>=0}},{key:"meshIndex",get:function(){return this._meshIndex}},{key:"faceIndex",get:function(){return this._faceIndex}},{key:"weights",get:function(){return this._weights}}]),t}(_.Z);t.Z=p},7939:function(e,t,n){n.d(t,{bU:function(){return v.bU},ZP:function(){return Be}});var i,r=n(5861),o=n(3144),a=n(7326),s=n(4578),l=n(7757),c=n.n(l),u=n(3305),h=n(4412),d=n(7450),_=n(2451),v=n(6532),p=function(){function e(e){var t=this;this._defaultRenderLoop=function(e){var n=t._view3D,i=n.control,r=n.autoPlayer;(n.animator.animating||i.animating||r.animating)&&t._renderFrame(e)},this._onContextLost=function(){t._canvas.classList.add(v.Qz.CTX_LOST)},this._onContextRestore=function(){var e=t._canvas,n=t._view3D.scene;e.classList.remove(v.Qz.CTX_LOST),n.initTextures(),t.renderSingleFrame()};var n=(0,d.gE)(e.rootEl,e.canvasSelector);this._canvas=n,this._view3D=e,this._renderQueued=!1;var i=new h.CP7({canvas:n,alpha:!0,antialias:!0,preserveDrawingBuffer:!0});i.toneMapping=e.toneMapping,i.toneMappingExposure=e.exposure,i.outputEncoding=h.knz,i.setClearColor(0,0),this._halfFloatAvailable=(0,d.Bb)(i),this._renderer=i,this._clock=new h.SUY(!1),this._canvasSize=new h.FM8,n.addEventListener(_.FP.CONTEXT_LOST,this._onContextLost),n.addEventListener(_.FP.CONTEXT_RESTORED,this._onContextRestore)}var t=e.prototype;return t.destroy=function(){var e=this._canvas;this.stopAnimationLoop(),this._renderer.dispose(),e.removeEventListener(_.FP.CONTEXT_LOST,this._onContextLost),e.removeEventListener(_.FP.CONTEXT_RESTORED,this._onContextRestore)},t.resize=function(){var e=this._renderer,t=this._canvas;if(!e.xr.isPresenting){var n=t.clientWidth,i=t.clientHeight;e.setPixelRatio(window.devicePixelRatio),e.setSize(n,i,!1),this._canvasSize.set(n,i)}},t.setAnimationLoop=function(e){var t=this._view3D,n=this._clock;n.start(),this._renderer.setAnimationLoop((function(i,r){var o=Math.min(n.getDelta(),t.maxDeltaTime);e(o,r)}))},t.stopAnimationLoop=function(){this._clock.stop(),this._renderer.setAnimationLoop(null)},t.renderSingleFrame=function(e){var t=this;void 0===e&&(e=!1),this._renderer.xr.isPresenting||(e?this._renderFrame(0):this._renderQueued||(requestAnimationFrame((function(){t._renderFrame(0)})),this._renderQueued=!0))},t._renderFrame=function(e){var t=this._view3D,n=this._renderer,i=t.scene,r=t.camera,o=t.control,a=t.autoPlayer,s=t.animator,l=t.annotation;if(!n.getContext().isContextLost()){var c=1e3*e;this._renderQueued=!1,s.update(e),o.update(c),a.update(c),t.trigger(v.FP.BEFORE_RENDER,{type:v.FP.BEFORE_RENDER,target:t,delta:c}),r.updatePosition(),i.shadowPlane.render(),n.render(i.root,r.threeCamera),l.render(),t.trigger(v.FP.RENDER,{type:v.FP.RENDER,target:t,delta:c})}},(0,o.Z)(e,[{key:"canvas",get:function(){return this._canvas}},{key:"context",get:function(){return this._renderer.getContext()}},{key:"threeRenderer",get:function(){return this._renderer}},{key:"defaultRenderLoop",get:function(){return this._defaultRenderLoop}},{key:"size",get:function(){var e=this._renderer.getSize(new h.FM8);return{width:e.width,height:e.y}}},{key:"canvasSize",get:function(){return this._canvasSize}},{key:"capabilities",get:function(){var e=this._renderer;return Object.assign({},e.capabilities,{halfFloat:this._halfFloatAvailable})}}]),e}(),f=n(8567),m=function(e){function t(t){return e.call(this,t)||this}(0,s.Z)(t,e);var n=t.prototype;return n.load=function(e){var t=this,n=this._view3D;return new Promise((function(i,r){var o=new h.dpR,a=(0,d.uh)(n,e);o.setCrossOrigin(_.o2),o.load(e,i,(function(n){return t._onLoadingProgress(n,e,a)}),(function(e){a.initialized=!0,r(e)}))}))},n.loadHDRTexture=function(e){var t=this,n=this._view3D;return new Promise((function(i,r){var o=new f.x;n.renderer.capabilities.halfFloat||(o.type=h.VzW);var a=(0,d.uh)(n,e);o.setCrossOrigin(_.o2),o.load(e,(function(e){e.mapping=h.dSO,i(e)}),(function(n){return t._onLoadingProgress(n,e,a)}),(function(e){a.initialized=!0,r(e)}))}))},t}(n(1351).Z),g=n(536),E=n(8625),w=n(6665),y=function(){function e(e,t){var n=void 0===t?{}:t,i=n.darkness,r=void 0===i?.5:i,o=n.mapSize,a=void 0===o?9:o,s=n.blur,l=void 0===s?3.5:s,c=n.shadowScale,u=void 0===c?1:c,d=n.planeScale,_=void 0===d?2:d;this._view3D=e,this._darkness=r,this._mapSize=a,this._blur=l,this._shadowScale=u,this._planeScale=_;var v=e.renderer.threeRenderer,p=Math.min(Math.pow(2,Math.floor(a)),v.capabilities.maxTextureSize);this._root=new h.ZAu,this._renderTarget=new h.dd2(p,p,{format:h.wk1}),this._blurTarget=new h.dd2(p,p,{format:h.wk1}),this._renderTarget.texture.generateMipmaps=!1,this._blurTarget.texture.generateMipmaps=!1;var f=new h.iKG(-.5,.5,.5,-.5,0);f.rotation.x=Math.PI/2,this._shadowCamera=f,this._root.add(f);var m=new h.iKG(-.5,.5,.5,-.5,0);this._blurCamera=m,this._setupPlanes()}var t=e.prototype;return t.updateDimensions=function(e){var t=this._root,n=this._shadowCamera,i=this._planeScale,r=e.bbox.getBoundingSphere(new h.aLr),o=2*i*r.radius,a=this._shadowScale;n.far=a*(e.bbox.max.y-e.bbox.min.y)/o,n.rotation.set(Math.PI/2,Math.PI,0,"YXZ"),t.position.copy(r.center).setY(e.bbox.min.y),t.scale.setScalar(o),n.updateProjectionMatrix()},t.render=function(){this._plane.visible=!1;var e=this._view3D,t=e.renderer,n=e.ar,i=this._shadowCamera,r=t.threeRenderer,o=n.activeSession?n.activeSession.arScene:e.scene,a=r.xr.enabled;r.xr.enabled=!1;var s=o.root,l=s.background;s.background=null,s.overrideMaterial=this._depthMaterial;var c=r.getClearAlpha();r.setClearAlpha(0);var u=r.getRenderTarget();r.setRenderTarget(this._renderTarget),r.clear(),r.render(s,i),s.overrideMaterial=null,this._blurShadow(this._blur),this._blurShadow(.4*this._blur),r.xr.enabled=a,r.setRenderTarget(u),r.setClearAlpha(c),s.background=l,this._plane.visible=!0},t._blurShadow=function(e){var t=this._view3D.renderer,n=this._blurCamera,i=t.threeRenderer,r=this._blurPlane,o=this._renderTarget,a=this._blurTarget,s=this._horizontalBlurMaterial,l=this._verticalBlurMaterial;r.visible=!0,s.uniforms.tDiffuse.value=o.texture,s.uniforms.h.value=1*e/256,s.needsUpdate=!0,r.material=s,i.setRenderTarget(a),i.render(r,n),l.uniforms.tDiffuse.value=a.texture,l.uniforms.v.value=1*e/256,l.needsUpdate=!0,r.material=l,i.setRenderTarget(o),i.render(r,n),r.visible=!1},t._setupPlanes=function(){var e=this._root,t=new h.BKK,n=new h.vBJ({opacity:this._darkness,transparent:!0,side:h._Li,depthWrite:!1,map:this._renderTarget.texture}),i=new h.Kj0(t,n);i.renderOrder=1,i.scale.set(-1,-1,1),i.rotation.order="YXZ",i.rotation.x=Math.PI/2,this._plane=i,e.add(i);var r=new h.Kj0(t);this._blurPlane=r;var o=new h.lRF;o.onBeforeCompile=function(e){e.fragmentShader="\n        "+e.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this._depthMaterial=o;var a=new h.jyz(E.P);a.depthTest=!1,this._horizontalBlurMaterial=a;var s=new h.jyz(w.Z);s.depthTest=!1,this._verticalBlurMaterial=s},(0,o.Z)(e,[{key:"root",get:function(){return this._root}},{key:"darkness",get:function(){return this._darkness},set:function(e){this._plane.material.opacity=e,this._darkness=e}},{key:"mapSize",get:function(){return this._mapSize}},{key:"blur",get:function(){return this._blur},set:function(e){this._blur=e}},{key:"shadowScale",get:function(){return this._shadowScale},set:function(e){this._shadowScale=e;var t=this._view3D.model;t&&this.updateDimensions(t)}},{key:"planeScale",get:function(){return this._planeScale}}]),e}(),b=n(7084),T=function(){function e(e){this._view3D=e,this._root=new h.xsS,this._userObjects=new h.ZAu,this._envObjects=new h.ZAu,this._fixedObjects=new h.ZAu,this._shadowPlane=new y(e,(0,d.PO)(e.shadow));var t=this._root,n=this._userObjects,i=this._envObjects,r=this._fixedObjects,o=this._shadowPlane;n.name="userObjects",i.name="envObjects",r.name="fixedObjects",t.add(n,i,r),e.shadow&&r.add(o.root)}var t=e.prototype;return t.reset=function(e){var t=(void 0===e?{}:e).volatileOnly,n=void 0===t||t;this._removeChildsOf(this._userObjects),n||this._removeChildsOf(this._envObjects)},t.add=function(e,t){void 0===t&&(t=!0);var n=t?this._userObjects:this._envObjects,i=Array.isArray(e)?e:[e];n.add.apply(n,i)},t.remove=function(e){var t,n,i=Array.isArray(e)?e:[e];(t=this._userObjects).remove.apply(t,i),(n=this._envObjects).remove.apply(n,i)},t.setBackground=function(){var e=(0,r.Z)(c().mark((function e(t){var n,i,r,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._view3D,i=this._root,"number"!=typeof t&&"#"!==t.charAt(0)){e.next=6;break}i.background=new h.Ilk(t),e.next=12;break;case 6:return r=new m(n),e.next=9,r.load(t);case 9:(o=e.sent).encoding=h.knz,i.background=o;case 12:n.renderer.renderSingleFrame();case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.setSkybox=function(){var e=(0,r.Z)(c().mark((function e(t){var n,i,r,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._root,i=this._view3D,n.background&&n.background.isTexture&&n.background.dispose(),!t){e.next=12;break}return r=new m(i),e.next=7,r.loadHDRTexture(t);case 7:o=e.sent,i.skyboxBlur?n.background=b.Z.createBlurredHDR(i,o):n.background=o,n.environment=o,e.next=14;break;case 12:n.background=null,n.environment=null;case 14:i.renderer.renderSingleFrame();case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.setEnvMap=function(){var e=(0,r.Z)(c().mark((function e(t){var n,i,r,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._view3D,i=this._root,!t){e.next=10;break}return r=new m(n),e.next=6,r.loadHDRTexture(t);case 6:o=e.sent,i.environment=o,e.next=11;break;case 10:i.environment=null;case 11:n.renderer.renderSingleFrame();case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.initTextures=function(){var e=this._view3D,t=e.skybox,n=e.envmap,i=e.background,r=[];if(e.useDefaultEnv&&this.setDefaultEnv(),t||n){var o=t?this.setSkybox(t):this.setEnvMap(n);r.push(o)}return!t&&i&&r.push(this.setBackground(i)),r},t.setDefaultEnv=function(){var e=this._view3D.renderer,t=b.Z.createDefaultEnv(e.threeRenderer);this._root.environment=t},t._removeChildsOf=function(e){for(e.traverse((function(e){if(e.isMesh){var t=e;t.geometry.dispose(),(Array.isArray(t.material)?t.material:[t.material]).forEach((function(e){g.xI.forEach((function(t){e[t]&&e[t].dispose()}))}))}}));e.children.length>0;)e.remove(e.children[0])},(0,o.Z)(e,[{key:"root",get:function(){return this._root}},{key:"shadowPlane",get:function(){return this._shadowPlane}},{key:"userObjects",get:function(){return this._userObjects}},{key:"envObjects",get:function(){return this._envObjects}},{key:"fixedObjects",get:function(){return this._fixedObjects}}]),e}(),O=T,k=n(1354),P=n(1372),S=n(7130),x=function(){function e(e){this._view3D=e,this._threeCamera=new h.cPb,this._maxTanHalfHFov=0,this._baseFov=45,this._baseDistance=0;var t=(0,d.hj)(e.initialZoom)?e.initialZoom:0;this._defaultPose=new S.Z(e.yaw,e.pitch,t),this._currentPose=this._defaultPose.clone(),this._newPose=this._currentPose.clone()}var t=e.prototype;return t.reset=function(e,t,n){void 0===e&&(e=0),void 0===t&&(t=P.Xt);var i=this._view3D,r=i.control,o=i.autoPlayer,a=this._newPose,s=this._currentPose,l=null!=n?n:this._defaultPose;if(e<=0)return a.copy(l),s.copy(l),i.renderer.renderSingleFrame(),r.sync(),Promise.resolve();var c=o.enabled,u=new k.Z(i,s,l);return u.duration=e,u.easing=t,u.enable(),c&&o.disable(),r.add(u),new Promise((function(e){u.onFinished((function(){a.copy(l),s.copy(l),r.remove(u),r.sync(),c&&o.enableAfterDelay(),e()}))}))},t.resize=function(e,t){var n=e.width,i=e.height;void 0===t&&(t=null);var r=this._view3D,o=r.control,a=r.fov,s=r.maintainSize,l=n/i;if(this._threeCamera.aspect=l,a===v.B7)if(s&&null!=t){var c=i/t.height,u=this._currentPose.zoom,h=Math.tan((0,d.c$)((this._baseFov-u)/2));this._baseFov=(0,d.Dc)(2*Math.atan(c*h))+u}else this._applyEffectiveFov(P.xg);else this._baseFov=a;o.zoom.updateRange()},t.fit=function(e,t){var n=this._view3D,i=this._threeCamera,r=n.control,o=this._defaultPose,a=e.bbox,s=n.fov,l=s===v.B7?P.xg:s,c=Array.isArray(t)?(new h.Pa4).fromArray(t):a.getCenter(new h.Pa4),u=t===v.B7?(new h.Pa4).subVectors(a.max,a.min).lengthSq()/4:e.reduceVertices((function(e,t){return Math.max(e,t.distanceToSquared(c))}),0),_=Math.sqrt(u),p=_/Math.sin((0,d.c$)(l/2)),f=e.reduceVertices((function(e,t){var n=(new h.Pa4).subVectors(t,c),i=Math.hypot(n.x,n.z);return Math.max(e,i/(p-Math.abs(n.y)))}),0);if(s===v.B7?(this._maxTanHalfHFov=f,this._applyEffectiveFov(l)):this._maxTanHalfHFov=s,o.pivot=c.clone(),this._baseDistance=p,i.near=.1*(p-_),i.far=10*(p+_),r.zoom.updateRange(),(0,d.hj)(n.initialZoom))o.zoom=n.initialZoom;else{var m=this._baseFov,g=e.bbox,E=n.initialZoom.axis,w=n.initialZoom.ratio,y=(new h.Pa4).subVectors(g.max,g.min),b=y[E],T="y"===E?b/w:b/(w*i.aspect),O="z"!==E?p-y.z/2:p-y.x/2,k=(0,d.Dc)(2*Math.atan(T/(2*O)));o.zoom=m-k}},t.updatePosition=function(){var e=this._view3D,t=e.control,n=this._threeCamera,i=this._currentPose,r=this._newPose,o=this._baseFov,a=this._baseDistance,s=t.zoom.type===v.sO.FOV,l=i.clone();i.yaw=(0,d.zc)(r.yaw,0,360),i.pitch=(0,d.uZ)(r.pitch,P.y2.min,P.y2.max),i.zoom=r.zoom,i.pivot.copy(r.pivot);var c=s?o-i.zoom:o,u=s?a:a-i.zoom,h=(0,d.YC)(u,i.yaw,i.pitch);h.add(i.pivot),n.fov=c,n.position.copy(h),n.lookAt(i.pivot),n.updateProjectionMatrix(),r.copy(i),e.trigger(v.FP.CAMERA_CHANGE,{type:v.FP.CAMERA_CHANGE,target:e,pose:i.clone(),prevPose:l})},t._applyEffectiveFov=function(e){var t=this._threeCamera,n=Math.tan((0,d.c$)(e/2)),i=n*Math.max(1,this._maxTanHalfHFov/n/t.aspect);this._baseFov=(0,d.Dc)(2*Math.atan(i))},(0,o.Z)(e,[{key:"threeCamera",get:function(){return this._threeCamera}},{key:"defaultPose",get:function(){return this._defaultPose}},{key:"currentPose",get:function(){return this._currentPose.clone()}},{key:"newPose",get:function(){return this._newPose}},{key:"yaw",get:function(){return this._currentPose.yaw},set:function(e){this._newPose.yaw=e}},{key:"pitch",get:function(){return this._currentPose.pitch},set:function(e){this._newPose.pitch=e}},{key:"zoom",get:function(){return this._currentPose.zoom},set:function(e){this._newPose.zoom=e}},{key:"distance",get:function(){return this._view3D.control.zoom.type===v.sO.FOV?this._baseDistance:this._baseDistance-this._currentPose.zoom}},{key:"baseDistance",get:function(){return this._baseDistance}},{key:"baseFov",get:function(){return this._baseFov},set:function(e){this._baseFov=e}},{key:"pivot",get:function(){return this._currentPose.pivot},set:function(e){this._newPose.pivot.copy(e)}},{key:"fov",get:function(){return this._threeCamera.fov}},{key:"renderWidth",get:function(){return this.renderHeight*this._threeCamera.aspect}},{key:"renderHeight",get:function(){return 2*this.distance*Math.tan((0,d.c$)(this._threeCamera.getEffectiveFOV()/2))}}]),e}(),C=function(){function e(e){var t,n=this;this._onResize=function(){n._view3d.resize()},this._skipFirstResize=(t=!0,function(){t?t=!1:n._onResize()}),this._view3d=e,this._enabled=!1,this._resizeObserver=null}var t=e.prototype;return t.enable=function(){var e=this._view3d;if(this._enabled&&this.disable(),e.useResizeObserver&&window.ResizeObserver){var t=e.renderer.canvas,n=t.getBoundingClientRect(),i=0!==n.width||0!==n.height,r=new ResizeObserver(i?this._skipFirstResize:this._onResize);r.observe(t),this._resizeObserver=r}else e.resize(),window.addEventListener(_.FP.RESIZE,this._onResize);return this._enabled=!0,this},t.disable=function(){if(!this._enabled)return this;var e=this._resizeObserver;return e?(e.disconnect(),this._resizeObserver=null):window.removeEventListener(_.FP.RESIZE,this._onResize),this._enabled=!1,this},(0,o.Z)(e,[{key:"enabled",get:function(){return this._enabled}}]),e}(),N=function(){function e(e){var t=this;this._onAnimationLoop=function(e){var n=t._view3D,i=t._actions,r=t._clips,o=i.findIndex((function(t){return t===e.action}));if(n.trigger(v.FP.ANIMATION_LOOP,{type:v.FP.ANIMATION_LOOP,target:n,index:o,action:e.action,clip:r[o]}),n.animationRepeatMode===v.U3.ALL){var a=o+1>=r.length?0:o+1;t.play(a)}},this._onAnimationFinished=function(e){var n=t._view3D,i=t._actions,r=t._clips,o=i.findIndex((function(t){return t===e.action}));n.trigger(v.FP.ANIMATION_FINISHED,{type:v.FP.ANIMATION_FINISHED,target:n,index:o,action:e.action,clip:r[o]})},this._view3D=e,this._mixer=new h.Xcj(e.scene.userObjects),this._clips=[],this._actions=[],this._activeAnimationIdx=-1,this._timeScale=1,this._fadePromises=[]}var t=e.prototype;return t.init=function(){this._mixer.addEventListener("loop",this._onAnimationLoop),this._mixer.addEventListener("finished",this._onAnimationFinished)},t.destroy=function(){this.reset(),this._mixer.removeEventListener("loop",this._onAnimationLoop),this._mixer.removeEventListener("finished",this._onAnimationFinished)},t.setClips=function(e){var t=this._mixer;this._clips=e,this._actions=e.map((function(e){var n=t.clipAction(e);return n.setEffectiveWeight(0),n})),this.updateRepeatMode()},t.play=function(e){var t=this._view3D,n=this._actions[e];n&&(this.stop(),this._restoreTimeScale(),n.setEffectiveTimeScale(1),n.setEffectiveWeight(1),n.play(),this._activeAnimationIdx=e,this._flushFadePromises(),t.trigger(v.FP.ANIMATION_START,{type:v.FP.ANIMATION_START,target:t,index:e,action:n,clip:this._clips[e]}))},t.crossFade=function(){var e=(0,r.Z)(c().mark((function e(t,n,i){var r,o,a,s,l,u,h,d,_,p,f,m,g,E=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(void 0===i?{}:i).synchronize,a=void 0!==o&&o,s=this._view3D,l=this._mixer,u=this._actions,h=this._activeAnimationIdx,d=u[t],_=null!=(r=u[h])?r:d,p="loop",this._restoreTimeScale(),f=function(){d.enabled=!0,d.setEffectiveTimeScale(1),d.setEffectiveWeight(1),d.time=0,d.play(),_.crossFadeTo(d,n/1e3,!0),E._activeAnimationIdx=t},a?(m=function e(t){t.action===_&&(l.removeEventListener(p,e),f())},l.addEventListener(p,m)):f(),this._flushFadePromises(),g=new Promise((function(e){var t=function t(){d.getEffectiveWeight()<1||(s.off(v.FP.BEFORE_RENDER,t),e(!0))};s.on(v.FP.BEFORE_RENDER,t),E._fadePromises.push({listener:t,resolve:e})})),e.abrupt("return",g);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}(),t.fadeOut=function(){var e=(0,r.Z)(c().mark((function e(t){var n,i,r,o,a=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._view3D,i=this._actions,r=i[this._activeAnimationIdx]){e.next=5;break}return e.abrupt("return",!1);case 5:return this._flushFadePromises(),this._restoreTimeScale(),r.fadeOut(t/1e3),o=new Promise((function(e){var t=function t(){r.getEffectiveWeight()>0||(n.off(v.FP.BEFORE_RENDER,t),a._activeAnimationIdx=-1,e(!0))};n.on(v.FP.BEFORE_RENDER,t),a._fadePromises.push({listener:t,resolve:e})})),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.pause=function(){this._mixer.timeScale=0},t.resume=function(){this._restoreTimeScale()},t.stop=function(){this._actions.forEach((function(e){e.stop(),e.setEffectiveWeight(0)})),this._view3D.renderer.renderSingleFrame(),this._activeAnimationIdx=-1,this._flushFadePromises()},t.update=function(e){this._mixer.update(e)},t.updateRepeatMode=function(){var e=this._view3D,t=this._actions;e.animationRepeatMode===v.U3.NONE?t.forEach((function(e){e.clampWhenFinished=!0,e.loop=h.jAl})):t.forEach((function(e){e.clampWhenFinished=!1,e.loop=h.YKA}))},t.reset=function(){var e=this._mixer;this.stop(),e.uncacheRoot(e.getRoot()),this._clips=[],this._actions=[]},t._restoreTimeScale=function(){this._mixer.timeScale=this._timeScale},t._flushFadePromises=function(){var e=this._view3D;this._fadePromises.forEach((function(t){var n=t.resolve,i=t.listener;n(!1),e.off(v.FP.BEFORE_RENDER,i)})),this._fadePromises=[]},(0,o.Z)(e,[{key:"clips",get:function(){return this._clips}},{key:"mixer",get:function(){return this._mixer}},{key:"actions",get:function(){return this._actions}},{key:"animationCount",get:function(){return this._clips.length}},{key:"activeAnimation",get:function(){var e;return null!=(e=this._clips[this._activeAnimationIdx])?e:null}},{key:"activeAction",get:function(){var e;return null!=(e=this._actions[this._activeAnimationIdx])?e:null}},{key:"activeAnimationIndex",get:function(){return this._activeAnimationIdx}},{key:"paused",get:function(){return 0===this._mixer.timeScale}},{key:"animating",get:function(){var e;return(null==(e=this.activeAction)?void 0:e.isRunning())&&!this.paused}},{key:"timeScale",get:function(){return this._timeScale},set:function(e){this._timeScale=e}}]),e}(),A=N,D=n(8906),L=n(662),R=function(e){function t(t){var n,i=void 0===t?{}:t,r=i.context,o=void 0===r?window:r,a=i.repeat,s=void 0===a?0:a,l=i.duration,c=void 0===l?P.zn:l,u=i.easing,h=void 0===u?P.Xt:u;return(n=e.call(this)||this)._loop=function(){var e=n._getDeltaTime(),t=n._duration,i=n._repeat,r=n._time+e,o=Math.floor(r/t);n._time=n._loopCount>=i?(0,d.uZ)(r,0,t):(0,d.zc)(r,0,t);var a=n._time/t,s={progress:a,easedProgress:n._easing(a)};n.trigger("progress",s);for(var l=0;l<o;l++){if(n._loopCount++,n._loopCount>i)return n.trigger("finish"),void n.stop();n.trigger("loop",Object.assign({},s,{loopIndex:n._loopCount}))}n._rafId=n._ctx.requestAnimationFrame(n._loop)},n._repeat=s,n._duration=c,n._easing=h,n._ctx=o,n._rafId=-1,n._time=0,n._clock=0,n._loopCount=0,n}(0,s.Z)(t,e);var n=t.prototype;return n.start=function(){this._rafId>=0||(this._updateClock(),this._loop())},n.stop=function(){this._rafId<0||(this._time=0,this._loopCount=0,this._stopLoop())},n.pause=function(){this._rafId<0||this._stopLoop()},n._stopLoop=function(){this._ctx.cancelAnimationFrame(this._rafId),this._rafId=-1},n._getDeltaTime=function(){var e=this._clock;return this._updateClock(),this._clock-e},n._updateClock=function(){this._clock=Date.now()},t}(u.Z),M="immersive-ar",I="local",F="viewer",z="selectstart",Z="selectend",U="estimationstart",B="estimationend",H="generic-touchscreen",j={requiredFeatures:["hit-test"]},V=function(e){return e?{requiredFeatures:["dom-overlay"],domOverlay:{root:e}}:{}},G={optionalFeatures:["light-estimation"]},W={},X=function(e,t){return"intent://arvr.google.com/scene-viewer/1.2?"+e+"#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;"+(t?"S.browser_fallback_url="+t+";":"")+"end;"},Y=function(e,t){return"intent://arvr.google.com/scene-viewer/1.2?"+e+"#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;"+(t?"S.browser_fallback_url="+t+";":"")+"end;"},Q=function(e){return"https://arvr.google.com/scene-viewer?"+e},q=n(2519),K=function(){function e(e){var t=(void 0===e?{}:e).scale,n=void 0===t?1:t;this.rotation=new h._fP,this._axis=new h.Pa4(0,1,0),this._enabled=!1,this._active=!1,this._prevPos=new h.FM8,this._fromQuat=new h._fP,this._toQuat=new h._fP,this._motion=new q.Z({range:P.oK}),this._userScale=n}var t=e.prototype;return t.updateRotation=function(e){this.rotation.copy(e),this._fromQuat.copy(e),this._toQuat.copy(e)},t.enable=function(){this._enabled=!0},t.disable=function(){this._enabled=!1},t.activate=function(){this._enabled&&(this._active=!0)},t.deactivate=function(){this._active=!1},t.updateAxis=function(e){this._axis.copy(e)},t.setInitialPos=function(e){this._prevPos.copy(e[0])},t.process=function(e,t){var n=e.scene,i=e.xrCam,r=t.coords;if(this._active&&1===r.length){var o=this._prevPos,a=this._motion,s=r[0],l=n.modelMovable.getWorldPosition(new h.Pa4),c=(new h.FM8).fromArray(l.project(i).toArray()),u=(0,d.cM)(c,o,s)*this._userScale,_=(new h._fP).setFromAxisAngle(this._axis,u),v=this._getInterpolatedQuaternion();this._fromQuat.copy(v),this._toQuat.premultiply(_),a.reset(0),a.setEndDelta(1),o.copy(s)}},t.update=function(e,t){var n=e.scene;if(this._active){this._motion.update(t);var i=this._getInterpolatedQuaternion();this.rotation.copy(i),n.setModelRotation(i)}},t._getInterpolatedQuaternion=function(){var e=this._motion,t=this._toQuat,n=this._fromQuat,i=e.val;return(new h._fP).copy(n).slerp(t,i)},(0,o.Z)(e,[{key:"enabled",get:function(){return this._enabled}},{key:"scale",get:function(){return this._userScale},set:function(e){this._userScale=e}}]),e}();!function(e){e[e.WAITING=0]="WAITING",e[e.TRANSLATING=1]="TRANSLATING",e[e.BOUNCING=2]="BOUNCING"}(i||(i={}));var J,$=function(){function e(e){var t=void 0===e?{}:e,n=t.hoverHeight,r=void 0===n?.1:n,o=t.bounceDuration,a=void 0===o?1e3:o,s=t.bounceEasing,l=void 0===s?v.Xt.EASE_OUT_BOUNCE:s;this._hoverPosition=new h.Pa4,this._floorPosition=new h.Pa4,this._wallRotation=new h._fP,this._dragPlane=new h.JOQ,this._enabled=!1,this._vertical=!1,this._state=i.WAITING,this._initialPos=new h.FM8,this._hoverHeight=r,this._bounceMotion=new q.Z({duration:a,easing:l,range:P.oK})}var t=e.prototype;return t.enable=function(){this._enabled=!0},t.disable=function(){this.deactivate(),this._enabled=!1},t.activate=function(){this._enabled&&(this._dragPlane.constant=this._calcDragPlaneConstant(this._floorPosition),this._state=i.TRANSLATING)},t.deactivate=function(){if(this._enabled&&!this._vertical&&this._state!==i.WAITING){this._state=i.BOUNCING;var e=this._floorPosition,t=this._hoverPosition,n=this._bounceMotion,r=t.y-e.y;n.reset(r),n.setEndDelta(-r)}else this._state=i.WAITING},t.init=function(e,t,n){this._floorPosition.copy(e),this._hoverPosition.copy(e);var i=n?new h.Pa4(0,1,0).applyQuaternion(t):new h.Pa4(0,1,0);this._dragPlane.normal.copy(i),this._wallRotation.copy(t),this._vertical=n},t.setInitialPos=function(e){this._initialPos.copy(e[0])},t.process=function(e,t){var n=e.frame,r=e.referenceSpace,o=e.xrCam,a=t.hitResults,s=this._state,l=s===i.WAITING||s===i.BOUNCING;if(a&&1===a.length&&!l){var c=a[0],u=this._floorPosition.clone(),d=this._floorPosition,_=this._hoverPosition,v=this._hoverHeight,p=this._dragPlane,f=this._vertical,m=c.results[0]&&c.results[0].getPose(r),g=m&&(new h.yGw).fromArray(m.transform.matrix),E=m&&g.elements[5]>.75,w=m&&g.elements[5]<.25,y=(new h.Pa4).setFromMatrixPosition(o.matrixWorld),b=m&&(new h.Pa4).setFromMatrixPosition(g);if(f){if(n&&(!m||!w)){var T=n.getPose(c.inputSource.targetRaySpace,r);if(!T)return;var O=T.transform.position,k=new h.Pa4(O.x,O.y,O.z).sub(y).normalize(),P=new h.zHn(y,k).intersectPlane(p,new h.Pa4);return void(P&&d.copy(P))}var S=new h.Pa4(0,1,0),x=m.transform.orientation,C=S.clone().applyQuaternion(new h._fP(x.x,x.y,x.z,x.w)).normalize(),N=(new h.Pa4).crossVectors(new h.Pa4(0,1,0),C),A=new h.Pa4(0,1,0).applyQuaternion(this._wallRotation).normalize();if(Math.acos(Math.abs(A.dot(C)))>=Math.PI/18){var D=(new h.yGw).makeBasis(N,S,C),L=new h.USm(0,0,0,"YXZ").setFromRotationMatrix(D);L.z=0,L.x=Math.PI/2,this._wallRotation.setFromEuler(L),p.normal.copy(new h.Pa4(0,1,0).applyQuaternion(this._wallRotation)),p.constant=this._calcDragPlaneConstant(b)}var R=(new h.Pa4).subVectors(b,y).normalize(),M=new h.zHn(y,R).intersectPlane(p,new h.Pa4);if(!M)return;d.copy(M)}else{if(n&&(!m||!E)){var I=n.getPose(c.inputSource.targetRaySpace,r);if(!I)return;var F=I.transform.position,z=new h.Pa4(F.x,F.y,F.z).sub(y).normalize(),Z=new h.zHn(y,z).intersectPlane(p,new h.Pa4);return void(Z&&(d.copy(Z),d.setY(u.y),_.copy(Z)))}var U=-p.constant,B=b.y+v;B-U>.1&&(p.constant=-B);var H=(new h.Pa4).subVectors(b,y).normalize(),j=new h.zHn(y,H).intersectPlane(p,new h.Pa4);if(!j)return;d.copy(j),d.setY(b.y),_.copy(j)}}},t.update=function(e,t){var n=e.scene,r=this._state,o=this._floorPosition,a=this._hoverPosition,s=this._bounceMotion,l=this._vertical;r===i.BOUNCING&&(s.update(t),a.setY(o.y+s.val),s.progress>=1&&(this._state=i.WAITING)),n.setRootPosition(o),l?n.setWallRotation(this._wallRotation):n.setModelHovering(a.y-o.y)},t._calcDragPlaneConstant=function(e){var t=this._vertical,n=this._dragPlane.normal.clone(),i=new h.JOQ(n,0),r=t?0:this._hoverHeight;return-(i.distanceToPoint(e)+r)},(0,o.Z)(e,[{key:"enabled",get:function(){return this._enabled}},{key:"floorPosition",get:function(){return this._floorPosition.clone()}},{key:"hoverHeight",get:function(){return this._hoverHeight},set:function(e){this._hoverHeight=e}}]),e}(),ee=function(){function e(e){var t=void 0===e?{}:e,n=t.width,i=void 0===n?.1:n,r=t.padding,o=void 0===r?20:r,a=t.offset,s=void 0===a?.05:a,l=t.font,c=void 0===l?"64px sans-serif":l,u=t.color,_=void 0===u?"white":u,v=document.createElement("canvas"),p=v.getContext("2d");p.font=c;var f=p.measureText("100%"),m=f.actualBoundingBoxLeft+f.actualBoundingBoxRight,g=f.actualBoundingBoxAscent+f.actualBoundingBoxDescent,E=(0,d.hl)(m);v.width=E,v.height=E;var w=i*(E/m);this._ctx=p,this._canvas=v,this._height=w*g/m,this._texture=new h.ROQ(v);var y=new h._12(w,w),b=new h.Kj0(y,new h.vBJ({map:this._texture,transparent:!0,depthTest:!1}));this._mesh=b,this._font=c,this._color=_,this._padding=o,this._offset=s,this.hide()}var t=e.prototype;return t.updatePosition=function(e,t,n){var i=this._mesh,r=this._height/2+this._offset+n,o=new h.Pa4(0,r,0).applyQuaternion(e.clone().invert());i.position.copy(o),i.lookAt(t)},t.updateScale=function(e){var t=this._ctx,n=this._canvas,i=this._padding,r=(100*e).toFixed(0);t.clearRect(0,0,n.width,n.height);var o=n.width/2,a=n.height/2,s=t.measureText(r+"%"),l=(s.actualBoundingBoxLeft+s.actualBoundingBoxRight)/2,c=(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)/2;t.beginPath(),t.moveTo(o-l,a-c-i),t.lineTo(o+l,a-c-i),t.quadraticCurveTo(o+l+i,a-c-i,o+l+i,a-c),t.lineTo(o+l+i,a+c),t.quadraticCurveTo(o+l+i,a+c+i,o+l,a+c+i),t.lineTo(o-l,a+c+i),t.quadraticCurveTo(o-l-i,a+c+i,o-l-i,a+c),t.lineTo(o-l-i,a-c),t.quadraticCurveTo(o-l-i,a-c-i,o-l,a-c-i),t.closePath(),t.lineWidth=5,t.fillStyle="rgba(0, 0, 0, 0.3)",t.fill(),t.stroke(),t.font=this._font,t.textAlign="center",t.textBaseline="middle",t.strokeStyle=this._color,t.fillStyle=this._color,t.fillText(r+"%",o,a),this._texture.needsUpdate=!0,this._mesh.scale.setScalar(1/e)},t.show=function(){this._mesh.visible=!0},t.hide=function(){this._mesh.visible=!1},(0,o.Z)(e,[{key:"mesh",get:function(){return this._mesh}},{key:"height",get:function(){return this._height}},{key:"visible",get:function(){return this._mesh.visible}}]),e}(),te=function(){function e(e){var t=void 0===e?{}:e,n=t.min,i=void 0===n?.05:n,r=t.max,o=void 0===r?5:r;this._enabled=!1,this._active=!1,this._prevCoordDistance=-1,this._scaleMultiplier=1,this._ui=new ee,this._motion=new q.Z({duration:0,range:{min:i,max:o}}),this._motion.reset(1),this._ui=new ee}var t=e.prototype;return t.setInitialScale=function(e){var t=e.scene,n=e.model,i=e.floorPosition,r=e.xrCam,o=e.initialScale,a=this._motion,s=a.range;if(o===v.B7){var l=2*Math.atan(1/r.projectionMatrix.elements[5]),c=r.projectionMatrix.elements[0]/r.projectionMatrix.elements[5],u=r.position,_=n.bbox.max.y-n.bbox.min.y,p=u.distanceTo((new h.Pa4).addVectors(i,new h.Pa4(0,_/2,0)))*Math.tan(l/2),f=p*c,m=n.bbox.getBoundingSphere(new h.aLr),g=p/m.radius,E=f/m.radius,w=(0,d.uZ)(Math.min(E,g),s.min,1);a.reset(w)}else a.reset((0,d.uZ)(o,s.min,s.max));var y=this._motion.val;this._scaleMultiplier=y,t.setModelScale(y)},t.setInitialPos=function(e){this._prevCoordDistance=(new h.FM8).subVectors(e[0],e[1]).length()},t.enable=function(){this._enabled=!0},t.disable=function(){this._enabled=!1,this.deactivate()},t.activate=function(e){this._active=!0,this._ui.show(),this._updateUIPosition(e)},t.deactivate=function(){this._active=!1,this._ui.hide(),this._prevCoordDistance=-1},t.process=function(e,t){var n=t.coords;if(2===n.length&&this._enabled&&this._active){var i=this._motion,r=(new h.FM8).subVectors(n[0],n[1]).length(),o=r-this._prevCoordDistance;i.setEndDelta(o),this._prevCoordDistance=r,this._updateUIPosition(e)}},t.update=function(e,t){var n=e.scene;if(this._enabled&&this._active){var i=this._motion;i.update(t),this._scaleMultiplier=i.val,this._ui.updateScale(this._scaleMultiplier),n.setModelScale(this._scaleMultiplier)}},t._updateUIPosition=function(e){var t=e.view3D,n=e.scene,i=e.xrCam,r=e.vertical,o=t.model,a=(new h.Pa4).setFromMatrixPosition(i.matrixWorld),s=r?o.bbox.getBoundingSphere(new h.aLr).radius:o.bbox.max.y-o.bbox.min.y;this._ui.updatePosition(n.root.quaternion,a,s)},(0,o.Z)(e,[{key:"enabled",get:function(){return this._enabled}},{key:"scale",get:function(){return this._scaleMultiplier}},{key:"ui",get:function(){return this._ui}},{key:"range",get:function(){return this._motion.range}}]),e}(),ne=function(){function e(e){var t=void 0===e?{}:e,n=t.ringOpacity,i=void 0===n?.3:n,r=t.dirIndicatorOpacity,o=void 0===r?1:r,a=t.fadeoutDuration,s=void 0===a?1e3:a,l=Math.PI/18,c=new h.o8S(.975,1,150,1,-6*l,30*l);c.rotateX(-Math.PI/2);for(var u=new h.o8S(.96,1.015,30,1,25*l,4*l),d=u.attributes.position,_=Math.floor(11*d.count/16),v=Math.floor(13*d.count/16),p=Math.floor((v-_+1)/2),f=(new h.Pa4).fromBufferAttribute(d,_).y,m=_;m<v;m++){var g=m-_,E=.025*(p-Math.abs(g-p));d.setY(m,f-E)}u.rotateX(-Math.PI/2);var w=new h.vBJ({transparent:!0,opacity:i,color:16777215}),y=new h.vBJ({transparent:!0,opacity:o,color:16777215}),b=new h.Kj0(c,w),T=new h.Kj0(u,y),O=new h.ZAu;O.add(b,T),O.position.setY(1e-4),this._mesh=O,this._ring=b,this._arrow=T,this._animator=new q.Z({duration:s}),this._opacityRange={min:i,max:o},this.hide()}var t=e.prototype;return t.updateSize=function(e){this._mesh.scale.setScalar(e.bbox.getBoundingSphere(new h.aLr).radius)},t.update=function(e){var t=e.delta,n=e.rotation,i=this._mesh,r=this._animator;if(i.visible){r.update(t);var o=this._ring.material,a=this._arrow.material,s=this._opacityRange;o.opacity=r.val*s.min,a.opacity=r.val*s.max,r.val<=0&&(i.visible=!1),i.quaternion.copy(n),i.updateMatrix()}},t.show=function(){this._mesh.visible=!0,this._animator.reset(1)},t.hide=function(){this._mesh.visible=!1},t.fadeout=function(){this._animator.setEndDelta(-1)},(0,o.Z)(e,[{key:"mesh",get:function(){return this._mesh}}]),e}();!function(e){e[e.WAITING=0]="WAITING",e[e.IN_DEADZONE=1]="IN_DEADZONE",e[e.OUT_OF_DEADZONE=2]="OUT_OF_DEADZONE"}(J||(J={}));var ie=function(){function e(e){var t=(void 0===e?{}:e).size,n=void 0===t?.1:t;this._state=J.WAITING,this._detectedGesture=g.u1.NONE,this._testingGestures=g.u1.NONE,this._lastFingerCount=0,this._aspect=1,this._prevOneFingerPos=new h.FM8,this._prevTwoFingerPos=new h.FM8,this._initialTwoFingerDistance=0,this._prevOneFingerPosInitialized=!1,this._prevTwoFingerPosInitialized=!1,this._size=n}var t=e.prototype;return t.setAspect=function(e){this._aspect=e},t.setFirstInput=function(e){var t=e.length;1!==t||this._prevOneFingerPosInitialized?2!==t||this._prevTwoFingerPosInitialized||(this._prevTwoFingerPos.copy((new h.FM8).addVectors(e[0],e[1]).multiplyScalar(.5)),this._initialTwoFingerDistance=(new h.FM8).subVectors(e[0],e[1]).length(),this._prevTwoFingerPosInitialized=!0):(this._prevOneFingerPos.copy(e[0]),this._prevOneFingerPosInitialized=!0),this._lastFingerCount=t,this._state=J.IN_DEADZONE},t.addTestingGestures=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._testingGestures=this._testingGestures|t.reduce((function(e,t){return e|t}),g.u1.NONE)},t.cleanup=function(){this._testingGestures=g.u1.NONE,this._lastFingerCount=0,this._prevOneFingerPosInitialized=!1,this._prevTwoFingerPosInitialized=!1,this._initialTwoFingerDistance=0,this._detectedGesture=g.u1.NONE,this._state=J.WAITING},t.applyScreenAspect=function(e){var t=this._aspect;e.forEach((function(e){t>1?e.setY(e.y*t):e.setX(e.x/t)}))},t.check=function(e){var t=this._state,n=this._size,i=this._testingGestures,r=this._lastFingerCount,o=e.length;if(t===J.OUT_OF_DEADZONE)return this._detectedGesture;if(this._lastFingerCount=o,this.applyScreenAspect(e),o!==r)return this.setFirstInput(e),g.u1.NONE;if(1===o){var a=e[0],s=this._prevOneFingerPos.clone(),l=(new h.FM8).subVectors(a,s);l.length()>n&&(Math.abs(l.x)>Math.abs(l.y)?g.u1.ONE_FINGER_HORIZONTAL&i&&(this._detectedGesture=g.u1.ONE_FINGER_HORIZONTAL):g.u1.ONE_FINGER_VERTICAL&i&&(this._detectedGesture=g.u1.ONE_FINGER_VERTICAL))}else if(2===o){var c=(new h.FM8).addVectors(e[1],e[0]).multiplyScalar(.5),u=this._prevTwoFingerPos.clone(),d=(new h.FM8).subVectors(c,u);d.length()>n&&(Math.abs(d.x)>Math.abs(d.y)?g.u1.TWO_FINGER_HORIZONTAL&i&&(this._detectedGesture=g.u1.TWO_FINGER_HORIZONTAL):g.u1.TWO_FINGER_VERTICAL&i&&(this._detectedGesture=g.u1.TWO_FINGER_VERTICAL));var _=(new h.FM8).subVectors(e[1],e[0]).length();Math.abs(_-this._initialTwoFingerDistance)>n&&g.u1.PINCH&i&&(this._detectedGesture=g.u1.PINCH)}return this._detectedGesture!==g.u1.NONE&&(this._state=J.OUT_OF_DEADZONE),this._detectedGesture},(0,o.Z)(e,[{key:"size",get:function(){return this._size},set:function(e){this._size=e}},{key:"inDeadzone",get:function(){return this._state===J.IN_DEADZONE}}]),e}(),re=ie,oe=function(){function e(e,t,n){var i=this,r=n.rotate,o=n.translate,a=n.scale,s=n.ring,l=n.deadzone,c=n.initialScale;this._onSelectStart=function(e){var t=e.frame,n=i._view3D,r=i._arScene,o=i._hitTestSource,a=i._deadzoneChecker,s=i._rotateControl,l=i._translateControl,c=i._scaleControl,u=n.renderer.threeRenderer,d=u.xr.getCamera(new h.cPb),_=u.xr.getReferenceSpace();if(o&&!(d.cameras.length<=0)){var v=d.cameras[0],p=n.model;s.enabled&&a.addTestingGestures(g.u1.ONE_FINGER),l.enabled&&a.addTestingGestures(g.u1.ONE_FINGER),c.enabled&&a.addTestingGestures(g.u1.PINCH);var f=t.getHitTestResultsForTransientInput(o),m=i._hitResultToVector(f);if(a.applyScreenAspect(m),a.setFirstInput(m),1===m.length){var E=t.getPose(f[0].inputSource.targetRaySpace,_);if(E){var w=(new h.Pa4).setFromMatrixPosition(v.matrixWorld),y=E.transform.position,b=new h.Pa4(y.x,y.y,y.z).sub(w).normalize(),T=new h.zHn(w,b),O=p.bbox.getBoundingSphere(new h.aLr);O.applyMatrix4(r.modelMovable.matrixWorld),T.intersectSphere(O,new h.Pa4)&&(i._modelHit=!0)}}i._vertical&&!i._modelHit||i._floorIndicator.show()}},this._onSelectEnd=function(){i._deactivate(),i._floorIndicator.fadeout()},this._view3D=e,this._arScene=t,this._vertical=!1,this._initialized=!1,this._modelHit=!1,this._hitTestSource=null,this._rotate=r,this._translate=o,this._scale=a,this._initialScale=c,this._rotateControl=new K((0,d.PO)(r)),this._translateControl=new $((0,d.PO)(o)),this._scaleControl=new te((0,d.PO)(a)),this._floorIndicator=new ne(s),this._deadzoneChecker=new re(l)}var t=e.prototype;return t.init=function(){var e=(0,r.Z)(c().mark((function e(t){var n,i,r,o,a,s,l,u,h,d,_,v;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.model,i=t.session,r=t.size,o=t.vertical,a=t.hitPosition,s=t.hitRotation,l=this._arScene,u=this._translateControl,h=this._scaleControl,d=this._floorIndicator,_=this._deadzoneChecker,this._vertical=o,u.init(a,s,o),_.setAspect(r.height/r.width),l.add(d.mesh,h.ui.mesh),this.syncTargetModel(n),e.next=13,i.requestHitTestSourceForTransientInput({profile:H});case 13:v=e.sent,this._hitTestSource=v,this._initialized=!0;case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.destroy=function(e){this._initialized&&(this._hitTestSource&&(this._hitTestSource.cancel(),this._hitTestSource=null),this.disable(e),this._floorIndicator.hide(),this._scaleControl.ui.hide(),e.removeEventListener(z,this._onSelectStart),e.removeEventListener(Z,this._onSelectEnd),this._initialized=!1)},t.enable=function(e){var t=this._rotate,n=this._translate,i=this._scale,r=this._rotateControl,o=this._translateControl,a=this._scaleControl,s=this._vertical;e.addEventListener(z,this._onSelectStart),e.addEventListener(Z,this._onSelectEnd),t&&!s&&r.enable(),n&&o.enable(),i&&a.enable()},t.disable=function(e){var t=this._rotateControl,n=this._translateControl,i=this._scaleControl;e.removeEventListener(z,this._onSelectStart),e.removeEventListener(Z,this._onSelectEnd),this._deactivate(),t.disable(),n.disable(),i.disable()},t.update=function(e){var t,n=e.view3D,i=e.session,r=e.frame,o=this._hitTestSource;if(o&&n.model){var a=this._deadzoneChecker,s=i.inputSources,l=null!=(t=null==r?void 0:r.getHitTestResultsForTransientInput(o))?t:[],c={coords:this._hitResultToVector(l),inputSources:s,hitResults:l};a.inDeadzone?this._checkDeadzone(e,c):this._processInput(e,c),this._updateControls(e)}},t.syncTargetModel=function(e){var t=this._initialScale,n=this._translateControl.floorPosition,i=this._view3D.renderer.threeRenderer.xr.getCamera(new h.cPb).cameras[0];this._floorIndicator.updateSize(e),this._scaleControl.setInitialScale({scene:this._arScene,model:e,floorPosition:n,xrCam:i,initialScale:t})},t._deactivate=function(){this._modelHit=!1,this._deadzoneChecker.cleanup(),this._rotateControl.deactivate(),this._translateControl.deactivate(),this._scaleControl.deactivate()},t._checkDeadzone=function(e,t){var n=t.coords,i=this._arScene,r=this._rotateControl,o=this._translateControl,a=this._scaleControl,s=this._deadzoneChecker.check(n.map((function(e){return e.clone()})));if(s!==g.u1.NONE)switch(s){case g.u1.ONE_FINGER_HORIZONTAL:case g.u1.ONE_FINGER_VERTICAL:this._modelHit?(o.activate(),o.setInitialPos(n)):(r.activate(),r.updateRotation(i.modelMovable.quaternion),r.setInitialPos(n));break;case g.u1.PINCH:a.activate(e),a.setInitialPos(n)}},t._processInput=function(e,t){this._rotateControl.process(e,t),this._translateControl.process(e,t),this._scaleControl.process(e,t)},t._updateControls=function(e){var t=e.delta,n=this._arScene,i=this._rotateControl,r=this._translateControl,o=this._scaleControl,a=this._floorIndicator,s=1e3*t;i.update(e,s),r.update(e,s),o.update(e,s);var l=i.rotation,c=r.floorPosition;n.setRootPosition(c),a.update({delta:s,rotation:l})},t._hitResultToVector=function(e){return e.map((function(e){return(new h.FM8).set(e.inputSource.gamepad.axes[0],-e.inputSource.gamepad.axes[1])}))},(0,o.Z)(e,[{key:"rotate",get:function(){return this._rotateControl}},{key:"translate",get:function(){return this._translateControl}},{key:"scale",get:function(){return this._scaleControl}}]),e}(),ae=oe,se=function(){function e(){this._root=new h.xsS,this._modelRoot=new h.ZAu,this._modelMovable=new h.ZAu,this._modelFixed=new h.ZAu,this._arRoot=new h.ZAu;var e=this._root,t=this._modelRoot,n=this._modelMovable,i=this._modelFixed,r=this._arRoot;t.add(n),e.add(t,i,r)}var t=e.prototype;return t.init=function(e){var t=this._root,n=this._modelMovable,i=this._modelFixed,r=e.scene;n.add(r.userObjects,r.envObjects),i.add(r.fixedObjects),t.environment=r.root.environment,this.hideModel()},t.destroy=function(e){var t=this._modelMovable,n=this._modelFixed,i=e.scene;[].concat(t.children,n.children).forEach((function(e){i.root.add(e)}))},t.showModel=function(){this._modelRoot.visible=!0},t.hideModel=function(){this._modelRoot.visible=!1},t.add=function(){var e;(e=this._arRoot).add.apply(e,arguments)},t.remove=function(){var e;(e=this._arRoot).remove.apply(e,arguments)},t.setRootPosition=function(e){this._root.position.copy(e)},t.setWallRotation=function(e){this._root.quaternion.copy(e)},t.updateModelRootPosition=function(e,t){var n=this._modelRoot;if(t){var i=e.bbox.max.y-e.bbox.min.y;n.position.setZ(i/2),n.position.setY(-e.bbox.min.z),n.rotateX(-Math.PI/2),n.updateMatrix()}},t.setModelHovering=function(e){this._modelMovable.position.setY(e)},t.setModelRotation=function(e){this._modelMovable.quaternion.copy(e)},t.setModelScale=function(e){this._root.scale.setScalar(e)},(0,o.Z)(e,[{key:"root",get:function(){return this._root}},{key:"modelRoot",get:function(){return this._modelRoot}},{key:"modelMovable",get:function(){return this._modelMovable}},{key:"arRoot",get:function(){return this._arRoot}}]),e}(),le=se,ce=function(){function e(){this._root=null}e.isAvailable=function(){return null!=window.XRDOMOverlayState};var t=e.prototype;return t.destroy=function(){this._root=null},t.getFeatures=function(e){return this._root=e,V(e)},(0,o.Z)(e,[{key:"root",get:function(){return this._root}}]),e}(),ue=function(){function e(){this._source=null}e.isAvailable=function(){return window.XRSession&&window.XRSession.prototype.requestHitTestSource};var t=e.prototype;return t.destroy=function(){this._source&&(this._source.cancel(),this._source=null)},t.init=function(e){var t=this;e.requestReferenceSpace(F).then((function(n){e.requestHitTestSource({space:n}).then((function(e){t._source=e}))}))},t.getFeatures=function(){return j},t.getResults=function(e){var t;return null!=(t=null==e?void 0:e.getHitTestResults(this._source))?t:[]},(0,o.Z)(e,[{key:"ready",get:function(){return null!=this._source}}]),e}(),he=n(6874),de=function(){function e(e,t){var n=this;this._onEstimationStart=function(){var e=n._light,t=n._arScene;e&&(t.add(e),e.environment&&(t.root.environment=e.environment))},this._onEstimationEnd=function(){var e=n._light,t=n._arScene;e&&(t.remove(e),t.root.environment=n._origEnvironment)},this._view3D=e,this._arScene=t,this._light=null,this._origEnvironment=null}e.isAvailable=function(){return!0};var t=e.prototype;return t.getFeatures=function(){return G},t.init=function(){var e=this._view3D.renderer.threeRenderer,t=new he.K(e);this._light=t,t.addEventListener(U,this._onEstimationStart),t.addEventListener(B,this._onEstimationEnd)},t.destroy=function(){var e=this._light;e&&(e.removeEventListener(U,this._onEstimationStart),e.removeEventListener(B,this._onEstimationEnd),this._light=null)},e}(),_e=function(){function e(e,t){var n=void 0===t?{}:t,i=n.features,r=void 0===i?W:i,o=n.vertical,a=void 0!==o&&o,s=n.overlayRoot,l=void 0===s?null:s,c=n.useLightEstimation,u=void 0===c||c,h=n.rotate,d=void 0===h||h,_=n.translate,p=void 0===_||_,f=n.scale,m=void 0===f||f,g=n.ring,E=void 0===g?{}:g,w=n.deadzone,y=void 0===w?{}:w,b=n.initialScale,T=void 0===b?v.B7:b;this._view3D=e,this._modelPlaced=!1,this.features=r,this.vertical=a,this.overlayRoot=l,this.useLightEstimation=u,this._arScene=new le,this._control=new ae(e,this._arScene,{rotate:d,translate:p,scale:m,ring:E,deadzone:y,initialScale:T}),this._hitTest=new ue,this._domOverlay=new ce,this._lightEstimation=new de(e,this._arScene)}e.isAvailable=function(){return navigator.xr&&navigator.xr.isSessionSupported&&ue.isAvailable()&&ce.isAvailable()?navigator.xr.isSessionSupported(M):Promise.resolve(!1)};var t=e.prototype;return t.enter=function(){var e=(0,r.Z)(c().mark((function e(){var t,n,i,o,a,s,l,u,d,_,p,f,m,g,E,w,y=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._view3D,n=t.scene,i=this._arScene,o=t.renderer,a=o.threeRenderer,s=this._control,l=this._hitTest,u=this._domOverlay,d=this.useLightEstimation,_=this._lightEstimation,p=this.vertical,f=this._getAllXRFeatures(),a.xr.enabled=!0,d&&_.init(),e.next=16,navigator.xr.requestSession(M,f);case 16:return m=e.sent,g=a.getPixelRatio(),a.setPixelRatio(1),a.xr.setReferenceSpaceType(I),e.next=22,a.xr.setSession(m);case 22:i.init(t),l.init(m),E=function(){var e=(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.destroy(m),i.destroy(t),_.destroy(),u.destroy(),a.setPixelRatio(g),o.stopAnimationLoop(),o.setAnimationLoop(o.defaultRenderLoop),t.trigger(v.FP.AR_END,{target:t,type:v.FP.AR_END,session:y});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m.addEventListener("end",E,{once:!0}),(w=new h.SUY).start(),o.stopAnimationLoop(),a.xr.setAnimationLoop((function(e,r){var o,l,c=a.xr.getCamera(new h.cPb),u=w.getDelta();if(!(c.cameras.length<=0)){var d=c.cameras[0],_=a.xr.getReferenceSpace(),f=m.renderState.baseLayer,g={width:null!=(o=null==f?void 0:f.framebufferWidth)?o:1,height:null!=(l=null==f?void 0:f.framebufferHeight)?l:1},E={view3D:t,scene:i,session:m,delta:u,frame:r,vertical:p,referenceSpace:_,xrCam:d,size:g},b=1e3*u;t.trigger(v.FP.BEFORE_RENDER,{type:v.FP.BEFORE_RENDER,target:t,delta:b}),y._modelPlaced?(s.update(E),t.animator.update(u),n.shadowPlane.render(),a.render(i.root,d)):y._initModelPosition(E),t.trigger(v.FP.RENDER,{type:v.FP.RENDER,target:t,delta:b})}})),t.trigger(v.FP.AR_START,{type:v.FP.AR_START,target:t,session:this});case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.exit=function(){var e=(0,r.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._view3D.renderer.threeRenderer.xr.getSession(),e.abrupt("return",null==t?void 0:t.end());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t._getAllXRFeatures=function(){var e,t=this.features,n=null!=(e=(0,d.S3)(this.overlayRoot))?e:this._createARRootElement();return(0,d.TS)({},this._domOverlay.getFeatures(n),this._hitTest.getFeatures(),this._lightEstimation.getFeatures(),t)},t._initModelPosition=function(e){var t=e.frame,n=e.session,i=e.size,r=e.vertical,o=e.referenceSpace,a=this._view3D,s=a.model,l=this._arScene,c=this._hitTest;if(c.ready&&s){var u=this._control,d=c.getResults(t);if(!(d.length<=0)){var _=d[0].getPose(o);if(_){var p=(new h.yGw).fromArray(_.transform.matrix);if(!(!r&&p.elements[5]<.75||r&&(p.elements[5]>=.25||p.elements[5]<=-.25))){var f=(new h.Pa4).setFromMatrixPosition(p),m=new h._fP;if(r){var g=new h.Pa4(0,1,0),E=_.transform.orientation,w=g.clone().applyQuaternion(new h._fP(E.x,E.y,E.z,E.w)).normalize(),y=(new h.Pa4).crossVectors(new h.Pa4(0,1,0),w),b=(new h.yGw).makeBasis(y,g,w),T=new h.USm(0,0,0,"YXZ").setFromRotationMatrix(b);T.z=0,T.x=Math.PI/2,m.setFromEuler(T),l.setWallRotation(m)}l.updateModelRootPosition(s,r),l.setRootPosition(f),l.showModel(),c.destroy(),this._modelPlaced=!0,a.trigger(v.FP.AR_MODEL_PLACED,{type:v.FP.AR_MODEL_PLACED,target:a,session:this,model:s}),u.init({model:s,vertical:r,session:n,size:i,hitPosition:f,hitRotation:m});var O=u.scale.scale,k=new R({context:n,duration:1e3});k.on("progress",(function(e){l.setModelScale(e.easedProgress*O)})),k.on("finish",(function(){l.setModelScale(O),u.enable(n)})),k.start()}}}}},t._createARRootElement=function(){var e=this._view3D,t=document.createElement(_.yy);return t.classList.add(P.es),e.rootEl.appendChild(t),e.once(v.FP.AR_END,(function(){e.rootEl.removeChild(t)})),t},(0,o.Z)(e,[{key:"control",get:function(){return this._control}},{key:"arScene",get:function(){return this._arScene}},{key:"hitTest",get:function(){return this._hitTest}},{key:"domOverlay",get:function(){return this._domOverlay}},{key:"lightEstimation",get:function(){return this._lightEstimation}}]),e}();_e.type=v.ok.WEBXR;var ve=_e,pe=n(3366),fe=n(7923),me=["file","mode","fallbackURL","title","link","sound","resizable","vertical","disableOcclusion","initialScale","shareText"],ge=function(){function e(e,t){var n=void 0===t?{}:t,i=n.file,r=void 0===i?null:i,o=n.mode,a=void 0===o?v.Xi.ONLY_AR:o,s=n.fallbackURL,l=void 0===s?null:s,c=n.title,u=void 0===c?null:c,h=n.link,d=void 0===h?null:h,_=n.sound,p=void 0===_?null:_,f=n.resizable,m=void 0===f||f,g=n.vertical,E=void 0!==g&&g,w=n.disableOcclusion,y=void 0!==w&&w,b=n.initialScale,T=void 0===b?v.B7:b,O=n.shareText,k=void 0===O?null:O,P=(0,pe.Z)(n,me);this._view3D=e,this.file=r,this.fallbackURL=l,this.mode=a,this.title=u,this.link=d,this.sound=p,this.resizable=m,this.vertical=E,this.disableOcclusion=y,this.initialScale=T,this.shareText=k,this.otherParams=P}e.isAvailable=function(){return Promise.resolve((0,_.wZ)())};var t=e.prototype;return t.enter=function(){var e=(0,r.Z)(c().mark((function e(){var t,n,i,r,o,a,s,l,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._view3D.model,(i=Object.assign({title:this.title,link:this.link,sound:this.sound,mode:this.mode,initial_scale:this.initialScale},this.otherParams)).resizable=(0,d.Pr)(this.resizable),i.enable_vertical_placement=(0,d.Pr)(this.vertical),i.disable_occlusion=(0,d.Pr)(this.disableOcclusion),i.share_text=this.shareText?encodeURIComponent(this.shareText):null,r=null!=(t=this.file)?t:n.src){e.next=9;break}return e.abrupt("return",Promise.reject(new L.Z(fe.ZP.MESSAGES.FILE_NOT_SUPPORTED(null!=(o=this.file)?o:n.src),fe.ZP.CODES.FILE_NOT_SUPPORTED)));case 9:i.file=new URL(r,window.location.href).href,a=this.fallbackURL,s=Object.keys(i).filter((function(e){return null!=i[e]})).map((function(e){return e+"="+i[e]})).join("&"),l=i.mode===v.Xi.ONLY_AR?X(s,a):Y(s,a||Q(s)),(u=document.createElement("a")).href=l,u.click();case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.exit=function(){return Promise.resolve()},e}();ge.type=v.ok.SCENE_VIEWER;var Ee=ge,we=function(){function e(e,t){var n=void 0===t?{}:t,i=n.allowsContentScaling,r=void 0===i||i,o=n.canonicalWebPageURL,a=void 0===o?null:o,s=n.applePayButtonType,l=void 0===s?null:s,c=n.callToAction,u=void 0===c?null:c,h=n.checkoutTitle,d=void 0===h?null:h,_=n.checkoutSubtitle,v=void 0===_?null:_,p=n.price,f=void 0===p?null:p,m=n.custom,g=void 0===m?null:m,E=n.customHeight,w=void 0===E?null:E;this._view3D=e,this.allowsContentScaling=r,this.canonicalWebPageURL=a,this.applePayButtonType=l,this.callToAction=u,this.checkoutTitle=d,this.checkoutSubtitle=v,this.price=f,this.custom=g,this.customHeight=w}e.isAvailable=function(){return Promise.resolve((e=document.createElement("a")).relList&&e.relList.supports&&e.relList.supports("ar")&&(0,_.cj)());var e};var t=e.prototype;return t.enter=function(){var e=this._view3D,t=e.iosSrc;if(!t)return Promise.reject(new L.Z(fe.ZP.MESSAGES.FILE_NOT_SUPPORTED(""+t),fe.ZP.CODES.FILE_NOT_SUPPORTED));var n=this.canonicalWebPageURL,i=this.custom,r=window.location.href,o=document.createElement("a");o.setAttribute("rel","ar"),o.appendChild(document.createElement("img"));var a=Object.entries({applePayButtonType:this.applePayButtonType,callToAction:this.callToAction,checkoutTitle:this.checkoutTitle,checkoutSubtitle:this.checkoutSubtitle,price:this.price,customHeight:this.customHeight}).reduce((function(e,t){var n=t[0],i=t[1];return i&&(e[n]=i),e}),{}),s=new URL(t,r);return this.allowsContentScaling||(a.allowsContentScaling="0"),n&&(a.canonicalWebPageURL=new URL(n,r).href),i&&(a.custom=new URL(i,r).href),s.hash=new URLSearchParams(a).toString(),o.setAttribute("href",s.href),o.addEventListener("message",(function(t){"_apple_ar_quicklook_button_tapped"===t.data&&e.trigger(v.FP.QUICK_LOOK_TAP,Object.assign({},t,{type:v.FP.QUICK_LOOK_TAP,target:e}))}),!1),o.click(),Promise.resolve()},t.exit=function(){return Promise.resolve()},e}();we.type=v.ok.QUICK_LOOK;var ye,be=we,Te=((ye={})[v.ok.WEBXR]=ve,ye[v.ok.SCENE_VIEWER]=Ee,ye[v.ok.QUICK_LOOK]=be,ye),Oe=function(){function e(e){var t=this;this._view3D=e,this._activeSession=null,e.on(v.FP.AR_START,(function(e){var n=e.session;t._activeSession=n})),e.on(v.FP.AR_END,(function(){t._activeSession=null}))}var t=e.prototype;return t.isAvailable=function(){var e=(0,r.Z)(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getSesssionClasses(),e.next=3,Promise.all(t.map((function(e){return e.isAvailable()})));case 3:return n=e.sent,e.abrupt("return",n.some((function(e){return!0===e})));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.enter=function(){var e=(0,r.Z)(c().mark((function e(){var t,n,i,r,o,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this._view3D).model&&t.initialized){e.next=3;break}throw new L.Z(fe.ZP.MESSAGES.NOT_INITIALIZED,fe.ZP.CODES.NOT_INITIALIZED);case 3:n=this._getSesssionClasses(),i=(0,D.Z)(n);case 5:if((r=i()).done){e.next=21;break}return o=r.value,e.prev=7,e.next=10,o.isAvailable();case 10:if(!e.sent){e.next=15;break}return a=new o(t,(0,d.PO)(t[o.type])),e.next=14,a.enter();case 14:return e.abrupt("return",Promise.resolve());case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(7);case 19:e.next=5;break;case 21:return e.abrupt("return",Promise.reject());case 22:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(){return e.apply(this,arguments)}}(),t.exit=function(){var e=(0,r.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(t=this._activeSession)||t.exit();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t._getSesssionClasses=function(){return this._getUsingSessionTypes().map((function(e){return Te[e]}))},t._getUsingSessionTypes=function(){var e=this._view3D;return e.arPriority.filter((function(t){return!!e[t]}))},(0,o.Z)(e,[{key:"activeSession",get:function(){return this._activeSession}}]),e}(),ke=Oe,Pe=n(521),Se=["position"],xe=function(e){function t(t,n){var i,r=void 0===n?{}:n,o=r.position,a=void 0===o?[]:o,s=(0,pe.Z)(r,Se);return(i=e.call(this,t,s)||this)._position=(new h.Pa4).fromArray(a),i}(0,s.Z)(t,e);var n=t.prototype;return n.focus=function(){var e=(0,r.Z)(c().mark((function e(){var t,n,i,r,o,a,s,l,u=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._focusing){e.next=2;break}return e.abrupt("return");case 2:if(t=this._view3D.camera,this._focus.length>0?(i=this._getFocus(),r=this._position,n=new S.Z(i.x,i.y,i.z,r.toArray())):(o=this._calculateNormalFromModelCenter(),a=(0,d.dv)(o),s=a.yaw,l=a.pitch,n=new S.Z((0,d.Dc)(s),(0,d.Dc)(l),0,this._position.toArray())),window.addEventListener(_.FP.CLICK,(function(){u.unfocus()}),{once:!0,capture:!0}),this._onFocus(),n.equals(t.currentPose)){e.next=11;break}return e.abrupt("return",t.reset(this._focusDuration,P.Xt,n));case 11:return e.abrupt("return",Promise.resolve());case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.unfocus=function(){this._focusing&&this._onUnfocus()},n.toJSON=function(){return{position:this._position.toArray(),focus:this._focus,duration:this._focusDuration}},n._calculateNormalFromModelCenter=function(){var e=this._view3D.model,t=e?e.bbox.getCenter(new h.Pa4):new h.Pa4;return(new h.Pa4).subVectors(this._position,t).normalize()},(0,o.Z)(t,[{key:"position",get:function(){return this._position}}]),t}(Pe.Z),Ce=xe,Ne=n(9396),Ae=["meshIndex","faceIndex","position"],De=function(){function e(e){var t=this;this._onInput=function(){t._list.forEach((function(e){e.element&&e.unfocus()}))},this._view3D=e,this._list=[],this._wrapper=(0,d.S3)(e.annotationWrapper,e.rootEl)||this._createWrapper()}var t=e.prototype;return t.init=function(){var e=this;this._view3D.control.controls.forEach((function(t){var n;t.on(((n={})[g.QA.HOLD]=e._onInput,n))}))},t.destroy=function(){var e=this;this._view3D.control.controls.forEach((function(t){var n;t.off(((n={})[g.QA.HOLD]=e._onInput,n))})),this.reset()},t.resize=function(){this._list.forEach((function(e){e.resize()}))},t.collect=function(){var e=this._view3D,t=this._wrapper,n=[].slice.apply(t.querySelectorAll(e.annotationSelector)).map((function(t){var n=t.dataset.focus,i={element:t,focus:n?n.split(" ").map((function(e){return parseFloat(e)})):[],focusDuration:t.dataset.duration?parseFloat(t.dataset.duration):void 0};if(t.dataset.meshIndex){var r=parseFloat(t.dataset.meshIndex),o=t.dataset.faceIndex?parseFloat(t.dataset.faceIndex):void 0;return new Ne.Z(e,Object.assign({},i,{meshIndex:r,faceIndex:o}))}var a=t.dataset.position,s=a?a.split(" ").map((function(e){return parseFloat(e)})):[];return new Ce(e,Object.assign({},i,{position:s}))}));this.add.apply(this,n)},t.load=function(e){var t=this,n=new h.hH6;return new Promise((function(i,r){n.load(e,(function(e){var n=JSON.parse(e),r=t.parse(n);t.add.apply(t,r),i(r)}),void 0,(function(e){r(e)}))}))},t.parse=function(e){var t=this,n=this._view3D,i=e.baseFov,r=e.baseDistance,o=e.aspect;return e.items.map((function(e){var a=e.meshIndex,s=e.faceIndex,l=e.position,c=(0,pe.Z)(e,Ae),u=t._createDefaultAnnotationElement(e.label);return null!=a&&null!=s?new Ne.Z(n,Object.assign({meshIndex:a,faceIndex:s},c,{baseFov:i,baseDistance:r,aspect:o,element:u})):new Ce(n,Object.assign({position:l},c,{baseFov:i,baseDistance:r,aspect:o,element:u}))}))},t.render=function(){var e=this._view3D,t=e.model;if(t){var n=e.camera,i=e.renderer.canvasSize,r=i.clone().multiplyScalar(.5),o=n.threeCamera,a=o.position,s=t.bbox.getCenter(new h.Pa4),l=e.annotationBreakpoints,c=[].concat(this._list).filter((function(e){return e.renderable})).map((function(e){var t=e.position;return{annotation:e,position:t,distToCameraSquared:a.distanceToSquared(t)}})).sort((function(e,t){return t.distToCameraSquared-e.distToCameraSquared})),u=(new h.Pa4).subVectors(a,s).normalize(),_=Object.keys(l).map((function(e){return parseFloat(e)})).sort((function(e,t){return t-e}));c.forEach((function(e,t){var n=e.annotation,a=e.position;if(n.element){var c=a.clone().project(o),v=new h.FM8(c.x,-c.y),p=(new h.Pa4).subVectors(a,s).normalize(),f=(0,d.Dc)(Math.abs(Math.acos(p.dot(u))));v.multiply(r),v.add(r);for(var m,g=(0,D.Z)(_);!(m=g()).done;){var E=m.value;if(f>=E){n.setOpacity(l[E]);break}}n.render({position:a,renderOrder:t,screenPos:v,screenSize:i})}}))}},t.add=function(){for(var e,t=this._wrapper,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];i.forEach((function(e){e.enableEvents(),e.element&&e.element.parentElement!==t&&t.appendChild(e.element)})),(e=this._list).push.apply(e,i)},t.remove=function(e){var t=this._list.splice(e,1)[0];return t?(t.destroy(),t):null},t.reset=function(){var e=this._list;e.splice(0,e.length).forEach((function(e){e.destroy()}))},t.toJSON=function(){var e=this._view3D,t=this._list.map((function(e){var t,n;return Object.assign({},e.toJSON(),{label:(null==(t=e.element)||null==(n=t.querySelector("."+v.Qz.ANNOTATION_TOOLTIP))?void 0:n.innerHTML)||null})})),n=e.renderer.size,i=Math.max(n.height/n.width,1);return{baseFov:e.camera.baseFov,baseDistance:e.camera.baseDistance,aspect:i,items:t}},t._createWrapper=function(){var e=this._view3D,t=document.createElement(_.yy);return t.classList.add(v.Qz.ANNOTATION_WRAPPER),e.rootEl.appendChild(t),t},t._createDefaultAnnotationElement=function(e){var t=document.createElement(_.yy);if(t.classList.add(v.Qz.ANNOTATION),t.classList.add(v.Qz.ANNOTATION_DEFAULT),e){var n=document.createElement(_.yy);n.classList.add(v.Qz.ANNOTATION_TOOLTIP),n.classList.add(v.Qz.ANNOTATION_DEFAULT),n.innerHTML=e,t.appendChild(n)}return t},(0,o.Z)(e,[{key:"list",get:function(){return this._list}},{key:"wrapper",get:function(){return this._wrapper}}]),e}(),Le=De,Re=function(e){function t(t,n){var i,r=void 0===n?{}:n,o=r.duration,a=void 0===o?P.zn:o,s=r.easing,l=void 0===s?P.Xt:s,c=r.scale,u=void 0===c?1:c,d=r.disablePitch,p=void 0!==d&&d,f=r.disableYaw,m=void 0!==f&&f;return(i=e.call(this)||this)._screenScale=new h.FM8(0,0),i._prevPos=new h.FM8(0,0),i._isFirstTouch=!1,i._scrolling=!1,i._enabled=!1,i._onMouseDown=function(e){if(e.button===_.T.LEFT){var t=i._view3D.renderer.canvas;e.preventDefault(),t.focus?t.focus():window.focus(),i._prevPos.set(e.clientX,e.clientY),window.addEventListener(_.FP.MOUSE_MOVE,i._onMouseMove,!1),window.addEventListener(_.FP.MOUSE_UP,i._onMouseUp,!1),i.trigger(g.QA.HOLD,{inputType:v.rC.ROTATE})}},i._onMouseMove=function(e){e.preventDefault();var t=i._prevPos,n=new h.FM8(e.clientX,e.clientY).sub(t).multiplyScalar(i._scale);n.multiply(i._screenScale),i._xMotion.setEndDelta(n.x),i._yMotion.setEndDelta(n.y),t.set(e.clientX,e.clientY)},i._onMouseUp=function(){i._prevPos.set(0,0),window.removeEventListener(_.FP.MOUSE_MOVE,i._onMouseMove,!1),window.removeEventListener(_.FP.MOUSE_UP,i._onMouseUp,!1),i.trigger(g.QA.RELEASE,{inputType:v.rC.ROTATE})},i._onTouchStart=function(e){var t=e.touches[0];i._isFirstTouch=!0,i._prevPos.set(t.clientX,t.clientY),i.trigger(g.QA.HOLD,{inputType:v.rC.ROTATE})},i._onTouchMove=function(e){if(!(e.touches.length>1||i._scrolling)){var t=e.touches[0],n=i._view3D.scrollable;if(i._isFirstTouch){if(n){var r=new h.FM8(t.clientX,t.clientY).sub(i._prevPos);if(Math.abs(r.y)>Math.abs(r.x))return void(i._scrolling=!0)}i._isFirstTouch=!1}!1!==e.cancelable&&e.preventDefault(),e.stopPropagation();var o=i._prevPos,a=new h.FM8(t.clientX,t.clientY).sub(o).multiplyScalar(i._scale);a.multiply(i._screenScale),i._xMotion.setEndDelta(a.x),i._yMotion.setEndDelta(a.y),o.set(t.clientX,t.clientY)}},i._onTouchEnd=function(e){var t=e.touches[0];t?i._prevPos.set(t.clientX,t.clientY):(i._prevPos.set(0,0),i.trigger(g.QA.RELEASE,{inputType:v.rC.ROTATE})),i._scrolling=!1},i._view3D=t,i._scale=u,i._duration=a,i._easing=l,i._disablePitch=p,i._disableYaw=m,i._xMotion=new q.Z({duration:a,range:P.oK,easing:l}),i._yMotion=new q.Z({duration:a,range:P.y2,easing:l}),i}(0,s.Z)(t,e);var n=t.prototype;return n.destroy=function(){this.disable(),this.reset(),this.off()},n.reset=function(){this._isFirstTouch=!1,this._scrolling=!1},n.update=function(e){var t=this._view3D.camera,n=this._xMotion,i=this._yMotion,r=t.newPose,o=!this._disableYaw,a=!this._disablePitch,s=new h.FM8(n.update(e),i.update(e));o&&(r.yaw+=s.x),a&&(r.pitch+=s.y)},n.resize=function(e){this._screenScale.set(360/e.width,180/e.height)},n.enable=function(){if(!this._enabled){var e=this._view3D.renderer.canvas;e.addEventListener(_.FP.MOUSE_DOWN,this._onMouseDown),e.addEventListener(_.FP.TOUCH_START,this._onTouchStart,{passive:!1}),e.addEventListener(_.FP.TOUCH_MOVE,this._onTouchMove,{passive:!1}),e.addEventListener(_.FP.TOUCH_END,this._onTouchEnd),this._enabled=!0,this.sync(),this.trigger(g.QA.ENABLE,{inputType:v.rC.ROTATE})}},n.disable=function(){if(this._enabled){var e=this._view3D.renderer.canvas;e.removeEventListener(_.FP.MOUSE_DOWN,this._onMouseDown),window.removeEventListener(_.FP.MOUSE_MOVE,this._onMouseMove,!1),window.removeEventListener(_.FP.MOUSE_UP,this._onMouseUp,!1),e.removeEventListener(_.FP.TOUCH_START,this._onTouchStart),e.removeEventListener(_.FP.TOUCH_MOVE,this._onTouchMove),e.removeEventListener(_.FP.TOUCH_END,this._onTouchEnd),this._enabled=!1,this.trigger(g.QA.DISABLE,{inputType:v.rC.ROTATE})}},n.sync=function(){var e=this._view3D.camera;this._xMotion.reset(e.yaw),this._yMotion.reset(e.pitch)},(0,o.Z)(t,[{key:"enabled",get:function(){return this._enabled}},{key:"animating",get:function(){return this._xMotion.activated||this._yMotion.activated}},{key:"scale",get:function(){return this._scale},set:function(e){this._scale=e}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e,this._xMotion.duration=e,this._yMotion.duration=e}},{key:"easing",get:function(){return this._easing},set:function(e){this._easing=e,this._xMotion.easing=e,this._yMotion.easing=e}},{key:"disablePitch",get:function(){return this._disablePitch}},{key:"disableYaw",get:function(){return this._disableYaw}}]),t}(u.Z),Me=function(e){function t(t,n){var i,r=void 0===n?{}:n,o=r.easing,a=void 0===o?P.Xt:o,s=r.duration,l=void 0===s?0:s,c=r.scale,u=void 0===c?1:c;return(i=e.call(this)||this)._enabled=!1,i._touchInitialized=!1,i._prevPos=new h.FM8(0,0),i._screenSize=new h.FM8(0,0),i._onMouseDown=function(e){if(e.button===_.T.RIGHT){var t=i._view3D.renderer.canvas;e.preventDefault(),t.focus?t.focus():window.focus(),i._prevPos.set(e.clientX,e.clientY),window.addEventListener(_.FP.MOUSE_MOVE,i._onMouseMove,!1),window.addEventListener(_.FP.MOUSE_UP,i._onMouseUp,!1),window.addEventListener(_.FP.CONTEXT_MENU,i._onContextMenu,!1),i.trigger(g.QA.HOLD,{inputType:v.rC.TRANSLATE})}},i._onMouseMove=function(e){e.preventDefault();var t=i._prevPos,n=new h.FM8(e.clientX,e.clientY).sub(t).multiplyScalar(i._scale);i._xMotion.setEndDelta(-n.x),i._yMotion.setEndDelta(n.y),t.set(e.clientX,e.clientY)},i._onMouseUp=function(){i._prevPos.set(0,0),window.removeEventListener(_.FP.MOUSE_MOVE,i._onMouseMove,!1),window.removeEventListener(_.FP.MOUSE_UP,i._onMouseUp,!1),i.trigger(g.QA.RELEASE,{inputType:v.rC.TRANSLATE})},i._onTouchStart=function(e){2===e.touches.length&&(!1!==e.cancelable&&e.preventDefault(),i._prevPos.copy(i._getTouchesMiddle(e.touches)),i._touchInitialized=!0,i.trigger(g.QA.HOLD,{inputType:v.rC.TRANSLATE}))},i._onTouchMove=function(e){if(2===e.touches.length){!1!==e.cancelable&&e.preventDefault(),e.stopPropagation();var t=i._prevPos,n=i._getTouchesMiddle(e.touches);if(!i._touchInitialized)return t.copy(n),void(i._touchInitialized=!0);var r=(new h.FM8).subVectors(n,t).multiplyScalar(i._scale);i._xMotion.setEndDelta(-r.x),i._yMotion.setEndDelta(r.y),t.copy(n)}},i._onTouchEnd=function(e){2===e.touches.length?(i._prevPos.copy(i._getTouchesMiddle(e.touches)),i._touchInitialized=!0):i._touchInitialized&&(i._touchInitialized=!1,i.trigger(g.QA.RELEASE,{inputType:v.rC.TRANSLATE}))},i._onContextMenu=function(e){e.preventDefault(),window.removeEventListener(_.FP.CONTEXT_MENU,i._onContextMenu,!1)},i._view3D=t,i._xMotion=new q.Z({duration:l,range:P.oK,easing:a}),i._yMotion=new q.Z({duration:l,range:P.oK,easing:a}),i._scale=u,i}(0,s.Z)(t,e);var n=t.prototype;return n.destroy=function(){this.disable(),this.reset(),this.off()},n.reset=function(){this._touchInitialized=!1},n.update=function(e){var t=this._view3D.camera,n=t.newPose,i=this._screenSize,r=new h.FM8(this._xMotion.update(e),this._yMotion.update(e)),o=new h.Pa4(1,0,0).applyQuaternion(t.threeCamera.quaternion),a=new h.Pa4(0,1,0).applyQuaternion(t.threeCamera.quaternion),s=new h.FM8(t.renderWidth,t.renderHeight).divide(i);r.multiply(s);var l=n.pivot.clone();n.pivot=l.add(o.multiplyScalar(r.x)).add(a.multiplyScalar(r.y))},n.resize=function(e){this._screenSize.copy(new h.FM8(e.width,e.height))},n.enable=function(){if(!this._enabled){var e=this._view3D.renderer.canvas;e.addEventListener(_.FP.MOUSE_DOWN,this._onMouseDown,!1),e.addEventListener(_.FP.TOUCH_START,this._onTouchStart,{passive:!1,capture:!1}),e.addEventListener(_.FP.TOUCH_MOVE,this._onTouchMove,{passive:!1,capture:!1}),e.addEventListener(_.FP.TOUCH_END,this._onTouchEnd,{passive:!1,capture:!1}),this._enabled=!0,this.sync(),this.trigger(g.QA.ENABLE,{inputType:v.rC.TRANSLATE})}},n.disable=function(){if(this._enabled){var e=this._view3D.renderer.canvas;e.removeEventListener(_.FP.MOUSE_DOWN,this._onMouseDown,!1),window.removeEventListener(_.FP.MOUSE_MOVE,this._onMouseMove,!1),window.removeEventListener(_.FP.MOUSE_UP,this._onMouseUp,!1),e.removeEventListener(_.FP.TOUCH_START,this._onTouchStart,!1),e.removeEventListener(_.FP.TOUCH_MOVE,this._onTouchMove,!1),e.removeEventListener(_.FP.TOUCH_END,this._onTouchEnd,!1),window.removeEventListener(_.FP.CONTEXT_MENU,this._onContextMenu,!1),this._enabled=!1,this.trigger(g.QA.DISABLE,{inputType:v.rC.TRANSLATE})}},n.sync=function(){this._xMotion.reset(0),this._yMotion.reset(0)},n._getTouchesMiddle=function(e){return new h.FM8(e[0].clientX+e[1].clientX,e[0].clientY+e[1].clientY).multiplyScalar(.5)},(0,o.Z)(t,[{key:"enabled",get:function(){return this._enabled}},{key:"animating",get:function(){return this._xMotion.activated||this._yMotion.activated}},{key:"scale",get:function(){return this._scale},set:function(e){this._scale=e}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e,this._xMotion.duration=e,this._yMotion.duration=e}},{key:"easing",get:function(){return this._easing},set:function(e){this._easing=e,this._xMotion.easing=e,this._yMotion.easing=e}}]),t}(u.Z),Ie=function(e){function t(t,n){var i,r=void 0===n?{}:n,o=r.type,a=void 0===o?v.sO.FOV:o,s=r.scale,l=void 0===s?1:s,c=r.duration,u=void 0===c?P.zn:c,_=r.minFov,p=void 0===_?1:_,f=r.maxFov,m=void 0===f?v.B7:f,E=r.minDistance,w=void 0===E?.1:E,y=r.maxDistance,b=void 0===y?2:y,T=r.doubleTap,O=void 0===T||T,k=r.easing,x=void 0===k?P.Xt:k;return(i=e.call(this)||this)._scaleModifier=1,i._wheelModifier=.02,i._touchModifier=.05,i._prevTouchDistance=-1,i._enabled=!1,i._isFirstTouch=!0,i._isWheelScrolling=!1,i._onWheel=function(e){var t=i._view3D.wheelScrollable;if(0!==e.deltaY&&!t){e.preventDefault(),e.stopPropagation();var n=i._motion,r=-i._scale*i._scaleModifier*i._wheelModifier*e.deltaY;i._isWheelScrolling||i.trigger(g.QA.HOLD,{inputType:v.rC.ZOOM}),i._isWheelScrolling=!0,n.setEndDelta(r)}},i._onTouchMove=function(e){var t=e.touches;if(2===t.length){!1!==e.cancelable&&e.preventDefault(),e.stopPropagation();var n=i._motion,r=i._prevTouchDistance,o=new h.FM8(t[0].pageX,t[0].pageY),a=new h.FM8(t[1].pageX,t[1].pageY),s=o.sub(a).length()*i._scale*i._scaleModifier*i._touchModifier,l=i._isFirstTouch?0:s-r;i._prevTouchDistance=s,i._isFirstTouch&&i.trigger(g.QA.HOLD,{inputType:v.rC.ZOOM}),i._isFirstTouch=!1,n.setEndDelta(l)}},i._onTouchEnd=function(e){0===e.touches.length&&(i.trigger(g.QA.RELEASE,{inputType:v.rC.ZOOM}),i._prevTouchDistance=-1,i._isFirstTouch=!0)},i._onDoubleClick=function(e){var t=i._view3D;if(i._doubleTap&&t.model){var n=(0,d.PO)(i._doubleTap),r=n.zoomIn,o=void 0===r?.8:r,a=n.duration,s=void 0===a?P.zn:a,l=n.easing,c=void 0===l?P.Xt:l,u=n.useZoomOut,_=void 0===u||u,v=-i._motion.range.min*o;if(t.camera.zoom>=v&&_){var p=t.camera.currentPose.clone();return p.zoom=0,void t.camera.reset(s,c,p)}var f=new h.iMs,m=new h.FM8,g=t.renderer.canvasSize;m.x=e.offsetX/g.x*2-1,m.y=-e.offsetY/g.y*2+1,f.setFromCamera(m,t.camera.threeCamera);var E=f.intersectObject(t.model.scene);if(E.length){var w=E[0].point,y=t.camera,b=y.yaw,T=y.pitch,O=new S.Z(b,T,v,w.toArray());t.camera.reset(s,c,O)}}},i._view3D=t,i._type=a,i._scale=l,i._duration=u,i._minFov=p,i._maxFov=m,i._minDistance=w,i._maxDistance=b,i._doubleTap=O,i._easing=x,i._motion=new q.Z({duration:u,easing:x,range:{min:-1/0,max:1/0}}),i}(0,s.Z)(t,e);var n=t.prototype;return n.destroy=function(){this.disable(),this.reset(),this.off()},n.reset=function(){this._prevTouchDistance=-1,this._isFirstTouch=!0,this._isWheelScrolling=!1},n.update=function(e){var t=this._view3D.camera.newPose,n=this._motion,i=n.progress,r=n.update(e),o=n.progress;t.zoom-=r,this._isWheelScrolling&&i<1&&o>=1&&(this.trigger(g.QA.RELEASE,{inputType:v.rC.ZOOM}),this._isWheelScrolling=!1)},n.resize=function(e){},n.enable=function(){if(!this._enabled){var e=this._view3D.renderer.canvas;e.addEventListener(_.FP.WHEEL,this._onWheel,{passive:!1,capture:!1}),e.addEventListener(_.FP.TOUCH_MOVE,this._onTouchMove,{passive:!1,capture:!1}),e.addEventListener(_.FP.TOUCH_END,this._onTouchEnd,{passive:!1,capture:!1}),e.addEventListener(_.FP.DOUBLE_CLICK,this._onDoubleClick),this._enabled=!0,this.sync(),this.trigger(g.QA.ENABLE,{inputType:v.rC.ZOOM})}},n.disable=function(){if(this._enabled){var e=this._view3D.renderer.canvas;e.removeEventListener(_.FP.WHEEL,this._onWheel,!1),e.removeEventListener(_.FP.TOUCH_MOVE,this._onTouchMove,!1),e.removeEventListener(_.FP.TOUCH_END,this._onTouchEnd,!1),e.removeEventListener(_.FP.DOUBLE_CLICK,this._onDoubleClick),this._enabled=!1,this.trigger(g.QA.DISABLE,{inputType:v.rC.ZOOM})}},n.sync=function(){var e=this._view3D.camera;this._motion.reset(-e.zoom),this._type===v.sO.FOV?this._scaleModifier=-1:this._scaleModifier=-e.baseDistance/44},n.updateRange=function(){var e=this._motion.range,t=this._view3D.camera;if(this._type===v.sO.FOV){var n=t.baseFov,i=this._maxFov;e.max=i===v.B7?Math.min(n+45,175)-n:i-n,e.min=this._minFov-n}else e.max=t.baseDistance*this._maxDistance-t.baseDistance,e.min=t.baseDistance*this._minDistance-t.baseDistance},(0,o.Z)(t,[{key:"enabled",get:function(){return this._enabled}},{key:"animating",get:function(){return this._motion.activated}},{key:"range",get:function(){return this._motion.range}},{key:"type",get:function(){return this._type},set:function(e){this._type=e}},{key:"scale",get:function(){return this._scale},set:function(e){this._scale=e}},{key:"duration",get:function(){return this._duration}},{key:"minFov",get:function(){return this._minFov}},{key:"maxFov",get:function(){return this._maxFov}},{key:"minDistance",get:function(){return this._minDistance}},{key:"maxDistance",get:function(){return this._maxDistance}},{key:"doubleTap",get:function(){return this._doubleTap}},{key:"easing",get:function(){return this._easing}}]),t}(u.Z),Fe=function(){function e(e){var t=this;this._onEnable=function(e){if(e.inputType!==v.rC.ZOOM){var n=t._view3D,i=n.renderer.canvas;n.useGrabCursor&&(t._rotateControl.enabled||t._translateControl.enabled)&&i.style.cursor===_.WV.NONE&&t._setCursor(_.WV.GRAB)}},this._onDisable=function(e){e.inputType!==v.rC.ZOOM&&(t._view3D.renderer.canvas.style.cursor!==_.WV.NONE&&!t._rotateControl.enabled&&!t._translateControl.enabled&&t._setCursor(_.WV.NONE))},this._onHold=function(e){var n=e.inputType,i=t._view3D;n!==v.rC.ZOOM&&(i.useGrabCursor&&(t._rotateControl.enabled||t._translateControl.enabled)&&t._setCursor(_.WV.GRABBING));i.trigger(v.FP.INPUT_START,{type:v.FP.INPUT_START,target:i,inputType:n})},this._onRelease=function(e){var n=e.inputType,i=t._view3D;n!==v.rC.ZOOM&&(i.useGrabCursor&&(t._rotateControl.enabled||t._translateControl.enabled)&&t._setCursor(_.WV.GRAB));i.trigger(v.FP.INPUT_END,{type:v.FP.INPUT_END,target:i,inputType:n})},this._view3D=e,this._rotateControl=new Re(e,(0,d.PO)(e.rotate)),this._translateControl=new Me(e,(0,d.PO)(e.translate)),this._zoomControl=new Ie(e,(0,d.PO)(e.zoom)),this._extraControls=[],[this._rotateControl,this._translateControl,this._zoomControl].forEach((function(e){var n;e.on(((n={})[g.QA.HOLD]=t._onHold,n[g.QA.RELEASE]=t._onRelease,n[g.QA.ENABLE]=t._onEnable,n[g.QA.DISABLE]=t._onDisable,n))}))}var t=e.prototype;return t.destroy=function(){this._rotateControl.destroy(),this._translateControl.destroy(),this._zoomControl.destroy(),this._extraControls.forEach((function(e){return e.destroy()})),this._extraControls=[]},t.update=function(e){this._rotateControl.update(e),this._translateControl.update(e),this._zoomControl.update(e),this._extraControls.forEach((function(t){return t.update(e)}))},t.resize=function(e){this._rotateControl.resize(e),this._translateControl.resize(e),this._zoomControl.resize(e),this._extraControls.forEach((function(t){return t.resize(e)}))},t.enable=function(){var e=this._view3D;e.rotate&&this._rotateControl.enable(),e.translate&&this._translateControl.enable(),e.zoom&&this._zoomControl.enable(),this._extraControls.forEach((function(e){return e.enable()}))},t.disable=function(){this._rotateControl.disable(),this._translateControl.disable(),this._zoomControl.disable(),this._extraControls.forEach((function(e){return e.disable()}))},t.sync=function(){this._rotateControl.sync(),this._translateControl.sync(),this._zoomControl.sync(),this._extraControls.forEach((function(e){return e.sync()}))},t.add=function(e){this._extraControls.push(e)},t.remove=function(e){var t=this._extraControls,n=t.findIndex((function(t){return t===e}));n>=0&&t.splice(n,1)},t.updateCursor=function(){var e=this._view3D.useGrabCursor?_.WV.GRAB:_.WV.NONE;this._setCursor(e)},t._setCursor=function(e){var t=this._view3D;(t.useGrabCursor||e===_.WV.NONE)&&(t.renderer.canvas.style.cursor=e)},(0,o.Z)(e,[{key:"rotate",get:function(){return this._rotateControl}},{key:"translate",get:function(){return this._translateControl}},{key:"zoom",get:function(){return this._zoomControl}},{key:"controls",get:function(){return[this._rotateControl,this._translateControl,this._zoomControl]}},{key:"extraControls",get:function(){return this._extraControls}},{key:"animating",get:function(){return this._rotateControl.animating||this._translateControl.animating||this._zoomControl.animating||this._extraControls.some((function(e){return e.animating}))}}]),e}(),ze=function(){function e(e,t){var n=this,i=void 0===t?{}:t,r=i.delay,o=void 0===r?2e3:r,a=i.delayOnMouseLeave,s=void 0===a?0:a,l=i.speed,c=void 0===l?1:l,u=i.pauseOnHover,h=void 0!==u&&u,d=i.canInterrupt,v=void 0===d||d,p=i.disableOnInterrupt,f=void 0!==p&&p;this._enabled=!1,this._interrupted=!1,this._interruptionTimer=-1,this._hovering=!1,this._onMouseDown=function(e){n._canInterrupt&&(e.button!==_.T.LEFT&&e.button!==_.T.RIGHT||(n._interrupted=!0,n._clearTimeout(),window.addEventListener(_.FP.MOUSE_UP,n._onMouseUp,!1)))},this._onMouseUp=function(){window.removeEventListener(_.FP.MOUSE_UP,n._onMouseUp,!1),n._setUninterruptedAfterDelay(n._delay)},this._onTouchStart=function(){n._canInterrupt&&(n._interrupted=!0,n._clearTimeout())},this._onTouchEnd=function(){n._setUninterruptedAfterDelay(n._delay)},this._onMouseEnter=function(){n._pauseOnHover&&(n._interrupted=!0,n._hovering=!0)},this._onMouseLeave=function(){n._pauseOnHover&&(n._hovering=!1,n._setUninterruptedAfterDelay(n._delayOnMouseLeave))},this._onWheel=function(){n._canInterrupt&&(n._interrupted=!0,n._setUninterruptedAfterDelay(n._delay))},this._view3D=e,this._delay=o,this._delayOnMouseLeave=s,this._speed=c,this._pauseOnHover=h,this._canInterrupt=v,this._disableOnInterrupt=f}var t=e.prototype;return t.destroy=function(){this.disable()},t.update=function(e){this._enabled&&(this._interrupted?this._disableOnInterrupt&&this.disable():this._view3D.camera.newPose.yaw+=this._speed*e/100)},t.enable=function(){if(!this._enabled){var e=this._view3D.renderer.canvas;e.addEventListener(_.FP.MOUSE_DOWN,this._onMouseDown,!1),e.addEventListener(_.FP.TOUCH_START,this._onTouchStart,{passive:!1,capture:!1}),e.addEventListener(_.FP.TOUCH_END,this._onTouchEnd,{passive:!1,capture:!1}),e.addEventListener(_.FP.MOUSE_ENTER,this._onMouseEnter,!1),e.addEventListener(_.FP.MOUSE_LEAVE,this._onMouseLeave,!1),e.addEventListener(_.FP.WHEEL,this._onWheel,{passive:!1,capture:!1}),this._enabled=!0}},t.enableAfterDelay=function(){this.enable(),this._interrupted=!0,this._setUninterruptedAfterDelay(this._delay)},t.disable=function(){if(this._enabled){var e=this._view3D.renderer.canvas;e.removeEventListener(_.FP.MOUSE_DOWN,this._onMouseDown,!1),window.removeEventListener(_.FP.MOUSE_UP,this._onMouseUp,!1),e.removeEventListener(_.FP.TOUCH_START,this._onTouchStart,!1),e.removeEventListener(_.FP.TOUCH_END,this._onTouchEnd,!1),e.removeEventListener(_.FP.MOUSE_ENTER,this._onMouseEnter,!1),e.removeEventListener(_.FP.MOUSE_LEAVE,this._onMouseLeave,!1),e.removeEventListener(_.FP.WHEEL,this._onWheel,!1),this._enabled=!1,this._interrupted=!1,this._hovering=!1,this._clearTimeout()}},t._setUninterruptedAfterDelay=function(e){var t=this;this._hovering||(this._clearTimeout(),e>0?this._interruptionTimer=window.setTimeout((function(){t._interrupted=!1,t._interruptionTimer=-1}),e):(this._interrupted=!1,this._interruptionTimer=-1))},t._clearTimeout=function(){this._interruptionTimer>=0&&(window.clearTimeout(this._interruptionTimer),this._interruptionTimer=-1)},(0,o.Z)(e,[{key:"enabled",get:function(){return this._enabled}},{key:"animating",get:function(){return this._enabled&&!this._interrupted}},{key:"delay",get:function(){return this._delay},set:function(e){this._delay=e}},{key:"delayOnMouseLeave",get:function(){return this._delayOnMouseLeave},set:function(e){this._delayOnMouseLeave=e}},{key:"speed",get:function(){return this._speed},set:function(e){this._speed=e}},{key:"pauseOnHover",get:function(){return this._pauseOnHover},set:function(e){this._pauseOnHover=e}},{key:"canInterrupt",get:function(){return this._canInterrupt},set:function(e){this._canInterrupt=e}},{key:"disableOnInterrupt",get:function(){return this._disableOnInterrupt},set:function(e){this._disableOnInterrupt=e}}]),e}(),Ze=n(7582),Ue=function(e){function t(t,n){var i,o=void 0===n?{}:n,s=o.src,l=void 0===s?null:s,u=o.iosSrc,h=void 0===u?null:u,_=o.dracoPath,f=void 0===_?P.yt:_,m=o.ktxPath,g=void 0===m?P.eA:m,E=o.meshoptPath,w=void 0===E?null:E,y=o.fixSkinnedBbox,b=void 0!==y&&y,T=o.fov,k=void 0===T?v.B7:T,S=o.center,N=void 0===S?v.B7:S,D=o.yaw,L=void 0===D?0:D,R=o.pitch,M=void 0===R?0:R,I=o.initialZoom,F=void 0===I?0:I,z=o.rotate,Z=void 0===z||z,U=o.translate,B=void 0===U||U,H=o.zoom,j=void 0===H||H,V=o.autoplay,G=void 0!==V&&V,W=o.scrollable,X=void 0===W||W,Y=o.wheelScrollable,Q=void 0!==Y&&Y,q=o.useGrabCursor,K=void 0===q||q,J=o.defaultAnimationIndex,$=void 0===J?0:J,ee=o.skybox,te=void 0===ee?null:ee,ne=o.envmap,ie=void 0===ne?null:ne,re=o.background,oe=void 0===re?null:re,ae=o.exposure,se=void 0===ae?1:ae,le=o.shadow,ce=void 0===le||le,ue=o.skyboxBlur,he=void 0!==ue&&ue,de=o.toneMapping,_e=void 0===de?v.bU.LINEAR:de,ve=o.useDefaultEnv,pe=void 0===ve||ve,fe=o.animationRepeatMode,me=void 0===fe?v.U3.ONE:fe,ge=o.annotationURL,Ee=void 0===ge?null:ge,we=o.annotationWrapper,ye=void 0===we?"."+v.Qz.ANNOTATION_WRAPPER:we,be=o.annotationSelector,Te=void 0===be?"."+v.Qz.ANNOTATION:be,Oe=o.annotationBreakpoints,Pe=void 0===Oe?P.FW:Oe,Se=o.webAR,xe=void 0===Se||Se,Ce=o.sceneViewer,Ne=void 0===Ce||Ce,Ae=o.quickLook,De=void 0===Ae||Ae,Re=o.arPriority,Me=void 0===Re?P.QU:Re,Ie=o.poster,Ze=void 0===Ie?null:Ie,Ue=o.canvasSelector,Be=void 0===Ue?"canvas":Ue,He=o.autoInit,je=void 0===He||He,Ve=o.autoResize,Ge=void 0===Ve||Ve,We=o.useResizeObserver,Xe=void 0===We||We,Ye=o.maintainSize,Qe=void 0!==Ye&&Ye,qe=o.on,Ke=void 0===qe?{}:qe,Je=o.plugins,$e=void 0===Je?[]:Je,et=o.maxDeltaTime,tt=void 0===et?1/30:et;return(i=e.call(this)||this)._rootEl=(0,d.sb)(t),i._src=l,i._iosSrc=h,i._dracoPath=f,i._ktxPath=g,i._meshoptPath=w,i._fixSkinnedBbox=b,i._fov=k,i._center=N,i._yaw=L,i._pitch=M,i._initialZoom=F,i._rotate=Z,i._translate=B,i._zoom=j,i._autoplay=G,i._scrollable=X,i._wheelScrollable=Q,i._useGrabCursor=K,i._defaultAnimationIndex=$,i._skybox=te,i._envmap=ie,i._background=oe,i._exposure=se,i._shadow=ce,i._skyboxBlur=he,i._toneMapping=_e,i._useDefaultEnv=pe,i._animationRepeatMode=me,i._annotationURL=Ee,i._annotationWrapper=ye,i._annotationSelector=Te,i._annotationBreakpoints=Pe,i._webAR=xe,i._sceneViewer=Ne,i._quickLook=De,i._arPriority=Me,i._poster=Ze,i._canvasSelector=Be,i._autoInit=je,i._autoResize=Ge,i._useResizeObserver=Xe,i._maintainSize=Qe,i._model=null,i._initialized=!1,i._loadingContext=[],i._plugins=$e,i._maxDeltaTime=tt,i._renderer=new p((0,a.Z)(i)),i._camera=new x((0,a.Z)(i)),i._control=new Fe((0,a.Z)(i)),i._scene=new O((0,a.Z)(i)),i._animator=new A((0,a.Z)(i)),i._autoPlayer=new ze((0,a.Z)(i),(0,d.PO)(G)),i._autoResizer=new C((0,a.Z)(i)),i._arManager=new ke((0,a.Z)(i)),i._annotationManager=new Le((0,a.Z)(i)),i._addEventHandlers(Ke),i._addPosterImage(),(0,r.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i._initPlugins($e);case 2:if(!l||!je){e.next=5;break}return e.next=5,i.init();case 5:case"end":return e.stop()}}),e)})))(),i}(0,s.Z)(t,e);var n=t.prototype;return n.destroy=function(){var e=this;this._scene.reset(),this._renderer.destroy(),this._control.destroy(),this._autoResizer.disable(),this._animator.destroy(),this._annotationManager.destroy(),this._plugins.forEach((function(t){return t.teardown(e)})),this._plugins=[]},n.init=function(){var e=(0,r.Z)(c().mark((function e(){var t,n,i,r,o,a,s,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._src){e.next=2;break}throw new L.Z(fe.ZP.MESSAGES.PROVIDE_SRC_FIRST,fe.ZP.CODES.PROVIDE_SRC_FIRST);case 2:if(t=this._scene,n=this._renderer,i=this._control,r=this._animator,o=this._annotationManager,a=this._meshoptPath,s=[],this.resize(),r.init(),o.init(),this._autoResize&&this._autoResizer.enable(),!a||Ze.Z.meshoptDecoder){e.next=16;break}return e.next=16,Ze.Z.setMeshoptDecoder(a);case 16:return s.push.apply(s,t.initTextures()),l=this._loadModel(this._src),s.push.apply(s,l),this._resetLoadingContextOnFinish(s),e.next=22,Promise.race(l);case 22:if(!this._annotationURL){e.next=25;break}return e.next=25,this._annotationManager.load(this._annotationURL);case 25:i.enable(),this._autoplay&&this._autoPlayer.enable(),n.stopAnimationLoop(),n.setAnimationLoop(n.defaultRenderLoop),n.renderSingleFrame(),this._initialized=!0,this.trigger(v.FP.READY,{type:v.FP.READY,target:this});case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.resize=function(){var e=this._renderer,t=this._initialized?e.size:null;e.resize();var n=e.size;this._camera.resize(n,t),this._control.resize(n),this._annotationManager.resize(),e.renderSingleFrame(!0),this.trigger(v.FP.RESIZE,Object.assign({},n,{type:v.FP.RESIZE,target:this}))},n.load=function(){var e=(0,r.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._initialized){e.next=8;break}return n=this._loadModel(t),this._resetLoadingContextOnFinish(n),e.next=5,Promise.race(n);case 5:this._src=t,e.next=11;break;case 8:return this._src=t,e.next=11,this.init();case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.display=function(e,t){var n=(void 0===t?{}:t).resetCamera,i=void 0===n||n,r=this._renderer,o=this._scene,a=this._camera,s=this._animator,l=this._annotationManager,c=r.threeRenderer.xr.isPresenting;if(o.reset(),o.add(e.scene),o.shadowPlane.updateDimensions(e),i&&(a.fit(e,this._center),a.reset(0)),s.reset(),s.setClips(e.animations),e.animations.length>0&&s.play(this._defaultAnimationIndex),l.reset(),l.collect(),l.add.apply(l,e.annotations),this._model=e,c){var u=this._arManager.activeSession;u&&u.control.syncTargetModel(e)}r.renderSingleFrame(),this.trigger(v.FP.MODEL_CHANGE,{type:v.FP.MODEL_CHANGE,target:this,model:e})},n.loadPlugins=function(){var e=(0,r.Z)(c().mark((function e(){var t,n,i,r,o=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=o.length,i=new Array(n),r=0;r<n;r++)i[r]=o[r];return e.next=3,this._initPlugins(i);case 3:(t=this._plugins).push.apply(t,i);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.removePlugins=function(){var e=(0,r.Z)(c().mark((function e(){var t,n,i,r=this,o=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,n=new Array(t),i=0;i<t;i++)n[i]=o[i];return e.next=3,Promise.all(n.map((function(e){return e.teardown(r)})));case 3:n.forEach((function(e){var t=r._plugins.indexOf(e);t<0||r._plugins.splice(t,1)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.screenshot=function(e){void 0===e&&(e="screenshot");var t=this._renderer.canvas.toDataURL("png"),n=document.createElement("a");n.href=t,n.download=e,n.click()},n._loadModel=function(e){var t=this,n=new Ze.Z(this);if(Array.isArray(e)){var i=e.map((function(){return!1}));return e.map((function(e,r){return t._loadSingleModel(n,e,r,i)}))}return[this._loadSingleModel(n,e,0,[!1])]},n._loadSingleModel=function(){var e=(0,r.Z)(c().mark((function e(t,n,i,r){var o,a,s,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.length-1,this.trigger(v.FP.LOAD_START,{type:v.FP.LOAD_START,target:this,src:n,level:i,maxLevel:o}),e.prev=2,e.next=5,t.load(n);case 5:if(a=e.sent,s=r.slice(i+1).some((function(e){return!!e})),l=r.some((function(e){return!!e})),this.trigger(v.FP.LOAD,{type:v.FP.LOAD,target:this,model:a,level:i,maxLevel:o}),r[i]=!0,!s){e.next=12;break}return e.abrupt("return");case 12:this.display(a,{resetCamera:!l}),e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(2),this.trigger(v.FP.LOAD_ERROR,{type:v.FP.LOAD_ERROR,target:this,level:i,maxLevel:o,error:e.t0}),new L.Z(fe.ZP.MESSAGES.MODEL_FAIL_TO_LOAD(n),fe.ZP.CODES.MODEL_FAIL_TO_LOAD);case 19:case"end":return e.stop()}}),e,this,[[2,15]])})));return function(t,n,i,r){return e.apply(this,arguments)}}(),n._addEventHandlers=function(e){var t=this;Object.keys(e).forEach((function(n){t.on(n,e[n])}))},n._addPosterImage=function(){var e=this._poster,t=this._rootEl;if(e){var n,i=(0,d.kK)(e);if(i||(0,d.dN)(e)){var r=i?e:t.querySelector(e);if(!r)throw new L.Z(fe.ZP.MESSAGES.ELEMENT_NOT_FOUND(e),fe.ZP.CODES.ELEMENT_NOT_FOUND);n=r}else{var o=document.createElement("img");o.className=v.Qz.POSTER,o.src=e,t.appendChild(o),n=o,this.once(v.FP.READY,(function(){o.parentElement===t&&t.removeChild(o)}))}this.once(v.FP.READY,(function(){n.parentElement&&n.parentElement.removeChild(n)}))}},n._initPlugins=function(){var e=(0,r.Z)(c().mark((function e(t){var n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return e.init(n)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n._resetLoadingContextOnFinish=function(){var e=(0,r.Z)(c().mark((function e(t){var n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Promise.all(t).then((function(){n.trigger(v.FP.LOAD_FINISH,{type:v.FP.LOAD_FINISH,target:n}),n._loadingContext=[]}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(0,o.Z)(t,[{key:"renderer",get:function(){return this._renderer}},{key:"scene",get:function(){return this._scene}},{key:"camera",get:function(){return this._camera}},{key:"control",get:function(){return this._control}},{key:"autoPlayer",get:function(){return this._autoPlayer}},{key:"model",get:function(){return this._model}},{key:"animator",get:function(){return this._animator}},{key:"ar",get:function(){return this._arManager}},{key:"annotation",get:function(){return this._annotationManager}},{key:"rootEl",get:function(){return this._rootEl}},{key:"initialized",get:function(){return this._initialized}},{key:"loadingContext",get:function(){return this._loadingContext}},{key:"plugins",get:function(){return this._plugins}},{key:"src",get:function(){return this._src}},{key:"iosSrc",get:function(){return this._iosSrc}},{key:"dracoPath",get:function(){return this._dracoPath}},{key:"ktxPath",get:function(){return this._ktxPath}},{key:"meshoptPath",get:function(){return this._meshoptPath}},{key:"fixSkinnedBbox",get:function(){return this._fixSkinnedBbox}},{key:"fov",get:function(){return this._fov}},{key:"center",get:function(){return this._center}},{key:"yaw",get:function(){return this._yaw}},{key:"pitch",get:function(){return this._pitch}},{key:"initialZoom",get:function(){return this._initialZoom},set:function(e){this._initialZoom=e}},{key:"rotate",get:function(){return this._rotate}},{key:"translate",get:function(){return this._translate}},{key:"zoom",get:function(){return this._zoom}},{key:"autoplay",get:function(){return this._autoplay}},{key:"scrollable",get:function(){return this._scrollable}},{key:"wheelScrollable",get:function(){return this._wheelScrollable}},{key:"useGrabCursor",get:function(){return this._useGrabCursor},set:function(e){this._useGrabCursor=e,this._control.updateCursor()}},{key:"skybox",get:function(){return this._skybox},set:function(e){this._scene.setSkybox(e),this._skybox=e,!e&&this._useDefaultEnv&&this._scene.setDefaultEnv()}},{key:"envmap",get:function(){return this._envmap},set:function(e){this._scene.setEnvMap(e),this._envmap=e,!e&&this._useDefaultEnv&&this._scene.setDefaultEnv()}},{key:"background",get:function(){return this._background}},{key:"exposure",get:function(){return this._exposure},set:function(e){this._exposure=e,this._renderer.threeRenderer.toneMappingExposure=e,this._renderer.renderSingleFrame()}},{key:"shadow",get:function(){return this._shadow}},{key:"skyboxBlur",get:function(){return this._skyboxBlur},set:function(e){this._skyboxBlur=e;var t=this._scene,n=t.root,i=t.root.environment;i&&null!==n.background&&(n.background=e?b.Z.createBlurredHDR(this,i):i)}},{key:"toneMapping",get:function(){return this._toneMapping},set:function(e){this._toneMapping=e,this._renderer.threeRenderer.toneMapping=e,this._renderer.renderSingleFrame()}},{key:"useDefaultEnv",get:function(){return this._useDefaultEnv}},{key:"defaultAnimationIndex",get:function(){return this._defaultAnimationIndex},set:function(e){this._defaultAnimationIndex=e}},{key:"animationRepeatMode",get:function(){return this._animationRepeatMode},set:function(e){this._animationRepeatMode=e,this._animator.updateRepeatMode()}},{key:"annotationURL",get:function(){return this._annotationURL}},{key:"annotationWrapper",get:function(){return this._annotationWrapper}},{key:"annotationSelector",get:function(){return this._annotationSelector}},{key:"annotationBreakpoints",get:function(){return this._annotationBreakpoints}},{key:"webAR",get:function(){return this._webAR}},{key:"sceneViewer",get:function(){return this._sceneViewer}},{key:"quickLook",get:function(){return this._quickLook}},{key:"arPriority",get:function(){return this._arPriority}},{key:"poster",get:function(){return this._poster}},{key:"canvasSelector",get:function(){return this._canvasSelector}},{key:"autoInit",get:function(){return this._autoInit}},{key:"autoResize",get:function(){return this._autoResize},set:function(e){this._autoResize=e,e?this._autoResizer.enable():this._autoResizer.disable()}},{key:"useResizeObserver",get:function(){return this._useResizeObserver}},{key:"maintainSize",get:function(){return this._maintainSize},set:function(e){this._maintainSize=e}},{key:"maxDeltaTime",get:function(){return this._maxDeltaTime},set:function(e){this._maxDeltaTime=e}}]),t}(u.Z);Ue.VERSION="#__VERSION__#";var Be=Ue},7582:function(e,t,n){var i=n(5861),r=n(4578),o=n(7757),a=n.n(o),s=n(4412),l=n(8331),c=n(5157),u=n(7631),h=n(3586),d=n(536),_=n(7450),v=n(1351),p=new c._,f=new u.a,m=function(e){function t(t){var n;(n=e.call(this,t)||this)._loader=new l.E;var i=n._loader;return i.setCrossOrigin("anonymous"),i.setDRACOLoader(p),i.setKTX2Loader(f.detectSupport(t.renderer.threeRenderer)),n}(0,r.Z)(t,e),t.setMeshoptDecoder=function(){var e=(0,i.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var o=document.createElement("script");o.addEventListener("load",(0,i.Z)(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.MeshoptDecoder.ready;case 2:t.meshoptDecoder=window.MeshoptDecoder,document.body.removeChild(o),e();case 5:case"end":return n.stop()}}),n)})))),o.addEventListener("error",(function(){document.body.removeChild(o),r()})),o.src=new URL(n,location.href).href,document.body.appendChild(o)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var n=t.prototype;return n.load=function(e){var n=this,i=this._view3D,r=this._loader,o=(0,_.uh)(i,e);return p.setDecoderPath(i.dracoPath),f.setTranscoderPath(i.ktxPath),t.meshoptDecoder&&r.setMeshoptDecoder(t.meshoptDecoder),r.manager=s.tEQ,new Promise((function(t,i){try{r.load(e,(function(i){var r=n._parseToModel(i,e);t(r)}),(function(t){return n._onLoadingProgress(t,e,o)}),(function(e){o.initialized=!0,i(e)}))}catch(a){i(a)}}))},n.loadFromFiles=function(e){var n=this,i=this._view3D,r=this._loader,o=[],a=function(){o.forEach((function(e){URL.revokeObjectURL(e)}))};return p.setDecoderPath(i.dracoPath),f.setTranscoderPath(i.ktxPath),t.meshoptDecoder&&r.setMeshoptDecoder(t.meshoptDecoder),new Promise((function(t,l){if(e.length<=0)l(new Error("No files found"));else{var c=e.find((function(e){return/\.(gltf|glb)$/i.test(e.name)}));if(c){var u=new Map;e.forEach((function(e){u.set(e.name,e)}));var h=URL.createObjectURL(c);o.push(h);var d=new s.lLk;d.setURLModifier((function(e){if(/^data:.*,.*$/i.test(e))return e;var t=/[^\/|\\]+$/.exec(e),n=t&&t[0]||"";if(u.has(n)){var i=u.get(n),r=URL.createObjectURL(i);return o.push(r),r}return e}));var v=(0,_.uh)(i,h);r.manager=d,r.load(h,(function(e){var i=n._parseToModel(e,c.name);a(),t(i)}),(function(e){return n._onLoadingProgress(e,h,v)}),(function(e){v.initialized=!0,a(),l(e)}))}else l(new Error("No glTF file found"))}}))},n._parseToModel=function(e,t){var n=this._view3D,r=n.fixSkinnedBbox;e.scenes.forEach((function(e){e.traverse((function(e){e.frustumCulled=!1}))}));var o=n.renderer.threeRenderer.capabilities.maxTextureSize,s=[];e.scenes.forEach((function(e){e.traverse((function(e){e.isMesh&&s.push(e)}))}));var l=s.reduce((function(e,t){return[].concat(e,Array.isArray(t.material)?t.material:[t.material])}),[]).reduce((function(e,t){return[].concat(e,d.xI.filter((function(e){return t[e]})).map((function(e){return t[e]})))}),[]),c=e.parser.associations,u=e.parser.json,_=l.filter((function(e){return c.has(e)})).map((function(e){return u.textures[c.get(e).textures]})),v=Array.from(new Set(_).values()).reduce((function(e,t,n){var i=t.extensions&&t.extensions[d.ei],r=t.extras&&t.extras[d.Fy];if(!i&&!r)return e;var a=l[n];return(i?t.extensions[d.ei].levels:t.extras[d.Fy].levels).forEach((function(t,n){var i=t.index;t.size>o||(e[n]||(e[n]=[]),e[n].push({index:i,texture:a}))})),e}),[]),p=v.map((function(){return!1}));v.forEach(function(){var t=(0,i.Z)(a().mark((function t(i,r){var o,s;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(i.map((function(t){var n=t.index;return e.parser.getDependency("texture",n)})));case 2:if(o=t.sent,s=p.slice(r+1).some((function(e){return!!e})),p[r]=!0,!s){t.next=7;break}return t.abrupt("return");case 7:o.forEach((function(e,t){var r=i[t].texture;r.image=e.image,r.needsUpdate=!0,n.renderer.renderSingleFrame()}));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());var f=[];if(e.parser.json.extras&&e.parser.json.extras[d.HZ]){var m=e.parser.json.extras[d.HZ];f.push.apply(f,n.annotation.parse(m))}return new h.Z({src:t,scenes:e.scenes,annotations:f,animations:e.animations,fixSkinnedBbox:r})},t}(v.Z);t.Z=m},1351:function(e,t,n){var i=n(6532);t.Z=function(e){var t=this;this._onLoadingProgress=function(e,n,r){var o=t._view3D;r.initialized=!0,r.lengthComputable=e.lengthComputable,r.loaded=e.loaded,r.total=e.total,o.trigger(i.FP.PROGRESS,{type:i.FP.PROGRESS,target:o,src:n,lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total})},this._view3D=e}},4943:function(e,t,n){n.d(t,{Z:function(){return k}});var i=n(5861),r=n(3144),o=n(7757),a=n.n(o),s=n(2451),l=n(6532),c=n(7450),u=n(4412),h=function(){function e(e,t,n){var i=this,r=void 0===n?{}:n,o=r.position,a=void 0===o?k.POSITION.TOP:o,l=r.order,h=void 0===l?9999:l;this._onResize=function(){i._rootBbox=i._trackEl.getBoundingClientRect()},this._onRender=function(e){var t=e.target.animator,n=t.activeAnimationIndex,r=t.activeAnimation,o=t.actions[n];if(r&&o){var a=o.time/r.duration;i._fill(a)}},this._onMouseDown=function(e){if(e.button===s.T.LEFT){var t=i._view3D.animator,n=t.activeAnimationIndex,r=t.actions[n];e.preventDefault(),window.addEventListener(s.FP.MOUSE_MOVE,i._onMouseMove,!1),window.addEventListener(s.FP.MOUSE_UP,i._onMouseUp,!1),i._rootBbox=i._trackEl.getBoundingClientRect(),i._showThumb(),i._origTimeScale=r.getEffectiveTimeScale(),i._setAnimationTimeScale(0),i._updateAnimationProgress(e.pageX)}},this._onMouseMove=function(e){e.preventDefault(),i._updateAnimationProgress(e.pageX)},this._onMouseUp=function(){window.removeEventListener(s.FP.MOUSE_MOVE,i._onMouseMove,!1),window.removeEventListener(s.FP.MOUSE_UP,i._onMouseUp,!1),i._hideThumb(),i._setAnimationTimeScale(i._origTimeScale)},this._onTouchStart=function(e){if(!(e.touches.length>1)){var t=e.touches[0],n=i._view3D.animator,r=n.activeAnimationIndex,o=n.actions[r];i._rootBbox=i._trackEl.getBoundingClientRect(),i._showThumb(),i._firstTouch={x:t.pageX,y:t.pageY},i._origTimeScale=o.getEffectiveTimeScale(),i._setAnimationTimeScale(0),i._updateAnimationProgress(t.pageX)}},this._onTouchMove=function(e){if(!(e.touches.length>1||i._scrolling)){var t=e.touches[0],n=i._view3D.scrollable,r=i._firstTouch;if(r){if(n){var o=new u.FM8(t.pageX,t.pageY).sub(new u.FM8(r.x,r.y));if(Math.abs(o.y)>Math.abs(o.x))return i._scrolling=!0,void i._release()}i._firstTouch=null}e.cancelable&&e.preventDefault(),e.stopPropagation(),i._setAnimationTimeScale(0),i._updateAnimationProgress(t.pageX)}},this._onTouchEnd=function(e){e.touches.length>0||(i._release(),i._scrolling=!1)},this._updateAnimationProgress=function(e){var t=i._view3D,n=i._rootBbox,r=i._thumbEl,o=t.animator,a=o.activeAnimationIndex,s=o.activeAnimation,l=o.actions[a];if(s&&l){var u=(e-n.x)/n.width,h=(0,c.uZ)(u,0,1)*s.duration;l.time=h;var d=Math.floor(h),_=Math.floor(100*(h-d)),v=function(e){return""+"0".repeat(Math.max(2-e.toString().length,0))+e};r.setAttribute("data-time",v(d)+":"+v(_)),t.renderer.renderSingleFrame()}},this.position=a,this.order=h,this._view3D=e,this._controlBar=t,this._createElements(),this._enabled=!1,this._firstTouch=null,this._scrolling=!1,this._origTimeScale=1}var t=e.prototype;return t.enable=function(){var e=this._view3D;this._enabled||(this._rootBbox=this._trackEl.getBoundingClientRect(),this._enabled=!0,e.on(l.FP.RESIZE,this._onResize),e.on(l.FP.RENDER,this._onRender),this._fill(0),this.enableInput())},t.disable=function(){var e=this._view3D;this._enabled&&(this._enabled=!1,e.off(l.FP.RESIZE,this._onResize),e.off(l.FP.RENDER,this._onRender),this.disableInput())},t.enableInput=function(){var e=this._rootEl,t=this._view3D;this._firstTouch=null,this._scrolling=!1,t.animator.animationCount<=0||(e.addEventListener(s.FP.MOUSE_DOWN,this._onMouseDown),e.addEventListener(s.FP.TOUCH_START,this._onTouchStart,{passive:!1}),e.addEventListener(s.FP.TOUCH_MOVE,this._onTouchMove,{passive:!1}),e.addEventListener(s.FP.TOUCH_END,this._onTouchEnd))},t.disableInput=function(){var e=this._rootEl;e.removeEventListener(s.FP.MOUSE_DOWN,this._onMouseDown),window.removeEventListener(s.FP.MOUSE_MOVE,this._onMouseMove,!1),window.removeEventListener(s.FP.MOUSE_UP,this._onMouseUp,!1),e.removeEventListener(s.FP.TOUCH_START,this._onTouchStart),e.removeEventListener(s.FP.TOUCH_MOVE,this._onTouchMove),e.removeEventListener(s.FP.TOUCH_END,this._onTouchEnd)},t._createElements=function(){var e=this._controlBar,t=Object.assign({},e.className,k.DEFAULT_CLASS),n=document.createElement(s.yy);n.classList.add(t.PROGRESS_ROOT),n.draggable=!1;var i=document.createElement(s.yy);i.classList.add(t.PROGRESS_TRACK);var r=document.createElement(s.yy);r.classList.add(t.PROGRESS_THUMB);var o=document.createElement(s.yy);o.classList.add(t.PROGRESS_FILLER),i.appendChild(o),i.appendChild(r),n.appendChild(i),this._rootEl=n,this._trackEl=i,this._thumbEl=r,this._fillerEl=o},t._fill=function(e){this._fillerEl.style.width=100*e+"%",this._thumbEl.style.transform="translateX("+e*this._rootBbox.width+"px)"},t._release=function(){this._hideThumb(),this._setAnimationTimeScale(this._origTimeScale)},t._showThumb=function(){var e=this._thumbEl,t=this._controlBar,n=Object.assign({},t.className,k.DEFAULT_CLASS);e.classList.add(n.VISIBLE)},t._hideThumb=function(){var e=this._thumbEl,t=this._controlBar,n=Object.assign({},t.className,k.DEFAULT_CLASS);e.classList.remove(n.VISIBLE)},t._setAnimationTimeScale=function(e){var t=this._view3D.animator,n=t.activeAnimationIndex,i=t.activeAnimation,r=t.actions[n];i&&r&&r.setEffectiveTimeScale(e)},(0,r.Z)(e,[{key:"element",get:function(){return this._rootEl}},{key:"enabled",get:function(){return this._enabled}}]),e}(),d='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" height="48" width="48"><path d="M16 37.85V9.85L38 23.85Z"/></svg>',_=function(){function e(e,t,n){var i=this,r=void 0===n?{}:n,o=r.position,a=void 0===o?k.POSITION.LEFT:o,s=r.order,l=void 0===s?9999:s;this._updateIcon=function(){var e=i._view3D;e.animator.paused!==i._paused&&(i._paused=e.animator.paused,i._element.innerHTML=i._paused?d:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" height="48" width="48"><path d="M28.25 38V10H36V38ZM12 38V10H19.75V38Z"/></svg>')},this._onClick=function(){var e=i._view3D.animator;e.paused?e.resume():e.pause(),i._updateIcon()},this.position=a,this.order=l,this._view3D=e,this._element=this._createButton(t),this._enabled=!1,this._paused=!0}var t=e.prototype;return t.enable=function(){this._enabled||(this._view3D.on(l.FP.RENDER,this._updateIcon),this._element.addEventListener(s.FP.CLICK,this._onClick),this._enabled=!0)},t.disable=function(){this._enabled&&(this._view3D.off(l.FP.RENDER,this._updateIcon),this._element.removeEventListener(s.FP.CLICK,this._onClick),this._enabled=!1)},t._createButton=function(e){var t=document.createElement(s.L2),n=Object.assign({},e.className,k.DEFAULT_CLASS);return t.classList.add(n.CONTROLS_ITEM),t.innerHTML=d,t},(0,r.Z)(e,[{key:"element",get:function(){return this._element}},{key:"enabled",get:function(){return this._enabled}}]),e}(),v=function(){function e(e,t,n){var i=this,r=void 0===n?{}:n,o=r.position,a=void 0===o?k.POSITION.LEFT:o,l=r.order,c=void 0===l?9999:l;this._updateAnimations=function(){for(var e=i._view3D,t=i._controlBar,n=e.animator,r=i._rootEl,o=i._nameEl,a=i._itemListEl,l=n.clips,c=Object.assign({},t.className,k.DEFAULT_CLASS);a.firstChild;)a.removeChild(a.firstChild);if(l.length<=0)r.classList.add(c.DISABLED);else{r.classList.remove(c.DISABLED);var u=l.map((function(e){var t=document.createElement(s.yy);return t.classList.add(c.ANIMATION_ITEM),t.innerHTML=e.name,t})),h=function(e,t){u[t].classList.add(c.ANIMATION_SELECTED),o.innerHTML=e.name};l.forEach((function(e,t){var r=u[t];t===n.activeAnimationIndex&&h(e,t),r.addEventListener(s.FP.CLICK,(function(r){var o=n.paused;n.play(t),o&&n.pause(),u.forEach((function(e){e.classList.remove(c.ANIMATION_SELECTED)})),h(e,t),i._hideList(),r.stopPropagation()})),a.appendChild(r)}))}},this._toggleList=function(e){var t=i._controlBar,n=i._itemListEl,r=Object.assign({},t.className,k.DEFAULT_CLASS);n.classList.toggle(r.VISIBLE),n.classList.contains(r.VISIBLE)&&i._view3D.rootEl.addEventListener(s.FP.CLICK,i._hideList),e.stopPropagation()},this._hideList=function(){var e=i._controlBar,t=i._itemListEl,n=Object.assign({},e.className,k.DEFAULT_CLASS);t.classList.contains(n.VISIBLE)&&t.classList.remove(n.VISIBLE)},this.position=a,this.order=c,this._view3D=e,this._controlBar=t,this._createElements(),this._enabled=!1}var t=e.prototype;return t.enable=function(){this._enabled||(this._view3D.initialized&&this._updateAnimations(),this._view3D.on(l.FP.MODEL_CHANGE,this._updateAnimations),this._nameEl.addEventListener(s.FP.CLICK,this._toggleList),this._enabled=!0)},t.disable=function(){this._enabled&&(this._view3D.off(l.FP.MODEL_CHANGE,this._updateAnimations),this._view3D.rootEl.removeEventListener(s.FP.CLICK,this._hideList),this._nameEl.removeEventListener(s.FP.CLICK,this._toggleList),this._enabled=!1)},t._createElements=function(){var e=this._controlBar,t=document.createElement(s.yy),n=document.createElement(s.yy),i=document.createElement(s.yy),r=Object.assign({},e.className,k.DEFAULT_CLASS);t.classList.add(r.CONTROLS_ITEM),t.classList.add(r.DISABLED),n.classList.add(r.ANIMATION_NAME),i.classList.add(r.ANIMATION_LIST),t.appendChild(n),t.appendChild(i),this._rootEl=t,this._nameEl=n,this._itemListEl=i},(0,r.Z)(e,[{key:"element",get:function(){return this._rootEl}},{key:"enabled",get:function(){return this._enabled}}]),e}(),p=n(8906),f=["requestFullscreen","webkitRequestFullscreen","webkitRequestFullScreen","webkitCancelFullScreen","mozRequestFullScreen","msRequestFullscreen"],m=["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"],g=["exitFullscreen","webkitExitFullscreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"],E=function(){function e(e,t,n){var i=this,r=void 0===n?{}:n,o=r.position,a=void 0===o?k.POSITION.RIGHT:o,s=r.order,l=void 0===s?9999:s;this._onClick=function(){var e=i._view3D.rootEl;i._isFullscreen()?i._exitFullscreen():i._requestFullscreen(e)},this.position=a,this.order=l,this._view3D=e,this._element=this._createButton(t),this._enabled=!1}var t=e.prototype;return t.enable=function(){this._enabled||(this._element.addEventListener(s.FP.CLICK,this._onClick),this._enabled=!0)},t.disable=function(){this._enabled&&(this._element.removeEventListener(s.FP.CLICK,this._onClick),this._enabled=!1)},t._isFullscreen=function(){if(!document)return!1;for(var e,t=(0,p.Z)(m);!(e=t()).done;){var n=e.value;if(document[n])return!0}return!1},t._requestFullscreen=function(e){for(var t,n=(0,p.Z)(f);!(t=n()).done;){var i=e[t.value];i&&i.call(e)}},t._exitFullscreen=function(){for(var e,t=(0,p.Z)(g);!(e=t()).done;){var n=e.value,i=document[n];i&&i.call(document)}},t._createButton=function(e){var t=document.createElement(s.L2),n=Object.assign({},e.className,k.DEFAULT_CLASS);return t.classList.add(n.CONTROLS_ITEM),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" height="48" width="48"><path d="M10 38v-9.65h3V35h6.65v3Zm0-18.35V10h9.65v3H13v6.65ZM28.35 38v-3H35v-6.65h3V38ZM35 19.65V13h-6.65v-3H38v9.65Z"/></svg>',t},(0,r.Z)(e,[{key:"element",get:function(){return this._element}},{key:"enabled",get:function(){return this._enabled}}]),e}(),w=n(7130),y=n(1372),b=function(){function e(e,t,n){var i=this,r=void 0===n?{}:n,o=r.axisWidth,a=void 0===o?5:o,s=r.font,l=void 0===s?"14px sans-serif":s,c=r.xAxisColor,h=void 0===c?"#ef2746":c,d=r.yAxisColor,_=void 0===d?"#a7c031":d,v=r.zAxisColor,p=void 0===v?"#6571a6":v;this._onRender=function(){var e=i._view3D,t=i._ctx,n=i._canvasSize,r=e.camera.threeCamera;if(t&&e.model){t.clearRect(0,0,n.x,n.y);var o=r.quaternion.clone();o.invert();var a=new u.Pa4(1,0,0).applyQuaternion(o),s=new u.Pa4(0,1,0).applyQuaternion(o),l=new u.Pa4(0,0,1).applyQuaternion(o),c=new u.FM8(.5,.5).multiply(n);t.lineCap="round",t.lineWidth=i.axisWidth;var h=new u.Ilk(i.xAxisColor),d=new u.Ilk(i.yAxisColor),_=new u.Ilk(i.zAxisColor);[{idx:0,axis:"X",color:h,pos:a,negative:!1},{idx:1,axis:"Y",color:d,pos:s,negative:!1},{idx:2,axis:"Z",color:_,pos:l,negative:!1},{idx:3,axis:"X",color:h,pos:a.clone().negate(),negative:!0},{idx:4,axis:"Y",color:d,pos:s.clone().negate(),negative:!0},{idx:5,axis:"Z",color:_,pos:l.clone().negate(),negative:!0}].sort((function(e,t){return e.pos.z-t.pos.z})).forEach((function(e,n){var r=e.axis,o=e.pos,a=e.color,s=e.negative,l=e.idx,u=i._getScreenPos(o),h=o.z>=0?1:.6,d=i._getColorRGBAString(a,h);s||(t.strokeStyle=d,t.beginPath(),t.moveTo(c.x,c.y),t.lineTo(u.x,u.y),t.stroke(),t.globalCompositeOperation="destination-out",t.fillStyle="white",t.beginPath(),t.ellipse(u.x,u.y,10,10,0,0,2*Math.PI),t.fill(),t.globalCompositeOperation="source-over"),t.fillStyle=d,t.beginPath(),t.ellipse(u.x,u.y,10,10,0,0,2*Math.PI),t.fill(),s||(t.font=i.font,t.fillStyle="white",t.textAlign="center",t.textBaseline="middle",t.fillText(r,u.x,u.y));var _=i._axisEls[l];_.style.left=u.x+"px",_.style.top=u.y+"px",_.style.zIndex=n.toString()}))}},this.axisWidth=a,this.font=l,this.xAxisColor=h,this.yAxisColor=_,this.zAxisColor=p,this._view3D=e,this._createElement(t),this._ctx=this._canvasEl.getContext("2d"),this._enabled=!1,this._canvasSize=new u.FM8}var t=e.prototype;return t.enable=function(){if(!this._enabled&&this._ctx){var e=this._rootEl,t=this._canvasEl,n=this._view3D;this._enabled=!0,n.rootEl.appendChild(e),n.on(l.FP.RENDER,this._onRender),this._canvasSize.set(t.clientWidth,t.clientHeight),t.width=this._canvasSize.x,t.height=this._canvasSize.y;var i=[new w.Z(-90,0,0),new w.Z(0,90,0),new w.Z(0,0,0),new w.Z(90,0,0),new w.Z(0,-90,0),new w.Z(180,0,0)];i.forEach((function(e){e.pivot.copy(n.camera.defaultPose.pivot)})),this._axisClickListeners=this._axisEls.map((function(e,t){var r=i[t],o=function(){n.camera.reset(y.zn,y.Xt,r)};return e.addEventListener(s.FP.CLICK,o),o}))}},t.disable=function(){var e=this;if(this._enabled){this._enabled=!1;var t=this._view3D.rootEl,n=this._rootEl;n&&n.parentElement===t&&t.removeChild(n),this._view3D.off(l.FP.RENDER,this._onRender),this._axisEls.forEach((function(t,n){var i=e._axisClickListeners[n];t.removeEventListener(s.FP.CLICK,i)})),this._axisClickListeners=[]}},t._createElement=function(e){var t=document.createElement(s.yy),n=document.createElement("canvas"),i=(0,c.w6)(6).map((function(){return document.createElement(s.yy)})),r=Object.assign({},e.className,k.DEFAULT_CLASS);t.classList.add(r.GIZMO_ROOT),t.appendChild(n),i.forEach((function(e){e.classList.add(r.GIZMO_AXIS),t.appendChild(e)})),this._rootEl=t,this._canvasEl=n,this._axisEls=i},t._getScreenPos=function(e){var t=this._canvasSize;return new u.FM8(e.x,-e.y).multiplyScalar(.8).addScalar(1).multiplyScalar(.5).multiply(t)},t._getColorRGBAString=function(e,t){return"rgba("+Math.floor(255*e.r)+","+Math.floor(255*e.g)+","+Math.floor(255*e.b)+","+t+")"},(0,r.Z)(e,[{key:"element",get:function(){return this._rootEl}},{key:"enabled",get:function(){return this._enabled}}]),e}(),T=function(){function e(e,t,n){var i=this,r=void 0===n?{}:n,o=r.position,a=void 0===o?k.POSITION.RIGHT:o,s=r.order,l=void 0===s?9999:s,c=r.duration,u=void 0===c?500:c;this._onClick=function(){i._view3D.camera.reset(i.duration)},this.position=a,this.order=l,this.duration=u,this._view3D=e,this._element=this._createButton(t),this._enabled=!1}var t=e.prototype;return t.enable=function(){this._enabled||(this._element.addEventListener(s.FP.CLICK,this._onClick),this._enabled=!0)},t.disable=function(){this._enabled&&(this._element.removeEventListener(s.FP.CLICK,this._onClick),this._enabled=!1)},t._createButton=function(e){var t=document.createElement(s.L2),n=Object.assign({},e.className,k.DEFAULT_CLASS);return t.classList.add(n.CONTROLS_ITEM),t.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" height="48" width="48"><path d="M24 44q-3.75 0-7.025-1.4-3.275-1.4-5.725-3.85Q8.8 36.3 7.4 33.025 6 29.75 6 26h3q0 6.25 4.375 10.625T24 41q6.25 0 10.625-4.375T39 26q0-6.25-4.25-10.625T24.25 11H23.1l3.65 3.65-2.05 2.1-7.35-7.35 7.35-7.35 2.05 2.05-3.9 3.9H24q3.75 0 7.025 1.4 3.275 1.4 5.725 3.85 2.45 2.45 3.85 5.725Q42 22.25 42 26q0 3.75-1.4 7.025-1.4 3.275-3.85 5.725-2.45 2.45-5.725 3.85Q27.75 44 24 44Z"/></svg>',t},(0,r.Z)(e,[{key:"element",get:function(){return this._element}},{key:"enabled",get:function(){return this._enabled}}]),e}(),O=function(){function e(t){var n=this,i=void 0===t?{}:t,r=i.autoHide,o=void 0===r||r,a=i.className,s=void 0===a?{}:a,l=i.progressBar,u=void 0===l||l,h=i.playButton,d=void 0===h||h,_=i.animationSelector,v=void 0===_||_,p=i.fullscreenButton,f=void 0===p||p,m=i.navigationGizmo,g=void 0===m||m,E=i.cameraResetButton,w=void 0===E||E;this.show=function(){var t=n._rootEl,i=Object.assign({},e.DEFAULT_CLASS,n.className);t.classList.add(i.VISIBLE)},this.hide=function(){var t=n._rootEl,i=Object.assign({},e.DEFAULT_CLASS,n.className);t.classList.remove(i.VISIBLE)},this._updateModelParams=function(){n._items.forEach((function(e){e.disable(),e.enable()}))},this._hideAfterDelay=function(){var e=(0,c.PO)(n.autoHide).delay,t=void 0===e?0:e;n._autoHideTimer&&(window.clearTimeout(n._autoHideTimer),n._autoHideTimer=-1),t<=0?n.hide():n._autoHideTimer=window.setTimeout(n.hide,t)},this.autoHide=o,this.className=s,this.progressBar=u,this.playButton=d,this.animationSelector=v,this.fullscreenButton=f,this.navigationGizmo=g,this.cameraResetButton=w,this._items=[],this._initElements(),this._autoHideTimer=-1}var t=e.prototype;return t.init=function(){var e=(0,i.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._attachElements(t),t.model&&this._updateModelParams(),this._items=this._createDefaultItems(t),this._addItemElements(),this._items.forEach((function(e){e.enable()})),t.on(l.FP.MODEL_CHANGE,this._updateModelParams),this.show(),this._setupAutoHide(t);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.teardown=function(e){var t=e.rootEl;t.removeEventListener(s.FP.POINTER_ENTER,this.show),t.removeEventListener(s.FP.POINTER_LEAVE,this._hideAfterDelay),this._removeElements(e),this._items.forEach((function(e){e.disable()})),this._items=[],e.off(l.FP.MODEL_CHANGE,this._updateModelParams),window.clearTimeout(this._autoHideTimer)},t._initElements=function(){var t=Object.assign({},e.DEFAULT_CLASS,this.className),n=document.createElement(s.yy);n.classList.add(t.ROOT),this._rootEl=n;var i=document.createElement(s.yy);i.classList.add(t.CONTROLS_BG),n.appendChild(i);var r=document.createElement(s.yy),o=document.createElement(s.yy),a=document.createElement(s.yy),l=document.createElement(s.yy);r.classList.add(t.CONTROLS_TOP),o.classList.add(t.CONTROLS_SIDE),a.classList.add(t.CONTROLS_LEFT),l.classList.add(t.CONTROLS_RIGHT),n.appendChild(r),o.appendChild(a),o.appendChild(l),n.appendChild(o),this._topControlsWrapper=r,this._leftControlsWrapper=a,this._rightControlsWrapper=l},t._addItemElements=function(){var t,n=this._topControlsWrapper,i=this._leftControlsWrapper,r=this._rightControlsWrapper,o=this._items.filter((function(e){return e.position&&null!=e.order})),a=((t={})[e.POSITION.TOP]={parentEl:n,items:[]},t[e.POSITION.LEFT]={parentEl:i,items:[]},t[e.POSITION.RIGHT]={parentEl:r,items:[]},t);o.forEach((function(e){a[e.position].items.push(e)})),Object.keys(a).forEach((function(e){var t=a[e],n=t.parentEl,i=t.items;i.sort((function(e,t){return e.order-t.order})),i.forEach((function(e){n.appendChild(e.element)}))}))},t._attachElements=function(e){e.rootEl.appendChild(this._rootEl)},t._removeElements=function(e){var t=this._rootEl;[this._topControlsWrapper,this._leftControlsWrapper,this._rightControlsWrapper].forEach((function(e){for(;e.firstChild;)e.removeChild(e.firstChild)})),t.parentElement===e.rootEl&&e.rootEl.removeChild(t)},t._setupAutoHide=function(e){var t=this;if(this.autoHide){var n=(0,c.PO)(this.autoHide).initialDelay,i=void 0===n?3e3:n,r=e.rootEl;this._autoHideTimer=window.setTimeout((function(){t.hide()}),i),r.addEventListener(s.FP.POINTER_ENTER,this.show),r.addEventListener(s.FP.POINTER_LEAVE,this._hideAfterDelay)}},t._createDefaultItems=function(e){var t=[];return this.progressBar&&t.push(new h(e,this,(0,c.PO)(this.progressBar))),this.playButton&&t.push(new _(e,this,(0,c.PO)(this.playButton))),this.animationSelector&&t.push(new v(e,this,(0,c.PO)(this.animationSelector))),this.cameraResetButton&&t.push(new T(e,this,(0,c.PO)(this.cameraResetButton))),this.fullscreenButton&&t.push(new E(e,this,(0,c.PO)(this.fullscreenButton))),this.navigationGizmo&&t.push(new b(e,this,(0,c.PO)(this.navigationGizmo))),t},(0,r.Z)(e,[{key:"rootEl",get:function(){return this._rootEl}},{key:"items",get:function(){return this._items}}]),e}();O.DEFAULT_CLASS={ROOT:"view3d-control-bar",VISIBLE:"visible",DISABLED:"disabled",CONTROLS_BG:"view3d-controls-background",CONTROLS_SIDE:"view3d-side-controls",CONTROLS_TOP:"view3d-top-controls",CONTROLS_LEFT:"view3d-left-controls",CONTROLS_RIGHT:"view3d-right-controls",CONTROLS_ITEM:"view3d-control-item",PROGRESS_ROOT:"view3d-progress-bar",PROGRESS_TRACK:"view3d-progress-track",PROGRESS_THUMB:"view3d-progress-thumb",PROGRESS_FILLER:"view3d-progress-filler",ANIMATION_NAME:"view3d-animation-name",ANIMATION_LIST:"view3d-animation-list",ANIMATION_ITEM:"view3d-animation-item",ANIMATION_SELECTED:"selected",GIZMO_ROOT:"view3d-gizmo",GIZMO_AXIS:"view3d-gizmo-axis"},O.POSITION={TOP:"top",LEFT:"left",RIGHT:"right"};var k=O},9294:function(e,t,n){var i=n(5861),r=n(7757),o=n.n(r),a=n(6532),s=n(2451),l=function(){function e(t){var n=this;void 0===t&&(t={}),this._startLoading=function(t){var i=t.target;if(0===t.level){var r=n._options,o=r.type,l=void 0===o?e.TYPE.DEFAULT:o,c=r.loadingLabel,u=void 0===c?"Loading 3D Model...":c,h=r.parsingLabel,d=void 0===h?"Parsing 3D Model...":h,_=r.labelColor,v=void 0===_?"#ffffff":_,p=r.barWidth,f=void 0===p?"70%":p,m=r.barHeight,g=void 0===m?"10px":m,E=r.barBackground,w=void 0===E?"#bbbbbb":E,y=r.barForeground,b=void 0===y?"#3e8ed0":y,T=r.spinnerWidth,O=void 0===T?"30%":T,k=r.overlayBackground,P=void 0===k?"rgba(0, 0, 0, 0.3)":k,S=document.createElement(s.yy),x=document.createElement(s.yy),C=document.createElement(s.yy),N=document.createElement(s.yy),A=document.createElement(s.yy),D=Object.assign({},n._options.className,e.DEFAULT_CLASS);if(S.classList.add(D.OVERLAY),x.classList.add(D.WRAPPER),N.classList.add(D.BASE),C.classList.add(D.LABEL),A.classList.add(D.FILLER),S.style.backgroundColor=P,l!==e.TYPE.SPINNER?(N.style.height=g,N.style.backgroundColor=w,A.style.backgroundColor=b):(N.classList.add(D.TYPE_SPINNER),N.style.width=O,N.style.paddingTop=O,A.style.borderWidth=g,A.style.borderColor=b,A.style.borderLeftColor="transparent"),l===e.TYPE.TOP?S.classList.add(D.TYPE_TOP):l===e.TYPE.DEFAULT&&(N.style.width=f),C.style.color=v,C.innerText=u,N.appendChild(A),x.appendChild(N),x.appendChild(C),S.appendChild(x),i.rootEl.appendChild(S),l!==e.TYPE.SPINNER){var L=function(){if(i.loadingContext.every((function(e){return e.initialized}))){var e=i.loadingContext.filter((function(e){return e.lengthComputable})).reduce((function(e,t){return e[0]+=t.loaded,e[1]+=t.total,e}),[0,0]),t=e[0],n=e[1];if(!(n<=0)){var r=t/n*100;A.style.width=r.toFixed(2)+"%",t===n&&(C.innerText=d)}}};i.on(a.FP.PROGRESS,L),i.once(a.FP.LOAD_FINISH,(function(){i.off(a.FP.PROGRESS,L)}))}i.once(a.FP.LOAD_FINISH,(function(){n._removeOverlay(i)})),n._overlay=S}},this._options=t}var t=e.prototype;return t.init=function(){var e=(0,i.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.on(a.FP.LOAD_START,this._startLoading);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.teardown=function(e){e.off(a.FP.LOAD_START,this._startLoading),this._removeOverlay(e)},t._removeOverlay=function(e){var t=this._overlay;t&&(t.parentElement===e.rootEl&&e.rootEl.removeChild(t),this._overlay=null)},e}();l.DEFAULT_CLASS={OVERLAY:"view3d-lb-overlay",WRAPPER:"view3d-lb-wrapper",BASE:"view3d-lb-base",LABEL:"view3d-lb-label",FILLER:"view3d-lb-filler",TYPE_SPINNER:"is-spinner",TYPE_TOP:"is-top"},l.TYPE={DEFAULT:"default",TOP:"top",SPINNER:"spinner"},t.Z=l},7450:function(e,t,n){n.d(t,{Bb:function(){return N},Dc:function(){return p},Gr:function(){return S},PO:function(){return b},Pr:function(){return T},S3:function(){return c},TS:function(){return E},YC:function(){return O},c$:function(){return v},cM:function(){return y},cy:function(){return x},dN:function(){return d},dv:function(){return k},gE:function(){return h},hj:function(){return a},hl:function(){return w},kK:function(){return l},pU:function(){return A},sb:function(){return u},t7:function(){return m},uZ:function(){return f},uh:function(){return P},w6:function(){return _},zc:function(){return g}});var i=n(4412),r=n(662),o=n(7923),a=function(e){return"number"==typeof e},s=function(e){return"string"==typeof e},l=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE},c=function(e,t){var n=null;if(s(e)){var i=(t||document).querySelector(e);if(!i)return null;n=i}else l(e)&&(n=e);return n},u=function(e,t){var n=c(e,t);if(!n)throw s(e)?new r.Z(o.ZP.MESSAGES.ELEMENT_NOT_FOUND(e),o.ZP.CODES.ELEMENT_NOT_FOUND):new r.Z(o.ZP.MESSAGES.WRONG_TYPE(e,["HTMLElement","string"]),o.ZP.CODES.WRONG_TYPE);return n},h=function(e,t){var n=e.querySelector(t);if(!n)throw new r.Z(o.ZP.MESSAGES.CANVAS_NOT_FOUND,o.ZP.CODES.CANVAS_NOT_FOUND);return n},d=function(e){if(!s(e))return!1;var t=document.createDocumentFragment();try{t.querySelector(e)}catch(n){return!1}return!0},_=function(e){return!e||e<=0?[]:Array.apply(0,Array(e)).map((function(e,t){return t}))},v=function(e){return e*Math.PI/180},p=function(e){return 180*e/Math.PI},f=function(e,t,n){return Math.max(Math.min(e,n),t)},m=function(e,t,n){return e*(1-n)+t*n},g=function(e,t,n){var i=Math.abs(n-t);if(e<t)e=n-(t-e)%i;else if(e>n){e=t+(e-n)%i}return e},E=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.forEach((function(t){Object.keys(t).forEach((function(n){var i=t[n];Array.isArray(e[n])&&Array.isArray(i)?e[n]=[].concat(e[n],i):e[n]=i}))})),e},w=function(e){for(var t=1;t<e;)t*=2;return t},y=function(e,t,n){var r=(new i.FM8).subVectors(t,e).normalize(),o=(new i.FM8).subVectors(n,e).normalize().angle()-r.angle(),a=-Math.sign(o)*(2*Math.PI-Math.abs(o));return Math.abs(o)<Math.abs(a)?o:a},b=function(e){return"object"==typeof e?e:{}},T=function(e){return e?"true":"false"},O=function(e,t,n){var r=v(t),o=v(n),a=new i.Pa4(0,0,0);return a.y=e*Math.sin(o),a.z=e*Math.cos(o),a.x=a.z*Math.sin(-r),a.z=a.z*Math.cos(-r),a},k=function(e){var t=new i.FM8(e.x,e.z),n=new i.FM8;return{yaw:Math.abs(e.y)<=.99?y(n,new i.FM8(0,1),t):0,pitch:Math.atan2(e.y,t.distanceTo(n))}},P=function(e,t){var n={src:t,loaded:0,total:0,lengthComputable:!1,initialized:!1};return e.loadingContext.push(n),n},S=function(e){if(e.normalized&&ArrayBuffer.isView(e.array)){var t=e.array,n=C(t),i=1/(Math.pow(2,8*t.BYTES_PER_ELEMENT)-1);return n?2*i:i}return 1},x=function(e,t,n,r){var o=t.geometry,a=o.attributes.position,s=o.attributes.skinIndex,l=o.attributes.skinWeight,c=t.skeleton.boneMatrices,u=(new i.Pa4).fromBufferAttribute(a,e).multiplyScalar(n),h=new i.Ltg(0,0,0,0),d=new i.Ltg(u.x,u.y,u.z).applyMatrix4(t.bindMatrix),_=[l.getX(e),l.getY(e),l.getZ(e),l.getW(e)].map((function(e){return e*r})),v=[s.getX(e),s.getY(e),s.getZ(e),s.getW(e)];_.forEach((function(e,t){var n=(new i.yGw).fromArray(c,16*v[t]);h.add(d.clone().applyMatrix4(n).multiplyScalar(e))}));var p=(new i.Pa4).fromArray(h.applyMatrix4(t.bindMatrixInverse).toArray());return p.applyMatrix4(t.matrixWorld),p},C=function(e){var t=new e.constructor(1);return t[0]=-1,t[0]<0},N=function(e){if(e.capabilities.isWebGL2)return!0;var t=e.getContext(),n=t.createTexture(),i=!0;try{var r=new Uint16Array(4),o=t.getExtension("OES_texture_half_float");if(o)t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,o.HALF_FLOAT_OES,r),i=t.getError()===t.NO_ERROR;else i=!1}catch(a){i=!1}return t.deleteTexture(n),i},A=function(e,t,n){var r=function(e,t,n){var r;if(!e||t<0||n<0)return null;var o=e.meshes[t],a=null==o||null==(r=o.geometry.index)?void 0:r.array,s=a?_(3).map((function(e){return a[3*n+e]})):null;if(!o||!a||!s||s.some((function(e){return null==e})))return null;var l=o.geometry.getAttribute("position");return s.map((function(e){return(new i.Pa4).fromBufferAttribute(l,e)}))}(e,t,n);if(!r)return null;var o=e.meshes[t],a=o.geometry.getIndex().array.slice(3*n,3*n+3);if(o.isSkinnedMesh){var s=o.geometry,l=s.attributes.position,c=s.attributes.skinWeight,u=S(l),h=S(c);r.forEach((function(e,t){var n=a[t],i=x(n,o,u,h);e.copy(i)}))}else r.forEach((function(e){e.applyMatrix4(o.matrixWorld)}));return r}},8638:function(e,t,n){n.r(t),n.d(t,{assets:function(){return D},contentTitle:function(){return N},default:function(){return M},frontMatter:function(){return C},metadata:function(){return A},toc:function(){return L}});var i=n(7462),r=n(3366),o=(n(7294),n(3905)),a=n(1094),s=n(9877),l=n(8215),c=n(6240),u=["components"],h={toc:[{value:"DOM Structure",id:"dom-structure",level:2},{value:"Setup Script &amp; Styles",id:"setup-script--styles",level:2}]};function d(e){var t=e.components,n=(0,r.Z)(e,u);return(0,o.kt)("wrapper",(0,i.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"dom-structure"},"DOM Structure"),(0,o.kt)("p",null,"View3D requires appropriate DOM structure for initialization.\nThere should be one ",(0,o.kt)("inlineCode",{parentName:"p"},"canvas")," element inside the wrapper element."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'<div id="wrapper-el" class="view3d-wrapper view3d-square">\n  <canvas class="view3d-canvas"></canvas>\n</div>\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'new View3D("#wrapper-el");\n')),(0,o.kt)("p",null,"All class names are optional, but it's needed when you're using our CSS files."),(0,o.kt)("h2",{id:"setup-script--styles"},"Setup Script & Styles"),(0,o.kt)(s.Z,{groupId:"quick-start",defaultValue:"bundler",lazy:!0,values:[{label:"With bundlers",value:"bundler"},{label:"Without bundlers",value:"non-bundler"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"bundler",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'import View3D from "@egjs/view3d";\nimport "@egjs/view3d/css/view3d-bundle.min.css";\n// or import "@egjs/view3d/css/view3d.min.css"; if you don\'t use any plugin or annotations\n\nconst view3D = new View3D("#view3d", {\n  // Options\n})\n'))),(0,o.kt)(l.Z,{value:"non-bundler",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'<script src="https://unpkg.com/@egjs/view3d@latest/dist/view3d.pkgd.min.js"><\/script>\n<link rel="stylesheet" href="https://unpkg.com/@egjs/view3d@latest/css/view3d-bundle.min.css">\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'const view3D = new View3D("#view3d", {\n  // Options\n})\n')))))}d.isMDXComponent=!0;var _=["components"],v={toc:[{value:"Events",id:"events",level:3},{value:"Styles",id:"styles",level:3},{value:"Additional props for react-view3d",id:"additional-props-for-react-view3d",level:3},{value:"Using methods",id:"using-methods",level:3}]};function p(e){var t=e.components,n=(0,r.Z)(e,_);return(0,o.kt)("wrapper",(0,i.Z)({},v,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"You can import and use View3D just like other React components."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'import View3D from "@egjs/react-view3d";\nimport "@egjs/react-view3d/css/view3d-bundle.min.css";\n\n<View3D\n  tag="div"\n  src="URL_TO_YOUR_3D_MODEL"\n  envmap="URL_TO_YOUR_HDR_IMAGE"\n  onReady={e => {\n    // DO_SOMETHING\n  }}\n>\n')),(0,o.kt)("h3",{id:"events"},"Events"),(0,o.kt)("p",null,"Event handlers can be added with ",(0,o.kt)("inlineCode",{parentName:"p"},"on-")," prop.\nHandler names start with ",(0,o.kt)("inlineCode",{parentName:"p"},"on")," and followed by event name, in camelCase."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},(0,o.kt)("em",{parentName:"strong"},"examples"))),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"ready")," - ",(0,o.kt)("inlineCode",{parentName:"li"},"onReady")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"loadError")," - ",(0,o.kt)("inlineCode",{parentName:"li"},"onLoadError"))),(0,o.kt)("h3",{id:"styles"},"Styles"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'import "@egjs/react-view3d/css/view3d-bundle.min.css";\n// or import "@egjs/react-view3d/css/view3d.min.css"; if you don\'t use any plugin or annotations\n')),(0,o.kt)("h3",{id:"additional-props-for-react-view3d"},"Additional props for react-view3d"),(0,o.kt)("p",null,"There're two additional props for View3D"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"tag")," - sets html tag of the ",(0,o.kt)("inlineCode",{parentName:"li"},"view3d-wrapper")," element"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"canvasClass")," - sets additional class for ",(0,o.kt)("inlineCode",{parentName:"li"},"view3d-canvas")," element")),(0,o.kt)("h3",{id:"using-methods"},"Using methods"),(0,o.kt)("p",null,"All properties & methods of View3D is accesible by using a reference of it."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'import { useRef } from "react";\n\nfunction MyView3D() {\n  const view3DRef = useRef();\n\n  return <>\n    <View3D\n      ref={view3DRef}\n      tag="div"\n      src="URL_TO_YOUR_3D_MODEL"\n      envmap="URL_TO_YOUR_HDR_IMAGE"\n    >\n    <button onClick={() => {\n      view3DRef.current.camera.reset();\n    }}>CLICK ME</button>\n  </>;\n}\n')))}p.isMDXComponent=!0;var f=["components"],m={toc:[{value:"Registering",id:"registering",level:2},{value:"Usage",id:"usage",level:2},{value:"Styles",id:"styles",level:3},{value:"Additional props for ngx-view3d",id:"additional-props-for-ngx-view3d",level:3},{value:"Using methods",id:"using-methods",level:3}]};function g(e){var t=e.components,n=(0,r.Z)(e,f);return(0,o.kt)("wrapper",(0,i.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"registering"},"Registering"),(0,o.kt)("p",null,"Start using ngx-view3d by registering ",(0,o.kt)("inlineCode",{parentName:"p"},"NgxView3DModule")," in ",(0,o.kt)("inlineCode",{parentName:"p"},"imports")," section."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"import { NgxView3DModule } from '@egjs/ngx-view3d';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\n\n@NgModule({\n  declarations: [\n    AppComponent\n  ],\n  imports: [\n    BrowserModule,\n    NgxView3DModule // <ngx-view3d> is available\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { } /* Your app */\n")),(0,o.kt)("h2",{id:"usage"},"Usage"),(0,o.kt)("p",null,"You can provide options using ",(0,o.kt)("inlineCode",{parentName:"p"},"options")," prop"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'@Component({\n  selector: \'view3d-demo\',\n  template: `\n    <ngx-view3d\n      [src]="src"\n      [envmap]="envmap"\n      (ready)="onReady($event)"\n    />\n  `\n})\nexport class View3DDemo {\n  public src = "URL_TO_YOUR_3D_MODEL";\n  public envmap = "URL_TO_YOUR_HDR_IMAGE";\n\n  public onReady(evt) {\n    // DO_SOMETHING\n  }\n}\n')),(0,o.kt)("h3",{id:"styles"},"Styles"),(0,o.kt)("p",null,"You can either add our CSS file to ",(0,o.kt)("inlineCode",{parentName:"p"},"styles")," section of ",(0,o.kt)("inlineCode",{parentName:"p"},"angular.json")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'"options": {\n  // ...\n  "styles": [\n    "node_modules/@egjs/ngx-view3d/css/view3d-bundle.min.css"\n    // ... Other global styles\n  ]\n  // ...\n}\n')),(0,o.kt)("p",null,"Or import from other global style file"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-css"},'/* Inside of styles.css */\n@import "@egjs/ngx-view3d/css/view3d-bundle.min.css";\n')),(0,o.kt)("h3",{id:"additional-props-for-ngx-view3d"},"Additional props for ngx-view3d"),(0,o.kt)("p",null,"There's one additional prop for View3D"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"canvasClass")," - sets additional class for ",(0,o.kt)("inlineCode",{parentName:"li"},"view3d-canvas")," element")),(0,o.kt)("h3",{id:"using-methods"},"Using methods"),(0,o.kt)("p",null,"All properties & methods of View3D is accesible using ",(0,o.kt)("inlineCode",{parentName:"p"},"ViewChild")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html",metastring:"title=method.component.html",title:"method.component.html"},'<div>\n  <ngx-view3d\n    #viewer\n    class="view3d-3by1"\n    [src]="\'https://naver.github.io/egjs-view3d/model/RobotExpressive.glb\'"\n    (ready)="onReady($event)"\n  ></ngx-view3d>\n  <button (click)="onClick()">Change Animation</button>\n</div>\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title=method.component.ts",title:"method.component.ts"},'import { Component, ViewChild } from "@angular/core";\n\n@Component({\n  selector: "demo-method",\n  templateUrl: "./method.component.html",\n  styleUrls: ["../app.component.css"]\n})\nexport class MethodComponent {\n  @ViewChild("viewer") public view3D;\n\n  public onReady(evt) {\n    evt.target.animator.play(1);\n  }\n\n  public onClick() {\n    this.view3D.animator.play(2);\n  }\n}\n')))}g.isMDXComponent=!0;var E=["components"],w={toc:[{value:"Registering",id:"registering",level:2},{value:"Global registration",id:"global-registration",level:3},{value:"Local registration",id:"local-registration",level:3},{value:"Usage",id:"usage",level:2},{value:"Styles",id:"styles",level:3},{value:"Additional props for vue-view3d",id:"additional-props-for-vue-view3d",level:3},{value:"Using methods",id:"using-methods",level:3}]};function y(e){var t=e.components,n=(0,r.Z)(e,E);return(0,o.kt)("wrapper",(0,i.Z)({},w,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"registering"},"Registering"),(0,o.kt)("h3",{id:"global-registration"},"Global registration"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:"title=main.js",title:"main.js"},'import Vue from "vue";\nimport View3D from "@egjs/vue-view3d";\nimport "@egjs/vue-view3d/css/view3d-bundle.min.css";\n\n// This will register the component named "View3D"\nVue.use(View3D);\n')),(0,o.kt)("h3",{id:"local-registration"},"Local registration"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'// You have to import the actual component, not the "default"\nimport { View3D } from "@egjs/vue-view3d";\n\nexport default {\n  components: {\n    View3D\n  }\n}\n')),(0,o.kt)("h2",{id:"usage"},"Usage"),(0,o.kt)("p",null,"All options & events are available like the below"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'<template>\n  <View3D\n    src="URL_TO_YOUR_3D_MODEL",\n    envmap="URL_TO_YOUR_HDR_IMAGE",\n    @ready="onReady"\n  />\n</template>\n')),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("ul",{parentName:"div"},(0,o.kt)("li",{parentName:"ul"},"All ",(0,o.kt)("inlineCode",{parentName:"li"},"camelCased")," event names became ",(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"kebab-case"))),(0,o.kt)("li",{parentName:"ul"},"e.g., ",(0,o.kt)("inlineCode",{parentName:"li"},"modelChange")," => ",(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"model-change")))))),(0,o.kt)("h3",{id:"styles"},"Styles"),(0,o.kt)("p",null,"You can import our CSS file like the below"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'import "@egjs/vue-view3d/css/view3d-bundle.css";\n')),(0,o.kt)("h3",{id:"additional-props-for-vue-view3d"},"Additional props for vue-view3d"),(0,o.kt)("p",null,"There're two additional props for View3D"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"tag")," - sets html tag of the ",(0,o.kt)("inlineCode",{parentName:"li"},"view3d-wrapper")," element"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"canvasClass")," - sets additional class for ",(0,o.kt)("inlineCode",{parentName:"li"},"view3d-canvas")," element")),(0,o.kt)("h3",{id:"using-methods"},"Using methods"),(0,o.kt)("p",null,"All properties & methods of View3D is accesible by using a reference of it."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html",metastring:"title=Method.vue",title:"Method.vue"},'<template>\n  <div>\n    <View3D\n      ref="view3d"\n      src="https://naver.github.io/egjs-view3d/model/RobotExpressive.glb"\n      class="view3d-3by1"\n      @ready="this.onReady"\n    />\n    <button @click="this.onClick">Change Animation</button>\n  </div>\n</template>\n<script lang="ts">\nimport Vue from "vue";\n\nexport default Vue.extend({\n  methods: {\n    onReady: evt => {\n      evt.target.animator.play(1);\n    },\n    onClick: function() {\n      this.$refs.view3d.animator.play(2);\n    }\n  }\n})\n<\/script>\n')))}y.isMDXComponent=!0;var b=["components"],T={toc:[{value:"Registering",id:"registering",level:2},{value:"Global registration",id:"global-registration",level:3},{value:"Local registration",id:"local-registration",level:3},{value:"Usage",id:"usage",level:2},{value:"Styles",id:"styles",level:3},{value:"Additional props for vue3-view3d",id:"additional-props-for-vue3-view3d",level:3},{value:"Using methods",id:"using-methods",level:3}]};function O(e){var t=e.components,n=(0,r.Z)(e,b);return(0,o.kt)("wrapper",(0,i.Z)({},T,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"registering"},"Registering"),(0,o.kt)("h3",{id:"global-registration"},"Global registration"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'import View3D from "@egjs/vue3-view3d";\nimport App from "./App.vue";\nimport "@egjs/vue3-view3d/css/view3d-bundle.min.css";\n\nconst app = createApp(App);\n\n// This will register the component named "View3D"\napp.use(View3D);\n')),(0,o.kt)("h3",{id:"local-registration"},"Local registration"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'// You have to import the actual component, not the "default"\nimport { View3D } from "@egjs/vue3-view3d";\n\nexport default {\n  components: {\n    View3D\n  }\n}\n')),(0,o.kt)("h2",{id:"usage"},"Usage"),(0,o.kt)("p",null,"All options & events are available like the below"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html"},'<template>\n  <View3D\n    src="URL_TO_YOUR_3D_MODEL",\n    envmap="URL_TO_YOUR_HDR_IMAGE",\n    @ready="onReady"\n  />\n</template>\n')),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("ul",{parentName:"div"},(0,o.kt)("li",{parentName:"ul"},"All ",(0,o.kt)("inlineCode",{parentName:"li"},"camelCased")," event names became ",(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"kebab-case"))),(0,o.kt)("li",{parentName:"ul"},"e.g., ",(0,o.kt)("inlineCode",{parentName:"li"},"modelChange")," => ",(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"model-change")))))),(0,o.kt)("h3",{id:"styles"},"Styles"),(0,o.kt)("p",null,"You can import our CSS file like the below"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'import "@egjs/vue3-view3d/css/view3d-bundle.css";\n')),(0,o.kt)("h3",{id:"additional-props-for-vue3-view3d"},"Additional props for vue3-view3d"),(0,o.kt)("p",null,"There're two additional props for View3D"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"tag")," - sets html tag of the ",(0,o.kt)("inlineCode",{parentName:"li"},"view3d-wrapper")," element"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"canvasClass")," - sets additional class for ",(0,o.kt)("inlineCode",{parentName:"li"},"view3d-canvas")," element")),(0,o.kt)("h3",{id:"using-methods"},"Using methods"),(0,o.kt)("p",null,"All properties & methods of View3D is accesible by using a reference of it."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html",metastring:"title=Method.vue",title:"Method.vue"},'<template>\n  <div>\n    <View3D\n      ref="view3d"\n      src="https://naver.github.io/egjs-view3d/model/RobotExpressive.glb"\n      class="view3d-3by1"\n      @ready="this.onReady"\n    />\n    <button @click="this.onClick">Change Animation</button>\n  </div>\n</template>\n<script lang="ts">\nimport { defineComponent } from "vue";\n\nexport default defineComponent({\n  methods: {\n    onReady: evt => {\n      evt.target.animator.play(1);\n    },\n    onClick: function() {\n      this.$refs.view3d.animator.play(2);\n    }\n  }\n})\n<\/script>\n')))}O.isMDXComponent=!0;var k=["components"],P={toc:[{value:"Styles",id:"styles",level:3},{value:"Additional props for svelte-view3d",id:"additional-props-for-svelte-view3d",level:3},{value:"Using methods",id:"using-methods",level:3}]};function S(e){var t=e.components,n=(0,r.Z)(e,k);return(0,o.kt)("wrapper",(0,i.Z)({},P,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"You can import and use View3D just like other Svelte components."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-jsx"},'import View3D from "@egjs/svelte-view3d";\n\n<View3D\n  src="URL_TO_YOUR_3D_MODEL"\n  image="PATH_TO_YOUR_PANORAMA_IMAGE"\n  on:viewChange={e => {\n    // Event properties are placed in "detail"\n    console.log(e.detail);\n  }}\n/>\n')),(0,o.kt)("h3",{id:"styles"},"Styles"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html",metastring:"title=App.svelte",title:"App.svelte"},'<script>\n  import "@egjs/svelte-view3d/css/view3d-bundle.min.css";\n<\/script>\n')),(0,o.kt)("h3",{id:"additional-props-for-svelte-view3d"},"Additional props for svelte-view3d"),(0,o.kt)("p",null,"There's one additional prop for View3D"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"canvasClass")," - sets additional class for ",(0,o.kt)("inlineCode",{parentName:"li"},"view3d-canvas")," element")),(0,o.kt)("h3",{id:"using-methods"},"Using methods"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-html",metastring:"title=method.component.html",title:"method.component.html"},'<script lang="ts">\n  import View3D from "@egjs/svelte-view3d";\n\n  let view3D: View3D;\n\n  function onReady(evt) {\n    evt.detail.target.animator.play(1);\n  }\n\n  function onClick() {\n    view3D.animator.play(2);\n  }\n<\/script>\n\n<View3D\n  bind:this={view3D}\n  src="https://naver.github.io/egjs-view3d/model/RobotExpressive.glb"\n  class="view3d-3by1"\n  on:ready={onReady}\n/>\n<button on:click={onClick}>Change Animation</button>\n')))}S.isMDXComponent=!0;var x=["components"],C={title:"Quick Start",id:"quick-start",slug:"/quick-start",sidebar_position:2},N=void 0,A={unversionedId:"tutorials/quick-start",id:"tutorials/quick-start",title:"Quick Start",description:"<Tabs",source:"@site/docs/tutorials/Quick Start.mdx",sourceDirName:"tutorials",slug:"/quick-start",permalink:"/egjs-view3d/docs/quick-start",editUrl:"https://github.com/naver/egjs-view3d/edit/main/demo/docs/tutorials/Quick Start.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Quick Start",id:"quick-start",slug:"/quick-start",sidebar_position:2},sidebar:"docs",previous:{title:"Installation",permalink:"/egjs-view3d/docs/"},next:{title:"Controls & Scroll",permalink:"/egjs-view3d/docs/controls"}},D={},L=[{value:"Ratio helper classes",id:"ratio-helper-classes",level:3},{value:"Displaying a model",id:"displaying-a-model",level:2}],R={toc:L};function M(e){var t=e.components,n=(0,r.Z)(e,x);return(0,o.kt)("wrapper",(0,i.Z)({},R,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)(s.Z,{groupId:"framework",defaultValue:"js",lazy:!0,values:[{label:"Javascript",value:"js"},{label:"React",value:"react"},{label:"Angular",value:"ng"},{label:"Vue@2",value:"vue2"},{label:"Vue@3",value:"vue3"},{label:"Svelte",value:"svelte"}],mdxType:"Tabs"},(0,o.kt)(l.Z,{value:"js",mdxType:"TabItem"},(0,o.kt)(d,{mdxType:"VanillaQuickStart"})),(0,o.kt)(l.Z,{value:"react",mdxType:"TabItem"},(0,o.kt)(p,{mdxType:"ReactQuickStart"})),(0,o.kt)(l.Z,{value:"ng",mdxType:"TabItem"},(0,o.kt)(g,{mdxType:"NgxQuickStart"})),(0,o.kt)(l.Z,{value:"vue2",mdxType:"TabItem"},(0,o.kt)(y,{mdxType:"Vue2QuickStart"})),(0,o.kt)(l.Z,{value:"vue3",mdxType:"TabItem"},(0,o.kt)(O,{mdxType:"Vue3QuickStart"})),(0,o.kt)(l.Z,{value:"svelte",mdxType:"TabItem"},(0,o.kt)(S,{mdxType:"SvelteQuickStart"}))),(0,o.kt)("h3",{id:"ratio-helper-classes"},"Ratio helper classes"),(0,o.kt)("p",null,"The class ",(0,o.kt)("inlineCode",{parentName:"p"},"view3d-square"),"(or ",(0,o.kt)("inlineCode",{parentName:"p"},"view3d-1by1"),") will set the height of canvas element same to its width.",(0,o.kt)("br",{parentName:"p"}),"\n","You can use one of our other pre-defined classes to set responsive canvas height with fixed ratio."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"view3d-square\nview3d-1by1\nview3d-5by4\nview3d-4by3\nview3d-3by2\nview3d-5by3\nview3d-16by9\nview3d-2by1\nview3d-3by1\nview3d-4by5\nview3d-3by4\nview3d-2by3\nview3d-3by5\nview3d-9by16\nview3d-1by2\nview3d-1by3\n")),(0,o.kt)("p",null,"You can also can set canvas width/height without ratio class but with CSS like this, and View3D will follow."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-css"},".view3d-wrapper {\n  width: 100%;\n  height: 100vh;\n}\n")),(0,o.kt)("h2",{id:"displaying-a-model"},"Displaying a model"),(0,o.kt)("p",null,"3D model will be displayed on the canvas if you set the option ",(0,o.kt)("inlineCode",{parentName:"p"},"src"),"."),(0,o.kt)(a.ZP,{src:"/egjs-view3d/model/draco/alarm.glb",poster:"/egjs-view3d/poster/alarm_default.png",clickToLoad:!0,showExampleCode:!0,mdxType:"View3D"}),(0,o.kt)("p",null,"View3D uses generated envmap as a default light source.",(0,o.kt)("br",{parentName:"p"}),"\n","You can turn this off with the option ",(0,o.kt)("a",{parentName:"p",href:"/docs/options/environment/useDefaultEnv"},"useDefaultEnv"),", or you can use a HDR image as envmap for IBL(image-based lighting), so you can set any HDR image for the option ",(0,o.kt)("a",{parentName:"p",href:"/docs/options/environment/envmap"},"envmap")," and model will be litten."),(0,o.kt)(a.ZP,{src:"/egjs-view3d/model/draco/alarm.glb",envmap:"/egjs-view3d/texture/artist_workshop_1k.hdr",poster:"/egjs-view3d/poster/alarm.png",clickToLoad:!0,showExampleCode:!0,mdxType:"View3D"}),(0,o.kt)("p",null,"To get HDR images, check this ",(0,o.kt)("a",{parentName:"p",href:"https://polyhaven.com/hdris"},"awesome collection of Poly Haven")),(0,o.kt)(c.Z,{items:[{name:"Alarm Clock 01",link:"https://polyhaven.com/a/alarm_clock_01",author:"Poly Haven",authorLink:"https://polyhaven.com/",license:"CC0"},{name:"Artist Workshop",link:"https://polyhaven.com/a/artist_workshop",author:"Poly Haven",authorLink:"https://polyhaven.com/",license:"CC0"}],mdxType:"License"}))}M.isMDXComponent=!0}}]);