"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5670],{5130:function(e,t,n){var i,r,a=n(7294),o=["title","titleId"];function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s.apply(this,arguments)}function c(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}t.Z=function(e){var t=e.title,n=e.titleId,l=c(e,o);return a.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,fill:"#FFF","aria-labelledby":n},l),t?a.createElement("title",{id:n},t):null,i||(i=a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),r||(r=a.createElement("path",{d:"m10 17 5-5-5-5v10z"})))}},3862:function(e,t,n){var i,r,a=n(7294),o=["title","titleId"];function s(){return s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s.apply(this,arguments)}function c(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}t.Z=function(e){var t=e.title,n=e.titleId,l=c(e,o);return a.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,"aria-labelledby":n},l),t?a.createElement("title",{id:n},t):null,i||(i=a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),r||(r=a.createElement("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"})))}},2062:function(e,t,n){n.r(t),n.d(t,{default:function(){return Jt}});var i,r=n(4578),a=n(7294),o=n(4762),s=n(2773),c="playgroundRoot_G2AE",l=function(e,t){switch(t.type){case"set_view3d":return Object.assign({},e,{view3D:t.val});case"set_orig_model":return Object.assign({},e,{originalModel:t.val});case"set_loading":return Object.assign({},e,{isLoading:t.val});case"set_initialized":return Object.assign({},e,{initialized:t.val});default:return e}},u={isLoading:!0,view3D:null,originalModel:null,initialized:!1},h=a.createContext({state:u,dispatch:function(e){return null}}),d=function(e){var t=e.children,n=a.useReducer(l,u),i=n[0],r=n[1];return a.createElement(h.Provider,{value:{state:i,dispatch:r}},t)},f=n(6010),v=n(5861),p=n(7757),_=n.n(p),m={header:"header_hUYL",collapsed:"collapsed_ZOQ_",icon:"icon_c3BN"},g=["title","titleId"];function y(){return y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},y.apply(this,arguments)}function w(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var E,b=function(e){var t=e.title,n=e.titleId,r=w(e,g);return a.createElement("svg",y({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",height:48,width:48,"aria-labelledby":n},r),t?a.createElement("title",{id:n},t):null,i||(i=a.createElement("path",{d:"m24 30.75-12-12 2.15-2.15L24 26.5l9.85-9.85L36 18.8Z"})))},x=["title","titleId"];function O(){return O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},O.apply(this,arguments)}function P(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var T,S,k=function(e){var t=e.title,n=e.titleId,i=P(e,x);return a.createElement("svg",O({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",height:48,width:48,"aria-labelledby":n},i),t?a.createElement("title",{id:n},t):null,E||(E=a.createElement("path",{d:"M14.15 30.75 12 28.6l12-12 12 11.95-2.15 2.15L24 20.85Z"})))},M=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={open:!0},n}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.title,i=t.children,r=this.state.open;return a.createElement("div",null,a.createElement("div",{className:m.header,onClick:function(){e.setState({open:!e.state.open})}},a.createElement("div",{className:(0,f.Z)(m.headerLabel,"px-4")},n),r?a.createElement(k,{className:(0,f.Z)(m.icon,"px-3")}):a.createElement(b,{className:(0,f.Z)(m.icon,"px-3")})),a.createElement("div",{className:(0,f.Z)("p-4","is-size-7",r?"":m.collapsed)},i))},t}(a.Component),C=n(6455),R=n.n(C),N=n(8326),D=function(){var e=(0,v.Z)(_().mark((function e(t,n,i){var r,a,o;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:"set_loading",val:!0}),e.prev=1,r=Array.from(i),a=new N.EP(t),e.next=6,a.loadFromFiles(r.map((function(e){e[0];return e[1]})));case 6:o=e.sent,t._src=o.src,t.display(o),t.autoPlayer.disable(),n({type:"set_initialized",val:!0}),n({type:"set_loading",val:!1}),n({type:"set_orig_model",val:o}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),R().fire({title:"Error!",text:e.t0.message,icon:"error"}),n({type:"set_loading",val:!1});case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,n,i){return e.apply(this,arguments)}}(),F=function(){var e=(0,v.Z)(_().mark((function e(t,n,i){var r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=document.querySelector("#enable-skybox").checked,n({type:"set_loading",val:!0}),!i){e.next=9;break}return e.next=6,t.scene.setSkybox(i);case 6:t._skybox=i,e.next=10;break;case 9:t.skybox=null;case 10:r&&i||(t.scene.root.background=null),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),R().fire({title:"Error!",text:e.t0.message,icon:"error"});case 16:return e.prev=16,n({type:"set_loading",val:!1}),URL.revokeObjectURL(i),e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[0,13,16,20]])})));return function(t,n,i){return e.apply(this,arguments)}}(),A=["title","titleId"];function L(){return L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},L.apply(this,arguments)}function I(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var z,Z,U,j=function(e){var t=e.title,n=e.titleId,i=I(e,A);return a.createElement("svg",L({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,"aria-labelledby":n},i),t?a.createElement("title",{id:n},t):null,T||(T=a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),S||(S=a.createElement("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zM7 9l1.41 1.41L11 7.83V16h2V7.83l2.59 2.58L17 9l-5-5-5 5z"})))},H=[{name:"Cube",path:"/egjs-view3d/model/cube.glb"},{name:"Alarm",path:"/egjs-view3d/model/draco/alarm.glb"},{name:"Extinguisher",path:"/egjs-view3d/model/draco/extinguisher.glb"},{name:"Plant",path:"/egjs-view3d/model/draco/plant.glb"},{name:"Watch",path:"/egjs-view3d/model/draco/watch.glb"},{name:"Payphone",path:"/egjs-view3d/model/draco/payphone.glb"},{name:"Suzanne",path:"/egjs-view3d/model/meshopt/suzanne.glb"},{name:"Lucy",path:"/egjs-view3d/model/draco/lucy.glb"}],B=function(){var e=a.useContext(h),t=e.state,n=e.dispatch,i=t.view3D,r=t.isLoading;return i?a.createElement(M,{title:"Select 3D Model"},a.createElement("div",{className:"is-flex is-flex-direction-row"},a.createElement("div",{className:(0,f.Z)({select:!0,"mr-1":!0,"is-primary":!0,"is-loading":r})},a.createElement("select",{onChange:function(){var e=(0,v.Z)(_().mark((function e(t){var r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.target.value){e.next=3;break}return e.abrupt("return");case 3:return n({type:"set_loading",val:!0}),e.next=6,i.load(r);case 6:i.autoPlayer.disable(),n({type:"set_orig_model",val:i.model}),n({type:"set_loading",val:!1}),n({type:"set_initialized",val:!0});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),disabled:r},H.map((function(e,t){return a.createElement("option",{key:t,value:e.path},e.name)})))),a.createElement("div",{className:"file"},a.createElement("label",{className:"file-label"},a.createElement("input",{className:"file-input",type:"file",name:"resume",accept:".glb",onChange:function(e){var t=new Map,r=e.target.files;if(r){for(var a=0;a<r.length;a++){var o=r.item(a);o&&t.set(o.name,o)}n({type:"set_initialized",val:!0}),D(i,n,t)}}}),a.createElement("span",{className:"file-cta"},a.createElement("span",{className:"file-icon"},a.createElement(j,null)),a.createElement("span",{className:"file-label"},"GLB")))))):a.createElement(a.Fragment,null)},V=n(1987),W=n(7462),G=n(3366),Q=n(3144),q=n(3074),X="wrapper_d80E",Y="input_jG_p",K=n(8519),J=["name","className","onChange","min","max","step","style"],$=function(e){function t(t){var n,i;return(i=e.call(this,t)||this).state={val:null!=(n=t.defaultValue)?n:0},i}(0,r.Z)(t,e);var n=t.prototype;return n.setVal=function(e){this.setState({val:e})},n.render=function(){var e=this,t=this.props,n=t.name,i=t.className,r=t.onChange,o=t.min,s=t.max,c=t.step,l=t.style,u=(0,G.Z)(t,J);return a.createElement("div",{className:i,style:l},n&&a.createElement("div",{className:"mb-1 menu-label"},n),a.createElement("div",{className:X},a.createElement(q.Z,(0,W.Z)({min:o,max:s,step:c,onChange:function(t){r&&r(t),e.setState({val:t})},value:this.state.val},u)),a.createElement("input",{type:"number",className:(0,f.Z)(Y,"input","is-small","is-primary","ml-2"),value:this.state.val,step:null!=c?c:1,onChange:function(t){var n,i,a=(0,K.uZ)(parseFloat(t.currentTarget.value),null!=(n=e.props.min)?n:0,null!=(i=e.props.max)?i:100);isNaN(a)||(r&&r(a),e.setState({val:a}))}})))},(0,Q.Z)(t,[{key:"val",get:function(){return this.state.val}}]),t}(a.Component),ee=["title","titleId"];function te(){return te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},te.apply(this,arguments)}function ne(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ie=function(e){var t=e.title,n=e.titleId,i=ne(e,ee);return a.createElement("svg",te({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,"aria-labelledby":n},i),t?a.createElement("title",{id:n},t):null,z||(z=a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),Z||(Z=a.createElement("path",{d:"M12 5.99 19.53 19H4.47L12 5.99M12 2 1 21h22L12 2z"})),U||(U=a.createElement("path",{d:"M13 16h-2v2h2zM13 10h-2v5h2z"})))},re=function(){var e=(0,a.useState)(.5),t=e[0],n=e[1],i=(0,a.useState)(7),r=i[0],o=i[1],s=a.useContext(h),c=s.state,l=s.dispatch,u=c.isLoading,d=c.view3D;return d?a.createElement(M,{title:"Simplify(Low-poly)"},a.createElement("article",{className:"message is-warning"},a.createElement("div",{className:"message-header is-size-7"},a.createElement("div",{className:"is-flex is-flex-direction-row is-align-items-center"},a.createElement(ie,{className:"mr-2",width:16,height:16}),a.createElement("span",null,"Warning"))),a.createElement("div",{className:"message-body is-size-7"},"This feature is experimental and some models are may not compatible")),a.createElement("div",{className:"mt-4"},a.createElement($,{name:"Target Percentage",step:.01,min:0,max:1,defaultValue:t,onChange:function(e){n(e[0])}}),a.createElement($,{name:"Aggressiveness",step:1,min:1,max:14,defaultValue:r,onChange:function(e){o(e[0])}}),a.createElement("div",{className:"is-flex is-flex-direction-row is-align-items-center is-justify-content-center mt-4"},a.createElement("button",{className:"button is-small",disabled:u,onClick:function(){var e=c.originalModel,n=new V.mw({targetPercentage:t,aggressiveness:r}),i=new V.hl(e.scene,!0);l({type:"set_loading",val:!0}),n.simplify(i);var a=new N.Hn({src:e.src,scenes:[i.object]});d.display(a),l({type:"set_loading",val:!1})}},"Apply")))):a.createElement(a.Fragment,null)},ae=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._yawRef=a.createRef(),t._pitchRef=a.createRef(),t._zoomRef=a.createRef(),t._fovRef=a.createRef(),t._pivotXRef=a.createRef(),t._pivotYRef=a.createRef(),t._pivotZRef=a.createRef(),t._initialZoomAxisRef=a.createRef(),t._initialZoomRef=a.createRef(),t._onResize=function(){t.forceUpdate()},t._onCameraChange=function(){var e,n,i,r,a,o,s,c=t.context.state.view3D;null==(e=t._yawRef.current)||e.setVal(c.camera.yaw.toFixed(0)),null==(n=t._pitchRef.current)||n.setVal(c.camera.pitch.toFixed(0)),null==(i=t._zoomRef.current)||i.setVal(c.camera.zoom.toFixed(1)),null==(r=t._fovRef.current)||r.setVal(c.camera.baseFov.toFixed(0)),null==(a=t._pivotXRef.current)||a.setVal(c.camera.pivot.x.toFixed(2)),null==(o=t._pivotYRef.current)||o.setVal(c.camera.pivot.y.toFixed(2)),null==(s=t._pivotZRef.current)||s.setVal(c.camera.pivot.z.toFixed(2))},t}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.context.state.view3D;e.on("resize",this._onResize),e.on("cameraChange",this._onCameraChange)},n.componentWillUnmount=function(){var e=this.context.state.view3D;e.off("resize",this._onResize),e.off("cameraChange",this._onCameraChange)},n.render=function(){var e,t,n,i,r,o,s=this,c=this.context.state,l=c.view3D;return l?a.createElement(M,{title:"Camera"},a.createElement($,{ref:this._yawRef,name:"Yaw",className:"mb-2",step:1,min:0,max:360,defaultValue:Math.floor(l.camera.yaw),onChange:function(e){l.camera.yaw=e,l.renderer.renderSingleFrame(!0)}}),a.createElement($,{ref:this._pitchRef,name:"Pitch",className:"mb-2",step:1,min:-90,max:90,defaultValue:Math.floor(l.camera.pitch),onChange:function(e){l.camera.pitch=e,l.renderer.renderSingleFrame(!0)}}),a.createElement($,{ref:this._zoomRef,name:"Zoom",className:"mb-2",step:.1,min:-l.control.zoom.range.max,max:-l.control.zoom.range.min,defaultValue:Math.floor(l.camera.zoom),onChange:function(e){l.camera.zoom=e,l.renderer.renderSingleFrame(!0)}}),a.createElement($,{ref:this._fovRef,name:"FOV",className:"mb-2",step:.1,min:1,max:179,defaultValue:Math.floor(l.camera.baseFov),onChange:function(e){l.camera.baseFov=e,l.renderer.renderSingleFrame(!0)}}),a.createElement("div",null,a.createElement($,{ref:this._pivotXRef,name:"pivot.x",className:"mb-2",step:.01,min:null==(e=l.model)?void 0:e.bbox.min.x,max:null==(t=l.model)?void 0:t.bbox.max.x,defaultValue:l.camera.newPose.pivot.x.toFixed(2),onChange:function(e){l.camera.newPose.pivot.x=e,l.renderer.renderSingleFrame(!0)}}),a.createElement($,{ref:this._pivotYRef,name:"pivot.y",className:"mb-2",step:.01,min:null==(n=l.model)?void 0:n.bbox.min.y,max:null==(i=l.model)?void 0:i.bbox.max.y,defaultValue:l.camera.pivot.y.toFixed(2),onChange:function(e){l.camera.newPose.pivot.y=e,l.renderer.renderSingleFrame(!0)}}),a.createElement($,{ref:this._pivotZRef,name:"pivot.z",className:"mb-2",step:.01,min:null==(r=l.model)?void 0:r.bbox.min.z,max:null==(o=l.model)?void 0:o.bbox.max.z,defaultValue:l.camera.pivot.z.toFixed(2),onChange:function(e){l.camera.newPose.pivot.z=e,l.renderer.renderSingleFrame(!0)}})),a.createElement("div",null,a.createElement("div",{className:"mb-1 menu-label"},"Initial Zoom"),a.createElement("div",{className:"is-flex is-flex-direction-row"},a.createElement("div",{className:"select is-primary"},a.createElement("select",{ref:this._initialZoomAxisRef},a.createElement("option",{value:"x"},"x"),a.createElement("option",{value:"y"},"y"),a.createElement("option",{value:"z"},"z"))),a.createElement($,{ref:this._initialZoomRef,className:"ml-2",style:{flex:"1"},step:.01,min:0,max:1,defaultValue:.8})),a.createElement("div",{className:"is-flex is-flex-direction-row is-justify-content-center mt-2"},a.createElement("button",{className:"button is-small",disabled:c.isLoading,onClick:function(){var e,t,n=null==(e=s._initialZoomRef.current)?void 0:e.val;if(n){var i=null==(t=s._initialZoomAxisRef.current)?void 0:t.value;l.initialZoom={axis:i,ratio:n},l.camera.fit(l.model,l.center),l.camera.reset(0),l.initialZoom=0}}},"Apply Initial Zoom")))):a.createElement(a.Fragment,null)},t}(a.Component);ae.contextType=h;var oe=ae,se=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){return this.context.state.view3D?a.createElement(a.Fragment,null,a.createElement(B,null),a.createElement(oe,null),a.createElement(re,null)):a.createElement(a.Fragment,null)},t}(a.Component);se.contextType=h;var ce=se,le=n(5360),ue=[{name:"Default",path:""},{name:"Artist Workshop",path:"/egjs-view3d/texture/artist_workshop_1k.hdr"},{name:"Comfy Cafe",path:"/egjs-view3d/texture/comfy_cafe_1k.hdr"},{name:"Dry Hay Field",path:"/egjs-view3d/texture/dry_hay_field_1k.hdr"},{name:"Evening Meadow",path:"/egjs-view3d/texture/evening_meadow_1k.hdr"},{name:"Royal Esplanade",path:"/egjs-view3d/texture/royal_esplanade_1k.hdr"},{name:"Spruit Sunrise",path:"/egjs-view3d/texture/spruit_sunrise_1k.hdr"},{name:"Vignaioli Night",path:"/egjs-view3d/texture/vignaioli_night_1k.hdr"},{name:"Fireplace",path:"/egjs-view3d/texture/fireplace_1k.hdr"},{name:"Venice Sunset",path:"/egjs-view3d/texture/venice_sunset_1k.hdr"},{name:"Moonless Golf",path:"/egjs-view3d/texture/moonless_golf_1k.hdr"},{name:"Studio Garden",path:"/egjs-view3d/texture/studio_garden_1k.hdr"},{name:"Studio",path:"/egjs-view3d/texture/studio_small_08_1k.hdr"}],he=function(){var e=a.useContext(h),t=e.state,n=e.dispatch,i=t.view3D,r=t.isLoading;return i?a.createElement(a.Fragment,null,a.createElement(M,{title:"Environment"},a.createElement("p",{className:"menu-label"},"Choose HDR envmap"),a.createElement("div",{className:"is-flex is-flex-direction-row mb-4"},a.createElement("div",{className:(0,f.Z)({select:!0,"mr-1":!0,"is-primary":!0,"is-loading":r})},a.createElement("select",{onChange:function(e){F(i,n,e.target.value)},disabled:r},ue.map((function(e,t){return a.createElement("option",{key:t,value:e.path},e.name)})))),a.createElement("div",{className:"file"},a.createElement("label",{className:"file-label"},a.createElement("input",{className:"file-input",type:"file",name:"resume",accept:".hdr",onChange:function(e){var t=e.target.files,r=null==t?void 0:t.item(0);r&&F(i,n,URL.createObjectURL(r))}}),a.createElement("span",{className:"file-cta"},a.createElement("span",{className:"file-icon"},a.createElement(j,null)),a.createElement("span",{className:"file-label"},"HDR"))))),a.createElement($,{name:"Exposure",step:.01,min:0,max:2,defaultValue:1,onChange:function(e){i.exposure=e}}),a.createElement("div",{className:"is-flex is-flex-direction-row is-align-items-center mb-2"},a.createElement("input",{id:"enable-skybox",className:"checkbox mr-2",type:"checkbox",defaultChecked:!0,disabled:t.isLoading||!i.skybox,onChange:function(e){var t=i.scene;e.currentTarget.checked&&t.root.environment&&i.skybox?i.skyboxBlur?t.root.background=le.Lf.createBlurredHDR(i,t.root.environment):t.root.background=t.root.environment:t.root.background=null,i.renderer.renderSingleFrame()}}),a.createElement("span",{className:"menu-label m-0"},"Show Skybox")),a.createElement("div",{className:"is-flex is-flex-direction-row is-align-items-center"},a.createElement("input",{className:"checkbox mr-2",type:"checkbox",defaultChecked:!1,disabled:t.isLoading||!i.skybox,onChange:function(e){var t=e.currentTarget.checked;i.skyboxBlur=t,i.renderer.renderSingleFrame()}}),a.createElement("span",{className:"menu-label m-0"},"Blur skybox")))):a.createElement(a.Fragment,null)},de=function(){var e=a.useContext(h).state.view3D;return e?a.createElement(M,{title:"Shadow"},a.createElement($,{name:"Shadow darkness",className:"mb-2",step:.01,min:0,max:1,defaultValue:e.scene.shadowPlane.darkness,onChange:function(t){e.scene.shadowPlane.darkness=t,e.renderer.renderSingleFrame()}}),a.createElement($,{name:"Shadow blur",className:"mb-2",step:1,min:1,max:14,defaultValue:null==e?void 0:e.scene.shadowPlane.blur,onChange:function(t){e.scene.shadowPlane.blur=t,e.renderer.renderSingleFrame()}})):a.createElement(a.Fragment,null)},fe=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){return a.createElement(a.Fragment,null,a.createElement(he,null),a.createElement(de,null))},t}(a.Component);fe.contextType=h;var ve,pe,_e=fe,me=n(7543),ge=n(5733),ye=n.n(ge),we=n(3162),Ee=n(8630),be=["title","titleId"];function xe(){return xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},xe.apply(this,arguments)}function Oe(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Pe=function(e){var t=e.title,n=e.titleId,i=Oe(e,be);return a.createElement("svg",xe({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,"aria-labelledby":n},i),t?a.createElement("title",{id:n},t):null,ve||(ve=a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),pe||(pe=a.createElement("path",{d:"M11 18h2v-2h-2v2zm1-16C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4h2c0-1.1.9-2 2-2s2 .9 2 2c0 2-3 1.75-3 5h2c0-2.25 3-2.5 3-5 0-2.21-1.79-4-4-4z"})))},Te=n(3862),Se=function(){var e=a.useContext(h),t=e.state,n=e.dispatch,i=t.view3D,r=t.isLoading;return i?a.createElement(M,{title:"Download 3D Model"},a.createElement("div",{className:"is-flex is-flex-direction-row is-align-items-center"},a.createElement("input",{id:"model-webp",className:"checkbox mr-2",type:"checkbox",defaultChecked:!0,disabled:r}),a.createElement("span",{className:"my-0 menu-label"},"Include WebP Textures"),a.createElement("span",{className:"icon is-small ml-1",style:{verticalAlign:"top"},"data-for":"download-tip","data-tip":"WebP images are smaller than jpeg/png images, but have lesser browser coverage. png/jpeg images will be used as fallback."},a.createElement(Pe,{style:{fill:"#7a7a7a"}}))),a.createElement("div",{className:"is-flex is-flex-direction-row is-align-items-center"},a.createElement("input",{id:"model-tlod",className:"checkbox mr-2",type:"checkbox",defaultChecked:!0,disabled:r}),a.createElement("span",{className:"my-0 menu-label"},"Include Multiple Levels of Textures"),a.createElement("span",{className:"icon is-small ml-1",style:{verticalAlign:"top"},"data-for":"download-tip","data-tip":"Include multiple levels(sizes) of textures. Low-res textures will be loaded first, and will be replaced with highres textures after they're loaded."},a.createElement(Pe,{style:{fill:"#7a7a7a"}}))),a.createElement("div",{className:"is-flex is-flex-direction-row is-align-items-center"},a.createElement("input",{id:"model-annotations",className:"checkbox mr-2",type:"checkbox",defaultChecked:!0,disabled:r}),a.createElement("span",{className:"my-0 menu-label"},"Include Annotations")),a.createElement("div",{className:"mt-2"},a.createElement("span",{className:"menu-label my-0 mr-2"},"Minimum Texture Size"),a.createElement("input",{id:"model-tlod-0",className:"input is-small",type:"number",defaultValue:256,min:1,disabled:r})),a.createElement("div",{className:"mt-2"},a.createElement("span",{className:"menu-label my-0 mr-2"},"Maximum Texture Size"),a.createElement("input",{id:"model-tlod-1",className:"input is-small",type:"number",defaultValue:8192,min:1,disabled:r})),a.createElement("button",{className:"button is-small mt-2",disabled:t.isLoading,onClick:function(){return ke(t,n)}},a.createElement(Te.Z,{className:"icon mr-2"}),a.createElement("span",null,"Download 3D Model (.zip)")),a.createElement(o.Z,{id:"download-tip",effect:"solid",place:"right"})):a.createElement(a.Fragment,null)},ke=function(){var e=(0,v.Z)(_().mark((function e(t,n){var i,r,a,o,s,c,l,u,h;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.view3D){e.next=3;break}return e.abrupt("return");case 3:r=document.querySelector("#model-webp").checked,a=document.querySelector("#model-tlod").checked,o=document.querySelector("#model-annotations").checked,s=parseFloat(document.querySelector("#model-tlod-0").value),c=parseFloat(document.querySelector("#model-tlod-1").value),n({type:"set_loading",val:!0});try{l=i.model,u=l.meshes.reduce((function(e,t){return Array.isArray(t.material)?[].concat(e,t.material):[].concat(e,[t.material])}),[]),h=new Map,u.forEach((function(e){for(var t in e)if(e[t]&&t.toLowerCase().endsWith("map")&&e[t].isTexture){var n=e[t];n.image.src=n.uuid,h.set(n.uuid,n)}})),(new me.M).parse(l.scene,function(){var e=(0,v.Z)(_().mark((function e(t){var n,u,d,f,p,m,g,y,w,E,b;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,o&&(n.extras||(n.extras={}),n.extras[Ee.HZ]=i.annotation.toJSON()),u=/(\w+)\.\w+$/i.exec(l.src),d=u&&u[1]?u[1]:"model",f=document.createElement("canvas"),p=f.getContext("2d"),m=new(ye()),n.images||(n.images=[]),n.textures||(n.textures=[]),g=[].concat(n.images),y=[].concat(n.textures),w="EXT_texture_webp",n.extensionsUsed||(n.extensionsUsed=[]),y.forEach((function(e){e.extensions||(e.extensions={})})),r&&(n.extensionsUsed.includes(w)||n.extensionsUsed.push(w),y.forEach((function(e){var t=e.source;e.extensions[w]={source:t+g.length}})),g.map((function(e,t){var i=""+d+t;n.images.push({mimeType:"image/webp",uri:i+".webp"})}))),E=g.map(function(){var e=(0,v.Z)(_().mark((function e(t,i){var o,l,u,v,g,E,b,x,O,P,T,S;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=t.uri.split("/"),u=y.find((function(e){return e.source===i})),v=h.get(l[l.length-1]),g=null!=(o=t.mimeType)?o:"image/png",E=g.split("/")[1],b=""+d+i,x=v.image,O=(0,K.uZ)(x.width,s,c),!(a&&O>s)){e.next=30;break}return P=[],T=function(e,t){var i=n.images.length,a=n.textures.length,o={mimeType:g,uri:e+"."+E},s={sampler:u.sampler,source:i,extensions:{}},c={size:t,index:a};if(n.images.push(o),r){var l=n.images.length;n.images.push({mimeType:"image/webp",uri:e+".webp"}),s.extensions[w]={source:l}}n.textures.push(s),P.push(c)},Me(v,f,p,s,s),e.next=14,Ce(m,f,g,r,b,E);case 14:if(!(O>(S=2048))){e.next=20;break}return Me(v,f,p,S,S),e.next=19,Ce(m,f,g,r,b+"_"+S,E);case 19:T(b+"_"+S,S);case 20:if(!(O>s)){e.next=25;break}return Me(v,f,p,O,O),e.next=24,Ce(m,f,g,r,b+"_"+O,E);case 24:T(b+"_"+O,O);case 25:t.uri=b+"."+E,u.extras||(u.extras={}),u.extras[Ee.Fy]={levels:P},e.next=34;break;case 30:return Me(v,f,p,O,O),e.next=33,Ce(m,f,g,r,b,E);case 33:t.uri=b+"."+E;case 34:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.next=19,Promise.all(E);case 19:return e.next=21,Promise.all(n.buffers.map(function(){var e=(0,v.Z)(_().mark((function e(t,i){var r,a;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.buffers.length>1?d+"-"+i+".bin":d+".bin",e.next=3,fetch(t.uri).then((function(e){return e.arrayBuffer()}));case 3:a=e.sent,m.file(r,a),t.uri=r;case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 21:return m.file(d+".gltf",JSON.stringify(n,null,2)),e.next=24,m.generateAsync({type:"blob"});case 24:b=e.sent,(0,we.saveAs)(b,d+".zip");case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{binary:!1,animations:l.animations,includeCustomExtensions:!0,embedImages:!1})}catch(d){R().fire({title:"Error!",text:d.message,icon:"error"})}finally{n({type:"set_loading",val:!1})}case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Me=function(e,t,n,i,r){var a=e.image;t.width=i,t.height=r;var o=i/a.width,s=r/a.height;if(e.flipY?(n.translate(0,t.height),n.scale(o,-s)):n.scale(o,s),"undefined"!=typeof HTMLImageElement&&a instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&a instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&a instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&a instanceof ImageBitmap)n.drawImage(a,0,0,a.width,a.height);else{for(var c=new Uint8ClampedArray(a.height*a.width*4),l=0;l<c.length;l+=4)c[l+0]=a.data[l+0],c[l+1]=a.data[l+1],c[l+2]=a.data[l+2],c[l+3]=a.data[l+3];n.putImageData(new ImageData(c,a.width,a.height),0,0)}},Ce=function(e,t,n,i,r,a){var o=[new Promise((function(i){t.toBlob((function(t){e.file(r+"."+a,t),i()}),n)}))];if(i){var s=new Promise((function(n){t.toBlob((function(t){e.file(r+".webp",t),n()}),"image/webp")}));o.push(s)}return Promise.all(o)},Re=function(){var e=a.useContext(h).state,t=e.view3D,n=e.isLoading;return t?a.createElement(M,{title:"Download Poster (Preview Image)"},a.createElement("div",null,a.createElement("span",{className:"my-0 mr-2 menu-label"},"width"),a.createElement("input",{id:"poster-width",className:"input is-small",type:"number",defaultValue:1024,min:1,disabled:n})),a.createElement("div",{className:"mt-2"},a.createElement("span",{className:"my-0 mr-2 menu-label"},"height"),a.createElement("input",{id:"poster-height",className:"input is-small",type:"number",defaultValue:1024,min:1,disabled:n})),a.createElement("button",{className:"button is-small mt-2",disabled:n,onClick:function(){return Ne(e)}},a.createElement(Te.Z,{className:"icon mr-2"}),a.createElement("span",null,"Download Poster (.png)"))):a.createElement(a.Fragment,null)},Ne=function(e){var t=e.view3D,n=t.renderer.canvas,i=t.renderer.size,r=parseFloat(document.querySelector("#poster-width").value),a=parseFloat(document.querySelector("#poster-height").value);t.renderer.threeRenderer.setSize(r,a,!0),t.once("resize",(function(){t.screenshot("poster"),t.renderer.threeRenderer.setSize(i.width,i.height,!1),n.style.width="",n.style.height=""}))},De=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){this.context.state;return a.createElement(a.Fragment,null,a.createElement(Se,null),a.createElement(Re,null))},t}(a.Component);De.contextType=h;var Fe,Ae=De,Le=["title","titleId"];function Ie(){return Ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ie.apply(this,arguments)}function ze(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Ze,Ue=function(e){var t=e.title,n=e.titleId,i=ze(e,Le);return a.createElement("svg",Ie({xmlns:"http://www.w3.org/2000/svg",height:48,width:48,viewBox:"0 0 48 48","aria-labelledby":n},i),t?a.createElement("title",{id:n},t):null,Fe||(Fe=a.createElement("path",{d:"M16 37.85v-28l22 14Zm3-14Zm0 8.55 13.45-8.55L19 15.3Z"})))},je=["title","titleId"];function He(){return He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},He.apply(this,arguments)}function Be(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Ve=function(e){var t=e.title,n=e.titleId,i=Be(e,je);return a.createElement("svg",He({xmlns:"http://www.w3.org/2000/svg",height:48,width:48,viewBox:"0 0 48 48","aria-labelledby":n},i),t?a.createElement("title",{id:n},t):null,Ze||(Ze=a.createElement("path",{d:"M28.25 38V10H36v28ZM12 38V10h7.75v28Z"})))},We=function(e){function t(){return e.apply(this,arguments)||this}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this,t=this.context.state.view3D;return t?a.createElement("div",{className:"p-4"},a.createElement("p",{className:"menu-label"},"Animation"),a.createElement("div",{className:"menu-list"},(null==t?void 0:t.animator.clips.length)>0?a.createElement("div",{className:"is-flex is-flex-direction-row is-align-items-center mb-2"},a.createElement("div",{className:"select mr-4"},a.createElement("select",{onChange:function(e){t.animator.play(parseFloat(e.target.value))}},t.animator.clips.map((function(e,t){return a.createElement("option",{value:t,key:t},e.name)})))),null!=t&&t.animator.paused?a.createElement(Ue,{className:"icon",onClick:function(){t.animator.resume(),e.forceUpdate()}}):a.createElement(Ve,{className:"icon",onClick:function(){t.animator.pause(),e.forceUpdate()}})):a.createElement("div",{className:"is-size-7"},"The model does not have any animations!"))):a.createElement(a.Fragment,null)},t}(a.Component);We.contextType=h;var Ge,Qe=We,qe=["title","titleId"];function Xe(){return Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Xe.apply(this,arguments)}function Ye(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Ke=function(e){var t=e.title,n=e.titleId,i=Ye(e,qe);return a.createElement("svg",Xe({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",height:48,width:48,"aria-labelledby":n},i),t?a.createElement("title",{id:n},t):null,Ge||(Ge=a.createElement("path",{d:"m12.45 37.65-2.1-2.1L21.9 24 10.35 12.45l2.1-2.1L24 21.9l11.55-11.55 2.1 2.1L26.1 24l11.55 11.55-2.1 2.1L24 26.1Z"})))},Je=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this)._downloadAnnotation=function(){var e=t.context.state.view3D,n=e.model;if(e&&n&&!(e.annotation.list.length<=0)){var i=e.annotation.toJSON(),r=new Blob([JSON.stringify(i)],{type:"application/json"}),a=URL.createObjectURL(r),o=/(\w+)\.\w+$/i.exec(n.src),s=o&&o[1]?o[1]:"model",c=document.createElement("a");c.href=a,c.download=s+"-annotations.json",c.click(),URL.revokeObjectURL(a)}},t}return(0,r.Z)(t,e),t.prototype.render=function(){var e=this,t=this.context.state,n=t.view3D;return n?a.createElement("div",{className:"p-4"},a.createElement("p",{className:"menu-label"},"Annotation"),a.createElement("div",{className:"menu-list"},(null==n?void 0:n.annotation.list.length)>0?a.createElement(a.Fragment,null,n.annotation.list.map((function(t,i){return a.createElement("div",{key:t.uuid,className:"message is-size-7"},a.createElement("div",{className:"message-header"},a.createElement("span",null,i+1),a.createElement(Ke,{className:"delete","aria-label":"delete",width:"16",height:"16",fill:"#ffffff",style:{cursor:"pointer"},onClick:function(){n.annotation.remove(i),e.forceUpdate()}})),a.createElement("div",{className:"message-body"},a.createElement("p",{className:"menu-label"},"Label"),a.createElement("input",{type:"text",className:"mb-2",onChange:function(e){t.element.querySelector(".view3d-annotation-tooltip").innerHTML=e.target.value}}),a.createElement($,{name:"Duration(Second)",className:"mb-2",step:.01,min:0,max:3,defaultValue:1,onChange:function(e){t.focusDuration=1e3*e}}),a.createElement($,{name:"Yaw",className:"mb-2",step:1,min:0,max:360,defaultValue:Math.floor(t.focusPose[0]),onChange:function(e){t.focusPose[0]=e}}),a.createElement($,{name:"Pitch",className:"mb-2",step:1,min:-90,max:90,defaultValue:Math.floor(t.focusPose[1]),onChange:function(e){t.focusPose[1]=e}}),a.createElement($,{name:"Zoom",className:"mb-2",step:.1,min:-n.control.zoom.range.max,max:-n.control.zoom.range.min,defaultValue:Math.floor(t.focusPose[2]),onChange:function(e){t.focusPose[2]=e}}),a.createElement("button",{className:"button is-small ml-2",onClick:function(){t.focus()}},"Focus")))})),a.createElement("button",{className:"button is-small mt-2",disabled:t.isLoading,onClick:this._downloadAnnotation},a.createElement(Te.Z,{className:"icon mr-2"}),a.createElement("span",null,"Download Annotations (.JSON)"))):a.createElement("div",{className:"is-size-7"},"Double click on the model surface to add an annotation!"))):a.createElement(a.Fragment,null)},t}(a.Component);Je.contextType=h;var $e,et=Je,tt="control_DFLv",nt="tabWrapper_BDsb",it="iconWrapper_TvLC",rt="icon_Y081",at="isActive_zbzw",ot=["title","titleId"];function st(){return st=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},st.apply(this,arguments)}function ct(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var lt,ut=["title","titleId"];function ht(){return ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ht.apply(this,arguments)}function dt(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var ft,vt=["title","titleId"];function pt(){return pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},pt.apply(this,arguments)}function _t(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var mt,gt=function(e){var t=e.title,n=e.titleId,i=_t(e,vt);return a.createElement("svg",pt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",height:48,width:48,"aria-labelledby":n},i),t?a.createElement("title",{id:n},t):null,ft||(ft=a.createElement("path",{d:"m7 8 3.7 7.6h6.5L13.5 8h4.45l3.7 7.6h6.5L24.45 8h4.45l3.7 7.6h6.5L35.4 8H41q1.2 0 2.1.9.9.9.9 2.1v26q0 1.2-.9 2.1-.9.9-2.1.9H7q-1.2 0-2.1-.9Q4 38.2 4 37V11q0-1.2.9-2.1Q5.8 8 7 8Zm0 10.6V37h34V18.6Zm0 0V37Z"})))},yt=["title","titleId"];function wt(){return wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},wt.apply(this,arguments)}function Et(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var bt=function(e){var t=e.title,n=e.titleId,i=Et(e,yt);return a.createElement("svg",wt({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",height:48,width:48,"aria-labelledby":n},i),t?a.createElement("title",{id:n},t):null,mt||(mt=a.createElement("path",{d:"M17.5 26.5h2.2l7.3-7.35L24.85 17l-7.35 7.3Zm11.15-9L30 16.15q.15-.15.15-.375T30 15.4L28.6 14q-.15-.15-.375-.15t-.375.15l-1.35 1.35ZM24 40.05q6.65-6.05 9.825-10.975Q37 24.15 37 20.4q0-5.9-3.775-9.65T24 7q-5.45 0-9.225 3.75Q11 14.5 11 20.4q0 3.75 3.25 8.675Q17.5 34 24 40.05ZM24 44q-8.05-6.85-12.025-12.725Q8 25.4 8 20.4q0-7.5 4.825-11.95Q17.65 4 24 4q6.35 0 11.175 4.45Q40 12.9 40 20.4q0 5-3.975 10.875T24 44Zm0-23.6Z"})))},xt=[{name:"Model",icon:function(e){var t=e.title,n=e.titleId,i=ct(e,ot);return a.createElement("svg",st({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",height:24,width:24,"aria-labelledby":n},i),t?a.createElement("title",{id:n},t):null,$e||($e=a.createElement("path",{d:"m19.4 44-1-6.3q-.95-.35-2-.95t-1.85-1.25l-5.9 2.7L4 30l5.4-3.95q-.1-.45-.125-1.025Q9.25 24.45 9.25 24q0-.45.025-1.025T9.4 21.95L4 18l4.65-8.2 5.9 2.7q.8-.65 1.85-1.25t2-.9l1-6.35h9.2l1 6.3q.95.35 2.025.925Q32.7 11.8 33.45 12.5l5.9-2.7L44 18l-5.4 3.85q.1.5.125 1.075.025.575.025 1.075t-.025 1.05q-.025.55-.125 1.05L44 30l-4.65 8.2-5.9-2.7q-.8.65-1.825 1.275-1.025.625-2.025.925l-1 6.3ZM24 30.5q2.7 0 4.6-1.9 1.9-1.9 1.9-4.6 0-2.7-1.9-4.6-1.9-1.9-4.6-1.9-2.7 0-4.6 1.9-1.9 1.9-1.9 4.6 0 2.7 1.9 4.6 1.9 1.9 4.6 1.9Zm0-3q-1.45 0-2.475-1.025Q20.5 25.45 20.5 24q0-1.45 1.025-2.475Q22.55 20.5 24 20.5q1.45 0 2.475 1.025Q27.5 22.55 27.5 24q0 1.45-1.025 2.475Q25.45 27.5 24 27.5Zm0-3.5Zm-2.2 17h4.4l.7-5.6q1.65-.4 3.125-1.25T32.7 32.1l5.3 2.3 2-3.6-4.7-3.45q.2-.85.325-1.675.125-.825.125-1.675 0-.85-.1-1.675-.1-.825-.35-1.675L40 17.2l-2-3.6-5.3 2.3q-1.15-1.3-2.6-2.175-1.45-.875-3.2-1.125L26.2 7h-4.4l-.7 5.6q-1.7.35-3.175 1.2-1.475.85-2.625 2.1L10 13.6l-2 3.6 4.7 3.45q-.2.85-.325 1.675-.125.825-.125 1.675 0 .85.125 1.675.125.825.325 1.675L8 30.8l2 3.6 5.3-2.3q1.2 1.2 2.675 2.05Q19.45 35 21.1 35.4Z"})))},tab:ce},{name:"Environment",icon:function(e){var t=e.title,n=e.titleId,i=dt(e,ut);return a.createElement("svg",ht({xmlns:"http://www.w3.org/2000/svg",height:24,width:24,viewBox:"0 0 48 48","aria-labelledby":n},i),t?a.createElement("title",{id:n},t):null,lt||(lt=a.createElement("path",{d:"M24 42q-3.15 0-5.325-2.175Q16.5 37.65 16.5 34.5H9q-1.2 0-2.1-.9-.9-.9-.9-2.1 0-7.6 4.675-12.9 4.675-5.3 11.825-5.85V6h3v6.75q7.15.55 11.825 5.85Q42 23.9 42 31.5q0 1.2-.9 2.1-.9.9-2.1.9h-7.5q0 3.15-2.175 5.325Q27.15 42 24 42ZM9 31.5h30q0-6.6-4.375-11.175Q30.25 15.75 24 15.75t-10.625 4.575Q9 24.9 9 31.5ZM24 39q1.9 0 3.2-1.3 1.3-1.3 1.3-3.2h-9q0 1.9 1.3 3.2Q22.1 39 24 39Zm0-4.5Z"})))},tab:_e},{name:"Download",icon:Te.Z,tab:Ae},{name:"Animation",icon:gt,tab:Qe},{name:"Annotation",icon:bt,tab:et}],Ot=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={selectedMenu:0},n}return(0,r.Z)(t,e),t.prototype.render=function(){var e,t=this,n=this.state.selectedMenu;return a.createElement("aside",{className:(0,f.Z)(tt)},a.createElement("div",{className:nt},xt.map((function(e,i){return a.createElement("div",{key:i,"data-tip":e.name,onClick:function(){t.setState({selectedMenu:i})},className:(0,f.Z)(it,"px-3","py-2")},(r=e.icon,a.createElement(r,{width:24,height:24,className:(0,f.Z)(rt,i===n?at:"")})));var r}))),(e=xt[n].tab,a.createElement(e,null)))},t}(a.Component),Pt=n(8906),Tt=n(4412),St="modelInfo_qyxO",kt=n(5130),Mt=function(e){function t(){return e.apply(this,arguments)||this}(0,r.Z)(t,e);var n=t.prototype;return n.render=function(){var e=this.context.state,t=e.originalModel;if(!t)return a.createElement(a.Fragment,null);var n=e.view3D.model!==t?e.view3D.model:null;return a.createElement("div",{className:St},a.createElement("div",{className:"p-4"},a.createElement("div",null,"src: ",t.src),a.createElement("div",{className:"is-flex is-flex-direction-row is-align-items-center"},a.createElement("span",{className:"mr-1"},"vertices:"),a.createElement("span",null,this._getVertexCount(t)),n&&a.createElement(a.Fragment,null,a.createElement(kt.Z,null),a.createElement("span",null,this._getVertexCount(n)))),a.createElement("div",{className:"is-flex is-flex-direction-row is-align-items-center"},a.createElement("span",{className:"mr-1"},"triangles:"),a.createElement("span",null,this._getTriangleCount(t)),n&&a.createElement(a.Fragment,null,a.createElement(kt.Z,null),a.createElement("span",null,this._getTriangleCount(n))))))},n._getVertexCount=function(e){return e.meshes.reduce((function(e,t){return t.geometry.attributes.position?e+t.geometry.attributes.position.count:e}),0)},n._getTriangleCount=function(e){return e.meshes.reduce((function(e,t){return t.geometry.index?e+t.geometry.index.count/3:e}),0)},t}(a.Component);Mt.contextType=h;var Ct,Rt,Nt=Mt,Dt="container_Bdc6",Ft="head_RiVR",At="headItem_B1K4",Lt="headInput_iyfD",It="body_HDUJ",zt="canvasWrapper_oDxl",Zt="canvas_V_kU",Ut="dropdownOverlay_FvkZ",jt="dropdownBox_sUFQ",Ht="dropdownFileInput_X5Sf",Bt="resetBtn_l0rX",Vt="resetIcon_l153",Wt=["title","titleId"];function Gt(){return Gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Gt.apply(this,arguments)}function Qt(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var qt=function(e){var t=e.title,n=e.titleId,i=Qt(e,Wt);return a.createElement("svg",Gt({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,"aria-labelledby":n},i),t?a.createElement("title",{id:n},t):null,Ct||(Ct=a.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),Rt||(Rt=a.createElement("path",{d:"M6 13c0-1.65.67-3.15 1.76-4.24L6.34 7.34A8.014 8.014 0 0 0 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91zm14 0c0-4.42-3.58-8-8-8-.06 0-.12.01-.18.01l1.09-1.09L11.5 2.5 8 6l3.5 3.5 1.41-1.41-1.08-1.08c.06 0 .12-.01.17-.01 3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93z"})))},Xt=function(e){function t(t){var n;return(n=e.call(this,t)||this)._widthRef=a.createRef(),n._heightRef=a.createRef(),n.state={overrideSize:!1},n}(0,r.Z)(t,e);var i=t.prototype;return i.componentDidMount=function(){var e=n(7473).SimpleDropzone,t=this.context.dispatch,i=new N.ZP("#playground-view3d",{src:"/egjs-view3d/model/cube.glb",autoplay:!0,plugins:[new N.Ff({type:"top"})]}).on("ready",(function(){t({type:"set_orig_model",val:i.model}),t({type:"set_loading",val:!1})}));this._widthRef.current.value=i.rootEl.clientWidth.toString(),this._heightRef.current.value=i.rootEl.clientHeight.toString(),N.EP.setMeshoptDecoder("/egjs-view3d/lib/meshopt_decoder.js"),new e(document.querySelector("#playground-container"),document.querySelector("#dropdown-file")).on("drop",(function(e){for(var n,r=e.files,a=null,o=(0,Pt.Z)(r);!(n=o()).done;){var s=n.value[0];if(/.hdr$/i.test(s)){a=s;break}}if(a){var c=URL.createObjectURL(e.files.get(a));F(i,t,c)}else D(i,t,e.files)})),this._listenAnnotationAdd(i,t),t({type:"set_view3d",val:i})},i.render=function(){var e=this;return a.createElement(h.Consumer,null,(function(t){var n=t.state;return a.createElement(a.Fragment,null,a.createElement("div",{id:"playground-container",className:Dt},a.createElement("div",{className:Ft},a.createElement("div",{className:At},a.createElement("span",{className:"my-0 menu-label"},"Override canvas size"),a.createElement("input",{className:"checkbox mr-2",type:"checkbox",defaultChecked:e.state.overrideSize,onChange:function(t){var i=n.view3D,r=parseFloat(e._widthRef.current.value),a=parseFloat(e._heightRef.current.value);t.currentTarget.checked?e._setNewCanvasSize(i,r,a):(i.renderer.resize(),i.autoResize=!0,i.rootEl.style.cssText=""),e.setState({overrideSize:t.currentTarget.checked})}})),a.createElement("div",{className:At},a.createElement("span",{className:"menu-label my-0 mr-2"},"Canvas Width"),a.createElement("input",{ref:e._widthRef,className:(0,f.Z)(Lt,"input is-small"),disabled:!e.state.overrideSize,type:"number",defaultValue:640,min:1})),a.createElement("div",{className:At},a.createElement("span",{className:"menu-label my-0 mr-2"},"Canvas Height"),a.createElement("input",{ref:e._heightRef,className:(0,f.Z)(Lt,"input is-small"),disabled:!e.state.overrideSize,type:"number",defaultValue:480,min:1})),a.createElement("div",{className:At},a.createElement("button",{className:"button is-small menu-label",onClick:function(){var t=n.view3D,i=parseFloat(e._widthRef.current.value),r=parseFloat(e._heightRef.current.value);e._setNewCanvasSize(t,i,r)}},"Apply"))),a.createElement("div",{id:"canvas-body",className:It},!n.initialized&&a.createElement("div",{className:(0,f.Z)("has-text-white is-size-3",Ut)},a.createElement("label",{htmlFor:"dropdown-file",className:(0,f.Z)("p-2",jt)},a.createElement("span",null,"Drag ",a.createElement("img",{src:"/egjs-view3d/img/cube_white.svg",style:{width:"48px",height:"48px"}})," glTF 2.0 files, zip or folder here"),a.createElement("input",{id:"dropdown-file",className:Ht,type:"file",multiple:!0}))),a.createElement("div",{id:"playground-view3d",className:(0,f.Z)("view3d-wrapper",zt)},a.createElement("canvas",{className:(0,f.Z)("view3d-canvas",Zt)})),a.createElement("div",{"data-tip":"Reset Camera",className:(0,f.Z)(Bt,"button","is-rounded"),onClick:function(){n.view3D.camera.reset(500)}},a.createElement(qt,{width:"32",height:"32",className:Vt})),a.createElement(Nt,null))))}))},i._setNewCanvasSize=function(e,t,n){var i=e.rootEl;e.autoResize=!1;var r=document.querySelector("#canvas-body"),a=e.renderer.canvas,o=r.clientWidth/r.clientHeight,s=t/n;if(s>o)i.style.paddingTop=100/s+"%",i.style.marginLeft="",i.style.marginRight="",i.style.height="auto";else{var c=.5*(100-100*s/o);i.style.paddingTop="",i.style.marginLeft=c+"%",i.style.marginRight=c+"%",i.style.height=""}e.resize(),e.renderer.threeRenderer.setSize(t,n,!1),e.renderer.canvasSize.set(a.clientWidth,a.clientHeight)},i._listenAnnotationAdd=function(e,t){var n=this,i=e.renderer.canvas,r=new Tt.iMs;i.addEventListener("dblclick",(function(a){var o=e.model;if(o){var s=new Tt.FM8;s.x=a.offsetX/i.clientWidth*2-1,s.y=-a.offsetY/i.clientHeight*2+1,r.setFromCamera(s,e.camera.threeCamera);var c=r.intersectObjects([o.scene]);if(c.length){var l=e.camera.currentPose,u=document.createElement("div");u.classList.add("view3d-annotation"),u.classList.add("default");var h=document.createElement("div");h.classList.add("view3d-annotation-tooltip"),h.classList.add("default"),u.appendChild(h),e.annotation.wrapper.appendChild(u);var d=c[0],f=e.renderer.size,v=Math.max(f.height/f.width,1),p=o.meshes.findIndex((function(e){return e===c[0].object})),_=d.faceIndex,m=(0,K.pU)(o,p,_);if(m){var g=n._getBarycentricWeight(d.point,m),y=new N.NL(e,{element:u,baseFov:e.camera.baseFov,baseDistance:e.camera.baseDistance,aspect:v,focus:[l.yaw,l.pitch,l.zoom],meshIndex:p,faceIndex:_,weights:g});y.uuid=Tt.M8C.generateUUID(),e.annotation.add(y),e.renderer.renderSingleFrame(),t({type:"set_loading",val:!1})}}}}))},i._getBarycentricWeight=function(e,t){var n=(new Tt.Pa4).subVectors(t[0],e),i=(new Tt.Pa4).subVectors(t[1],e),r=(new Tt.Pa4).subVectors(t[2],e),a=(new Tt.Pa4).crossVectors((new Tt.Pa4).subVectors(n,i),(new Tt.Pa4).subVectors(n,r)).length();return[(new Tt.Pa4).crossVectors(i,r).length()/a,(new Tt.Pa4).crossVectors(n,r).length()/a,(new Tt.Pa4).crossVectors(n,i).length()/a]},t}(a.Component);Xt.contextType=h;var Yt=Xt,Kt=function(e){function t(){return e.apply(this,arguments)||this}(0,r.Z)(t,e);var n=t.prototype;return n.componentDidUpdate=function(){o.Z.rebuild()},n.render=function(){return a.createElement(s.Z,null,a.createElement(d,null,a.createElement("div",{className:c},a.createElement(Ot,null),a.createElement(Yt,null)),a.createElement(o.Z,{effect:"solid",place:"bottom"})))},t}(a.Component),Jt=Kt},1266:function(e,t,n){n.d(t,{FP:function(){return o},T:function(){return i},WV:function(){return s},cj:function(){return r},o2:function(){return c},wZ:function(){return a}});var i,r=function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1},a=function(){return/android/i.test(navigator.userAgent)},o={MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",MOUSE_UP:"mouseup",TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",WHEEL:"wheel",RESIZE:"resize",CONTEXT_MENU:"contextmenu",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",LOAD:"load",ERROR:"error",CLICK:"click",CONTEXT_LOST:"webglcontextlost",CONTEXT_RESTORED:"webglcontextrestored"},s={GRAB:"grab",GRABBING:"grabbing",NONE:""};!function(e){e[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT"}(i||(i={}));Number.MAX_SAFE_INTEGER;var c="anonymous"},625:function(e,t,n){n.d(t,{FW:function(){return h},Fw:function(){return o},QU:function(){return p},XK:function(){return s},Xt:function(){return r},eA:function(){return v},es:function(){return d},oK:function(){return l},xg:function(){return c},y2:function(){return u},yt:function(){return f},zn:function(){return a}});var i=n(5702),r=i.Xt.EASE_OUT_CUBIC,a=300,o=!1,s={min:0,max:1},c=45,l={min:-1/0,max:1/0},u={min:-89.9,max:89.9},h={165:0,135:.4,0:1},d="view3d-ar-overlay",f="https://www.gstatic.com/draco/versioned/decoders/1.4.1/",v="https://unpkg.com/three@0.134.0/examples/js/libs/basis/",p=[i.ok.WEBXR,i.ok.SCENE_VIEWER,i.ok.QUICK_LOOK]},9911:function(e,t,n){t.ZP={CODES:{WRONG_TYPE:0,ELEMENT_NOT_FOUND:1,CANVAS_NOT_FOUND:2,WEBGL_NOT_SUPPORTED:3,PROVIDE_SRC_FIRST:4,PROVIDE_WIDTH_OR_HEIGHT:5,FORMAT_NOT_SUPPORTED:6,FILE_NOT_SUPPORTED:7,NOT_INITIALIZED:8,MODEL_FAIL_TO_LOAD:9},MESSAGES:{WRONG_TYPE:function(e,t){return typeof e+" is not a "+t.map((function(e){return'"'+e+'"'})).join(" or ")+"."},ELEMENT_NOT_FOUND:function(e){return'Element with selector "'+e+'" not found.'},CANVAS_NOT_FOUND:"The canvas element was not found inside the given root element.",WEBGL_NOT_SUPPORTED:"WebGL is not supported on this browser.",PROVIDE_SRC_FIRST:'"src" should be provided before initialization.',PROVIDE_WIDTH_OR_HEIGHT:"Either width or height should be given.",FORMAT_NOT_SUPPORTED:function(e){return'Given format "'+e+'" is not supported or invalid.'},FILE_NOT_SUPPORTED:function(e){return'Given file "'+e+'" is not supported.'},NOT_INITIALIZED:"View3D is not initialized yet.",MODEL_FAIL_TO_LOAD:function(e){return'Failed to load/parse the 3D model with the given url: "'+e+'". Check "loadError" event for actual error instance.'}}}},5702:function(e,t,n){n.d(t,{B7:function(){return r},FP:function(){return a},Qz:function(){return s},Xi:function(){return h},Xt:function(){return o},bU:function(){return c},ok:function(){return u},rC:function(){return d},sO:function(){return l}});var i=n(4412),r=(n(9911),"auto"),a={READY:"ready",LOAD_START:"loadStart",LOAD:"load",LOAD_ERROR:"loadError",LOAD_FINISH:"loadFinish",MODEL_CHANGE:"modelChange",RESIZE:"resize",BEFORE_RENDER:"beforeRender",RENDER:"render",PROGRESS:"progress",INPUT_START:"inputStart",INPUT_END:"inputEnd",CAMERA_CHANGE:"cameraChange",AR_START:"arStart",AR_END:"arEnd",AR_MODEL_PLACED:"arModelPlaced",QUICK_LOOK_TAP:"quickLookTap"},o={SINE_WAVE:function(e){return Math.sin(e*Math.PI*2)},EASE_OUT_CUBIC:function(e){return 1-Math.pow(1-e,3)},EASE_OUT_BOUNCE:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}},s={POSTER:"view3d-poster",AR_OVERLAY:"view3d-ar-overlay",ANNOTATION_WRAPPER:"view3d-annotation-wrapper",ANNOTATION:"view3d-annotation",ANNOTATION_TOOLTIP:"view3d-annotation-tooltip",ANNOTATION_DEFAULT:"default",ANNOTATION_SELECTED:"selected",ANNOTATION_FLIP_X:"flip-x",ANNOTATION_FLIP_Y:"flip-y",CTX_LOST:"ctx-lost"},c={LINEAR:i.EoG,REINHARD:i.CdI,CINEON:i.YGz,ACES_FILMIC:i.LY2},l={FOV:"fov",DISTANCE:"distance"},u={WEBXR:"webAR",SCENE_VIEWER:"sceneViewer",QUICK_LOOK:"quickLook"},h={ONLY_AR:"ar_only",ONLY_3D:"3d_only",PREFER_AR:"ar_preferred",PREFER_3D:"3d_preferred"},d={ROTATE:0,TRANSLATE:1,ZOOM:2}},8630:function(e,t,n){n.d(t,{Fy:function(){return s},HZ:function(){return c},QA:function(){return a},ei:function(){return o},u1:function(){return i},xI:function(){return r}});var i,r=["alphaMap","aoMap","bumpMap","displacementMap","emissiveMap","envMap","lightMap","map","metalnessMap","normalMap","roughnessMap","sheenColorMap","sheenRoughnessMap","specularColorMap","specularIntensityMap","transmissionMap","clearcoatMap","clearcoatNormalMap"],a={HOLD:"hold",RELEASE:"release",ENABLE:"enable",DISABLE:"disable"};!function(e){e[e.NONE=0]="NONE",e[e.ONE_FINGER_HORIZONTAL=1]="ONE_FINGER_HORIZONTAL",e[e.ONE_FINGER_VERTICAL=2]="ONE_FINGER_VERTICAL",e[e.ONE_FINGER=3]="ONE_FINGER",e[e.TWO_FINGER_HORIZONTAL=4]="TWO_FINGER_HORIZONTAL",e[e.TWO_FINGER_VERTICAL=8]="TWO_FINGER_VERTICAL",e[e.TWO_FINGER=12]="TWO_FINGER",e[e.PINCH=16]="PINCH"}(i||(i={}));var o="EXT_View3D_texture_LOD",s="view3d-lod",c="view3d-annotation"},9254:function(e,t,n){var i=n(3144),r=n(3795),a=n(625),o=n(8519),s=function(){function e(e,t,n,i){var o=void 0===i?{}:i,s=o.duration,c=void 0===s?a.zn:s,l=o.easing,u=void 0===l?a.Xt:l,h=o.disableOnFinish,d=void 0===h||h;this._enabled=!1,this._finishCallbacks=[],this._view3D=e,this._motion=new r.Z({duration:c,range:a.XK,easing:u}),this._disableOnFinish=d,this.changeStartEnd(t,n)}var t=e.prototype;return t.destroy=function(){this.disable()},t.changeStartEnd=function(e,t){e=e.clone(),t=t.clone(),e.yaw=(0,o.zc)(e.yaw,0,360),t.yaw=(0,o.zc)(t.yaw,0,360),Math.abs(t.yaw-e.yaw)>180&&(t.yaw=t.yaw<e.yaw?t.yaw+360:t.yaw-360),this._from=e,this._to=t},t.update=function(e){if(this._enabled){var t=this._view3D.camera,n=this._from,i=this._to,r=this._motion;r.update(e);var a=r.val;t.yaw=(0,o.t7)(n.yaw,i.yaw,a),t.pitch=(0,o.t7)(n.pitch,i.pitch,a),t.zoom=(0,o.t7)(n.zoom,i.zoom,a),t.pivot=n.pivot.clone().lerp(i.pivot,a),a>=1&&(this._disableOnFinish&&this.disable(),this._finishCallbacks.forEach((function(e){return e()})),this.clearFinished())}},t.enable=function(){this._enabled||(this._enabled=!0,this.reset())},t.disable=function(){this._enabled&&(this._enabled=!1)},t.reset=function(){this._motion.reset(0),this._motion.setEndDelta(1)},t.onFinished=function(e){this._finishCallbacks.push(e)},t.clearFinished=function(){this._finishCallbacks=[]},t.resize=function(e){},t.sync=function(){},(0,i.Z)(e,[{key:"element",get:function(){return null}},{key:"enabled",get:function(){return this._enabled}},{key:"duration",get:function(){return this._motion.duration},set:function(e){this._motion.duration=e}},{key:"easing",get:function(){return this._motion.easing},set:function(e){this._motion.easing=e}},{key:"animating",get:function(){return this._motion.activated}}]),e}();t.Z=s},8412:function(e,t,n){n.d(t,{Z:function(){return ne}});var i,r=n(8906),a=n(5861),o=n(3144),s=n(7757),c=n.n(s),l=n(6872),u=n(4412),h=n(4253),d="immersive-ar",f="local",v="viewer",p="selectstart",_="selectend",m="generic-touchscreen",g={requiredFeatures:["hit-test"]},y=function(e){return e?{requiredFeatures:["dom-overlay"],domOverlay:{root:e}}:{}},w={},E=function(e,t){return"intent://arvr.google.com/scene-viewer/1.2?"+e+"#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;"+(t?"S.browser_fallback_url="+t+";":"")+"end;"},b=function(e,t){return"intent://arvr.google.com/scene-viewer/1.2?"+e+"#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;"+(t?"S.browser_fallback_url="+t+";":"")+"end;"},x=function(e){return"https://arvr.google.com/scene-viewer?"+e},O=n(8630),P=n(8519),T=n(3795),S=n(625),k=function(){function e(e){var t=(void 0===e?{}:e).scale,n=void 0===t?1:t;this.rotation=new u._fP,this._axis=new u.Pa4(0,1,0),this._enabled=!1,this._active=!1,this._prevPos=new u.FM8,this._fromQuat=new u._fP,this._toQuat=new u._fP,this._motion=new T.Z({range:S.oK}),this._userScale=n}var t=e.prototype;return t.updateRotation=function(e){this.rotation.copy(e),this._fromQuat.copy(e),this._toQuat.copy(e)},t.enable=function(){this._enabled=!0},t.disable=function(){this._enabled=!1},t.activate=function(){this._enabled&&(this._active=!0)},t.deactivate=function(){this._active=!1},t.updateAxis=function(e){this._axis.copy(e)},t.setInitialPos=function(e){this._prevPos.copy(e[0])},t.process=function(e,t){var n=e.scene,i=e.xrCam,r=t.coords;if(this._active&&1===r.length){var a=this._prevPos,o=this._motion,s=r[0],c=n.modelMovable.getWorldPosition(new u.Pa4),l=(new u.FM8).fromArray(c.project(i).toArray()),h=(0,P.cM)(l,a,s)*this._userScale,d=(new u._fP).setFromAxisAngle(this._axis,h),f=this._getInterpolatedQuaternion();this._fromQuat.copy(f),this._toQuat.premultiply(d),o.reset(0),o.setEndDelta(1),a.copy(s)}},t.update=function(e,t){var n=e.scene;if(this._active){this._motion.update(t);var i=this._getInterpolatedQuaternion();this.rotation.copy(i),n.setModelRotation(i)}},t._getInterpolatedQuaternion=function(){var e=this._motion,t=this._toQuat,n=this._fromQuat,i=e.val;return(new u._fP).copy(n).slerp(t,i)},(0,o.Z)(e,[{key:"enabled",get:function(){return this._enabled}},{key:"scale",get:function(){return this._userScale},set:function(e){this._userScale=e}}]),e}(),M=n(5702);!function(e){e[e.WAITING=0]="WAITING",e[e.TRANSLATING=1]="TRANSLATING",e[e.BOUNCING=2]="BOUNCING"}(i||(i={}));var C,R=function(){function e(e){var t=void 0===e?{}:e,n=t.hoverHeight,r=void 0===n?.1:n,a=t.bounceDuration,o=void 0===a?1e3:a,s=t.bounceEasing,c=void 0===s?M.Xt.EASE_OUT_BOUNCE:s;this._hoverPosition=new u.Pa4,this._floorPosition=new u.Pa4,this._wallRotation=new u._fP,this._dragPlane=new u.JOQ,this._enabled=!1,this._vertical=!1,this._state=i.WAITING,this._initialPos=new u.FM8,this._hoverHeight=r,this._bounceMotion=new T.Z({duration:o,easing:c,range:S.oK})}var t=e.prototype;return t.enable=function(){this._enabled=!0},t.disable=function(){this.deactivate(),this._enabled=!1},t.activate=function(){this._enabled&&(this._dragPlane.constant=this._calcDragPlaneConstant(this._floorPosition),this._state=i.TRANSLATING)},t.deactivate=function(){if(this._enabled&&!this._vertical&&this._state!==i.WAITING){this._state=i.BOUNCING;var e=this._floorPosition,t=this._hoverPosition,n=this._bounceMotion,r=t.y-e.y;n.reset(r),n.setEndDelta(-r)}else this._state=i.WAITING},t.init=function(e,t,n){this._floorPosition.copy(e),this._hoverPosition.copy(e);var i=n?new u.Pa4(0,1,0).applyQuaternion(t):new u.Pa4(0,1,0);this._dragPlane.normal.copy(i),this._wallRotation.copy(t),this._vertical=n},t.setInitialPos=function(e){this._initialPos.copy(e[0])},t.process=function(e,t){var n=e.frame,r=e.referenceSpace,a=e.xrCam,o=t.hitResults,s=this._state,c=s===i.WAITING||s===i.BOUNCING;if(o&&1===o.length&&!c){var l=o[0],h=this._floorPosition.clone(),d=this._floorPosition,f=this._hoverPosition,v=this._hoverHeight,p=this._dragPlane,_=this._vertical,m=l.results[0]&&l.results[0].getPose(r),g=m&&(new u.yGw).fromArray(m.transform.matrix),y=m&&g.elements[5]>.75,w=m&&g.elements[5]<.25,E=(new u.Pa4).setFromMatrixPosition(a.matrixWorld),b=m&&(new u.Pa4).setFromMatrixPosition(g);if(_){if(n&&(!m||!w)){var x=n.getPose(l.inputSource.targetRaySpace,r);if(!x)return;var O=x.transform.position,P=new u.Pa4(O.x,O.y,O.z).sub(E).normalize(),T=new u.zHn(E,P).intersectPlane(p,new u.Pa4);return void(T&&d.copy(T))}var S=new u.Pa4(0,1,0),k=m.transform.orientation,M=S.clone().applyQuaternion(new u._fP(k.x,k.y,k.z,k.w)).normalize(),C=(new u.Pa4).crossVectors(new u.Pa4(0,1,0),M),R=new u.Pa4(0,1,0).applyQuaternion(this._wallRotation).normalize();if(Math.acos(Math.abs(R.dot(M)))>=Math.PI/18){var N=(new u.yGw).makeBasis(C,S,M),D=new u.USm(0,0,0,"YXZ").setFromRotationMatrix(N);D.z=0,D.x=Math.PI/2,this._wallRotation.setFromEuler(D),p.normal.copy(new u.Pa4(0,1,0).applyQuaternion(this._wallRotation)),p.constant=this._calcDragPlaneConstant(b)}var F=(new u.Pa4).subVectors(b,E).normalize(),A=new u.zHn(E,F).intersectPlane(p,new u.Pa4);if(!A)return;d.copy(A)}else{if(n&&(!m||!y)){var L=n.getPose(l.inputSource.targetRaySpace,r);if(!L)return;var I=L.transform.position,z=new u.Pa4(I.x,I.y,I.z).sub(E).normalize(),Z=new u.zHn(E,z).intersectPlane(p,new u.Pa4);return void(Z&&(d.copy(Z),d.setY(h.y),f.copy(Z)))}var U=-p.constant,j=b.y+v;j-U>.1&&(p.constant=-j);var H=(new u.Pa4).subVectors(b,E).normalize(),B=new u.zHn(E,H).intersectPlane(p,new u.Pa4);if(!B)return;d.copy(B),d.setY(b.y),f.copy(B)}}},t.update=function(e,t){var n=e.scene,r=this._state,a=this._floorPosition,o=this._hoverPosition,s=this._bounceMotion,c=this._vertical;r===i.BOUNCING&&(s.update(t),o.setY(a.y+s.val),s.progress>=1&&(this._state=i.WAITING)),n.setRootPosition(a),c?n.setWallRotation(this._wallRotation):n.setModelHovering(o.y-a.y)},t._calcDragPlaneConstant=function(e){var t=this._vertical,n=this._dragPlane.normal.clone(),i=new u.JOQ(n,0),r=t?0:this._hoverHeight;return-(i.distanceToPoint(e)+r)},(0,o.Z)(e,[{key:"enabled",get:function(){return this._enabled}},{key:"floorPosition",get:function(){return this._floorPosition.clone()}},{key:"hoverHeight",get:function(){return this._hoverHeight},set:function(e){this._hoverHeight=e}}]),e}(),N=function(){function e(e){var t=void 0===e?{}:e,n=t.width,i=void 0===n?.1:n,r=t.padding,a=void 0===r?20:r,o=t.offset,s=void 0===o?.05:o,c=t.font,l=void 0===c?"64px sans-serif":c,h=t.color,d=void 0===h?"white":h,f=document.createElement("canvas"),v=f.getContext("2d");v.font=l;var p=v.measureText("100%"),_=p.actualBoundingBoxLeft+p.actualBoundingBoxRight,m=p.actualBoundingBoxAscent+p.actualBoundingBoxDescent,g=(0,P.hl)(_);f.width=g,f.height=g;var y=i*(g/_);this._ctx=v,this._canvas=f,this._height=y*m/_,this._texture=new u.ROQ(f);var w=new u._12(y,y),E=new u.Kj0(w,new u.vBJ({map:this._texture,transparent:!0,depthTest:!1}));this._mesh=E,this._font=l,this._color=d,this._padding=a,this._offset=s,this.hide()}var t=e.prototype;return t.updatePosition=function(e,t,n){var i=this._mesh,r=this._height/2+this._offset+n,a=new u.Pa4(0,r,0).applyQuaternion(e.clone().invert());i.position.copy(a),i.lookAt(t)},t.updateScale=function(e){var t=this._ctx,n=this._canvas,i=this._padding,r=(100*e).toFixed(0);t.clearRect(0,0,n.width,n.height);var a=n.width/2,o=n.height/2,s=t.measureText(r+"%"),c=(s.actualBoundingBoxLeft+s.actualBoundingBoxRight)/2,l=(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)/2;t.beginPath(),t.moveTo(a-c,o-l-i),t.lineTo(a+c,o-l-i),t.quadraticCurveTo(a+c+i,o-l-i,a+c+i,o-l),t.lineTo(a+c+i,o+l),t.quadraticCurveTo(a+c+i,o+l+i,a+c,o+l+i),t.lineTo(a-c,o+l+i),t.quadraticCurveTo(a-c-i,o+l+i,a-c-i,o+l),t.lineTo(a-c-i,o-l),t.quadraticCurveTo(a-c-i,o-l-i,a-c,o-l-i),t.closePath(),t.lineWidth=5,t.fillStyle="rgba(0, 0, 0, 0.3)",t.fill(),t.stroke(),t.font=this._font,t.textAlign="center",t.textBaseline="middle",t.strokeStyle=this._color,t.fillStyle=this._color,t.fillText(r+"%",a,o),this._texture.needsUpdate=!0,this._mesh.scale.setScalar(1/e)},t.show=function(){this._mesh.visible=!0},t.hide=function(){this._mesh.visible=!1},(0,o.Z)(e,[{key:"mesh",get:function(){return this._mesh}},{key:"height",get:function(){return this._height}},{key:"visible",get:function(){return this._mesh.visible}}]),e}(),D=function(){function e(e){var t=void 0===e?{}:e,n=t.min,i=void 0===n?.05:n,r=t.max,a=void 0===r?5:r;this._enabled=!1,this._active=!1,this._prevCoordDistance=-1,this._scaleMultiplier=1,this._ui=new N,this._motion=new T.Z({duration:0,range:{min:i,max:a}}),this._motion.reset(1),this._ui=new N}var t=e.prototype;return t.setInitialScale=function(e){var t=e.scene,n=e.model,i=e.floorPosition,r=e.xrCam,a=e.initialScale,o=this._motion,s=o.range;if(a===M.B7){var c=2*Math.atan(1/r.projectionMatrix.elements[5]),l=r.projectionMatrix.elements[0]/r.projectionMatrix.elements[5],h=r.position,d=n.bbox.max.y-n.bbox.min.y,f=h.distanceTo((new u.Pa4).addVectors(i,new u.Pa4(0,d/2,0)))*Math.tan(c/2),v=f*l,p=n.bbox.getBoundingSphere(new u.aLr),_=f/p.radius,m=v/p.radius,g=(0,P.uZ)(Math.min(m,_),s.min,1);o.reset(g)}else o.reset((0,P.uZ)(a,s.min,s.max));var y=this._motion.val;this._scaleMultiplier=y,t.setModelScale(y)},t.setInitialPos=function(e){this._prevCoordDistance=(new u.FM8).subVectors(e[0],e[1]).length()},t.enable=function(){this._enabled=!0},t.disable=function(){this._enabled=!1,this.deactivate()},t.activate=function(e){this._active=!0,this._ui.show(),this._updateUIPosition(e)},t.deactivate=function(){this._active=!1,this._ui.hide(),this._prevCoordDistance=-1},t.process=function(e,t){var n=t.coords;if(2===n.length&&this._enabled&&this._active){var i=this._motion,r=(new u.FM8).subVectors(n[0],n[1]).length(),a=r-this._prevCoordDistance;i.setEndDelta(a),this._prevCoordDistance=r,this._updateUIPosition(e)}},t.update=function(e,t){var n=e.scene;if(this._enabled&&this._active){var i=this._motion;i.update(t),this._scaleMultiplier=i.val,this._ui.updateScale(this._scaleMultiplier),n.setModelScale(this._scaleMultiplier)}},t._updateUIPosition=function(e){var t=e.view3D,n=e.scene,i=e.xrCam,r=e.vertical,a=t.model,o=(new u.Pa4).setFromMatrixPosition(i.matrixWorld),s=r?a.bbox.getBoundingSphere(new u.aLr).radius:a.bbox.max.y-a.bbox.min.y;this._ui.updatePosition(n.root.quaternion,o,s)},(0,o.Z)(e,[{key:"enabled",get:function(){return this._enabled}},{key:"scale",get:function(){return this._scaleMultiplier}},{key:"ui",get:function(){return this._ui}},{key:"range",get:function(){return this._motion.range}}]),e}(),F=function(){function e(e){var t=void 0===e?{}:e,n=t.ringOpacity,i=void 0===n?.3:n,r=t.dirIndicatorOpacity,a=void 0===r?1:r,o=t.fadeoutDuration,s=void 0===o?1e3:o,c=Math.PI/18,l=new u.o8S(.975,1,150,1,-6*c,30*c);l.rotateX(-Math.PI/2);for(var h=new u.o8S(.96,1.015,30,1,25*c,4*c),d=h.attributes.position,f=Math.floor(11*d.count/16),v=Math.floor(13*d.count/16),p=Math.floor((v-f+1)/2),_=(new u.Pa4).fromBufferAttribute(d,f).y,m=f;m<v;m++){var g=m-f,y=.025*(p-Math.abs(g-p));d.setY(m,_-y)}h.rotateX(-Math.PI/2);var w=new u.vBJ({transparent:!0,opacity:i,color:16777215}),E=new u.vBJ({transparent:!0,opacity:a,color:16777215}),b=new u.Kj0(l,w),x=new u.Kj0(h,E),O=new u.ZAu;O.add(b,x),O.position.setY(1e-4),this._mesh=O,this._ring=b,this._arrow=x,this._animator=new T.Z({duration:s}),this._opacityRange={min:i,max:a},this.hide()}var t=e.prototype;return t.updateSize=function(e){this._mesh.scale.setScalar(e.bbox.getBoundingSphere(new u.aLr).radius)},t.update=function(e){var t=e.delta,n=e.rotation,i=this._mesh,r=this._animator;if(i.visible){r.update(t);var a=this._ring.material,o=this._arrow.material,s=this._opacityRange;a.opacity=r.val*s.min,o.opacity=r.val*s.max,r.val<=0&&(i.visible=!1),i.quaternion.copy(n),i.updateMatrix()}},t.show=function(){this._mesh.visible=!0,this._animator.reset(1)},t.hide=function(){this._mesh.visible=!1},t.fadeout=function(){this._animator.setEndDelta(-1)},(0,o.Z)(e,[{key:"mesh",get:function(){return this._mesh}}]),e}();!function(e){e[e.WAITING=0]="WAITING",e[e.IN_DEADZONE=1]="IN_DEADZONE",e[e.OUT_OF_DEADZONE=2]="OUT_OF_DEADZONE"}(C||(C={}));var A=function(){function e(e){var t=(void 0===e?{}:e).size,n=void 0===t?.1:t;this._state=C.WAITING,this._detectedGesture=O.u1.NONE,this._testingGestures=O.u1.NONE,this._lastFingerCount=0,this._aspect=1,this._prevOneFingerPos=new u.FM8,this._prevTwoFingerPos=new u.FM8,this._initialTwoFingerDistance=0,this._prevOneFingerPosInitialized=!1,this._prevTwoFingerPosInitialized=!1,this._size=n}var t=e.prototype;return t.setAspect=function(e){this._aspect=e},t.setFirstInput=function(e){var t=e.length;1!==t||this._prevOneFingerPosInitialized?2!==t||this._prevTwoFingerPosInitialized||(this._prevTwoFingerPos.copy((new u.FM8).addVectors(e[0],e[1]).multiplyScalar(.5)),this._initialTwoFingerDistance=(new u.FM8).subVectors(e[0],e[1]).length(),this._prevTwoFingerPosInitialized=!0):(this._prevOneFingerPos.copy(e[0]),this._prevOneFingerPosInitialized=!0),this._lastFingerCount=t,this._state=C.IN_DEADZONE},t.addTestingGestures=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._testingGestures=this._testingGestures|t.reduce((function(e,t){return e|t}),O.u1.NONE)},t.cleanup=function(){this._testingGestures=O.u1.NONE,this._lastFingerCount=0,this._prevOneFingerPosInitialized=!1,this._prevTwoFingerPosInitialized=!1,this._initialTwoFingerDistance=0,this._detectedGesture=O.u1.NONE,this._state=C.WAITING},t.applyScreenAspect=function(e){var t=this._aspect;e.forEach((function(e){t>1?e.setY(e.y*t):e.setX(e.x/t)}))},t.check=function(e){var t=this._state,n=this._size,i=this._testingGestures,r=this._lastFingerCount,a=e.length;if(t===C.OUT_OF_DEADZONE)return this._detectedGesture;if(this._lastFingerCount=a,this.applyScreenAspect(e),a!==r)return this.setFirstInput(e),O.u1.NONE;if(1===a){var o=e[0],s=this._prevOneFingerPos.clone(),c=(new u.FM8).subVectors(o,s);c.length()>n&&(Math.abs(c.x)>Math.abs(c.y)?O.u1.ONE_FINGER_HORIZONTAL&i&&(this._detectedGesture=O.u1.ONE_FINGER_HORIZONTAL):O.u1.ONE_FINGER_VERTICAL&i&&(this._detectedGesture=O.u1.ONE_FINGER_VERTICAL))}else if(2===a){var l=(new u.FM8).addVectors(e[1],e[0]).multiplyScalar(.5),h=this._prevTwoFingerPos.clone(),d=(new u.FM8).subVectors(l,h);d.length()>n&&(Math.abs(d.x)>Math.abs(d.y)?O.u1.TWO_FINGER_HORIZONTAL&i&&(this._detectedGesture=O.u1.TWO_FINGER_HORIZONTAL):O.u1.TWO_FINGER_VERTICAL&i&&(this._detectedGesture=O.u1.TWO_FINGER_VERTICAL));var f=(new u.FM8).subVectors(e[1],e[0]).length();Math.abs(f-this._initialTwoFingerDistance)>n&&O.u1.PINCH&i&&(this._detectedGesture=O.u1.PINCH)}return this._detectedGesture!==O.u1.NONE&&(this._state=C.OUT_OF_DEADZONE),this._detectedGesture},(0,o.Z)(e,[{key:"size",get:function(){return this._size},set:function(e){this._size=e}},{key:"inDeadzone",get:function(){return this._state===C.IN_DEADZONE}}]),e}(),L=A,I=function(){function e(e,t,n){var i=this,r=n.rotate,a=n.translate,o=n.scale,s=n.ring,c=n.deadzone,l=n.initialScale;this._onSelectStart=function(e){var t=e.frame,n=i._view3D,r=i._arScene,a=i._hitTestSource,o=i._deadzoneChecker,s=i._rotateControl,c=i._translateControl,l=i._scaleControl,h=n.renderer.threeRenderer,d=h.xr.getCamera(new u.cPb),f=h.xr.getReferenceSpace();if(a&&!(d.cameras.length<=0)){var v=d.cameras[0],p=n.model;s.enabled&&o.addTestingGestures(O.u1.ONE_FINGER),c.enabled&&o.addTestingGestures(O.u1.ONE_FINGER),l.enabled&&o.addTestingGestures(O.u1.PINCH);var _=t.getHitTestResultsForTransientInput(a),m=i._hitResultToVector(_);if(o.applyScreenAspect(m),o.setFirstInput(m),1===m.length){var g=t.getPose(_[0].inputSource.targetRaySpace,f);if(g){var y=(new u.Pa4).setFromMatrixPosition(v.matrixWorld),w=g.transform.position,E=new u.Pa4(w.x,w.y,w.z).sub(y).normalize(),b=new u.zHn(y,E),x=p.bbox.getBoundingSphere(new u.aLr);x.applyMatrix4(r.modelMovable.matrixWorld),b.intersectSphere(x,new u.Pa4)&&(i._modelHit=!0)}}i._vertical&&!i._modelHit||i._floorIndicator.show()}},this._onSelectEnd=function(){i._deactivate(),i._floorIndicator.fadeout()},this._view3D=e,this._arScene=t,this._vertical=!1,this._initialized=!1,this._modelHit=!1,this._hitTestSource=null,this._rotate=r,this._translate=a,this._scale=o,this._initialScale=l,this._rotateControl=new k((0,P.PO)(r)),this._translateControl=new R((0,P.PO)(a)),this._scaleControl=new D((0,P.PO)(o)),this._floorIndicator=new F(s),this._deadzoneChecker=new L(c)}var t=e.prototype;return t.init=function(){var e=(0,a.Z)(c().mark((function e(t){var n,i,r,a,o,s,l,u,h,d,f,v;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.model,i=t.session,r=t.size,a=t.vertical,o=t.hitPosition,s=t.hitRotation,l=this._arScene,u=this._translateControl,h=this._scaleControl,d=this._floorIndicator,f=this._deadzoneChecker,this._vertical=a,u.init(o,s,a),f.setAspect(r.height/r.width),l.add(d.mesh,h.ui.mesh),this.syncTargetModel(n),e.next=13,i.requestHitTestSourceForTransientInput({profile:m});case 13:v=e.sent,this._hitTestSource=v,this._initialized=!0;case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.destroy=function(e){this._initialized&&(this._hitTestSource&&(this._hitTestSource.cancel(),this._hitTestSource=null),this.disable(e),this._floorIndicator.hide(),this._scaleControl.ui.hide(),e.removeEventListener(p,this._onSelectStart),e.removeEventListener(_,this._onSelectEnd),this._initialized=!1)},t.enable=function(e){var t=this._rotate,n=this._translate,i=this._scale,r=this._rotateControl,a=this._translateControl,o=this._scaleControl,s=this._vertical;e.addEventListener(p,this._onSelectStart),e.addEventListener(_,this._onSelectEnd),t&&!s&&r.enable(),n&&a.enable(),i&&o.enable()},t.disable=function(e){var t=this._rotateControl,n=this._translateControl,i=this._scaleControl;e.removeEventListener(p,this._onSelectStart),e.removeEventListener(_,this._onSelectEnd),this._deactivate(),t.disable(),n.disable(),i.disable()},t.update=function(e){var t,n=e.view3D,i=e.session,r=e.frame,a=this._hitTestSource;if(a&&n.model){var o=this._deadzoneChecker,s=i.inputSources,c=null!=(t=null==r?void 0:r.getHitTestResultsForTransientInput(a))?t:[],l={coords:this._hitResultToVector(c),inputSources:s,hitResults:c};o.inDeadzone?this._checkDeadzone(e,l):this._processInput(e,l),this._updateControls(e)}},t.syncTargetModel=function(e){var t=this._initialScale,n=this._translateControl.floorPosition,i=this._view3D.renderer.threeRenderer.xr.getCamera(new u.cPb).cameras[0];this._floorIndicator.updateSize(e),this._scaleControl.setInitialScale({scene:this._arScene,model:e,floorPosition:n,xrCam:i,initialScale:t})},t._deactivate=function(){this._modelHit=!1,this._deadzoneChecker.cleanup(),this._rotateControl.deactivate(),this._translateControl.deactivate(),this._scaleControl.deactivate()},t._checkDeadzone=function(e,t){var n=t.coords,i=this._arScene,r=this._rotateControl,a=this._translateControl,o=this._scaleControl,s=this._deadzoneChecker.check(n.map((function(e){return e.clone()})));if(s!==O.u1.NONE)switch(s){case O.u1.ONE_FINGER_HORIZONTAL:case O.u1.ONE_FINGER_VERTICAL:this._modelHit?(a.activate(),a.setInitialPos(n)):(r.activate(),r.updateRotation(i.modelMovable.quaternion),r.setInitialPos(n));break;case O.u1.PINCH:o.activate(e),o.setInitialPos(n)}},t._processInput=function(e,t){this._rotateControl.process(e,t),this._translateControl.process(e,t),this._scaleControl.process(e,t)},t._updateControls=function(e){var t=e.delta,n=this._arScene,i=this._rotateControl,r=this._translateControl,a=this._scaleControl,o=this._floorIndicator,s=1e3*t;i.update(e,s),r.update(e,s),a.update(e,s);var c=i.rotation,l=r.floorPosition;n.setRootPosition(l),o.update({delta:s,rotation:c})},t._hitResultToVector=function(e){return e.map((function(e){return(new u.FM8).set(e.inputSource.gamepad.axes[0],-e.inputSource.gamepad.axes[1])}))},(0,o.Z)(e,[{key:"rotate",get:function(){return this._rotateControl}},{key:"translate",get:function(){return this._translateControl}},{key:"scale",get:function(){return this._scaleControl}}]),e}(),z=I,Z=function(){function e(){this._root=new u.xsS,this._modelRoot=new u.ZAu,this._modelMovable=new u.ZAu,this._modelFixed=new u.ZAu,this._arRoot=new u.ZAu;var e=this._root,t=this._modelRoot,n=this._modelMovable,i=this._modelFixed,r=this._arRoot;t.add(n),e.add(t,i,r)}var t=e.prototype;return t.init=function(e){var t=this._root,n=this._modelMovable,i=this._modelFixed,r=e.scene;n.add(r.userObjects,r.envObjects),i.add(r.fixedObjects),t.environment=r.root.environment,this.hideModel()},t.destroy=function(e){var t=this._modelMovable,n=this._modelFixed,i=e.scene;[].concat(t.children,n.children).forEach((function(e){i.root.add(e)}))},t.showModel=function(){this._modelRoot.visible=!0},t.hideModel=function(){this._modelRoot.visible=!1},t.add=function(){var e;(e=this._arRoot).add.apply(e,arguments)},t.setRootPosition=function(e){this._root.position.copy(e)},t.setWallRotation=function(e){this._root.quaternion.copy(e)},t.updateModelRootPosition=function(e,t){var n=this._modelRoot;if(t){var i=e.bbox.max.y-e.bbox.min.y;n.position.setZ(i/2),n.position.setY(-e.bbox.min.z),n.rotateX(-Math.PI/2),n.updateMatrix()}},t.setModelHovering=function(e){this._modelMovable.position.setY(e)},t.setModelRotation=function(e){this._modelMovable.quaternion.copy(e)},t.setModelScale=function(e){this._root.scale.setScalar(e)},(0,o.Z)(e,[{key:"root",get:function(){return this._root}},{key:"modelRoot",get:function(){return this._modelRoot}},{key:"modelMovable",get:function(){return this._modelMovable}},{key:"arRoot",get:function(){return this._arRoot}}]),e}(),U=Z,j=function(){function e(){this._root=null}e.isAvailable=function(){return null!=window.XRDOMOverlayState};var t=e.prototype;return t.destroy=function(){this._root=null},t.getFeatures=function(e){return this._root=e,y(e)},(0,o.Z)(e,[{key:"root",get:function(){return this._root}}]),e}(),H=function(){function e(){this._source=null}e.isAvailable=function(){return window.XRSession&&window.XRSession.prototype.requestHitTestSource};var t=e.prototype;return t.destroy=function(){this._source&&(this._source.cancel(),this._source=null)},t.init=function(e){var t=this;e.requestReferenceSpace(v).then((function(n){e.requestHitTestSource({space:n}).then((function(e){t._source=e}))}))},t.getFeatures=function(){return g},t.getResults=function(e){var t;return null!=(t=null==e?void 0:e.getHitTestResults(this._source))?t:[]},(0,o.Z)(e,[{key:"ready",get:function(){return null!=this._source}}]),e}(),B=function(){function e(e,t){var n=void 0===t?{}:t,i=n.features,r=void 0===i?w:i,a=n.vertical,o=void 0!==a&&a,s=n.overlayRoot,c=void 0===s?null:s,l=n.rotate,u=void 0===l||l,h=n.translate,d=void 0===h||h,f=n.scale,v=void 0===f||f,p=n.ring,_=void 0===p?{}:p,m=n.deadzone,g=void 0===m?{}:m,y=n.initialScale,E=void 0===y?M.B7:y;this._view3D=e,this._modelPlaced=!1,this.features=r,this.vertical=o,this.overlayRoot=c,this._arScene=new U,this._control=new z(e,this._arScene,{rotate:u,translate:d,scale:v,ring:_,deadzone:g,initialScale:E}),this._hitTest=new H,this._domOverlay=new j}e.isAvailable=function(){return navigator.xr&&navigator.xr.isSessionSupported&&H.isAvailable()&&j.isAvailable()?navigator.xr.isSessionSupported(d):Promise.resolve(!1)};var t=e.prototype;return t.enter=function(){var e=(0,a.Z)(c().mark((function e(){var t,n,i,r,o,s,l,h,v,p,_,m,g,y,w=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._view3D,n=t.scene,i=this._arScene,r=t.renderer,o=r.threeRenderer,s=this._control,l=this._hitTest,h=this._domOverlay,v=this.vertical,p=this._getAllXRFeatures(),o.xr.enabled=!0,e.next=13,navigator.xr.requestSession(d,p);case 13:return _=e.sent,m=o.getPixelRatio(),o.setPixelRatio(1),o.xr.setReferenceSpaceType(f),e.next=19,o.xr.setSession(_);case 19:i.init(t),l.init(_),g=function(){var e=(0,a.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.destroy(_),i.destroy(t),h.destroy(),o.setPixelRatio(m),r.stopAnimationLoop(),r.setAnimationLoop(r.defaultRenderLoop),t.trigger(M.FP.AR_END,{target:t,type:M.FP.AR_END,session:w});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_.addEventListener("end",g,{once:!0}),(y=new u.SUY).start(),r.stopAnimationLoop(),o.xr.setAnimationLoop((function(e,r){var a,c,l=o.xr.getCamera(new u.cPb),h=y.getDelta();if(!(l.cameras.length<=0)){var d=l.cameras[0],f=o.xr.getReferenceSpace(),p=_.renderState.baseLayer,m={width:null!=(a=null==p?void 0:p.framebufferWidth)?a:1,height:null!=(c=null==p?void 0:p.framebufferHeight)?c:1},g={view3D:t,scene:i,session:_,delta:h,frame:r,vertical:v,referenceSpace:f,xrCam:d,size:m},E=1e3*h;t.trigger(M.FP.BEFORE_RENDER,{type:M.FP.BEFORE_RENDER,target:t,delta:E}),w._modelPlaced?(s.update(g),t.animator.update(h),n.shadowPlane.render(),o.render(i.root,d)):w._initModelPosition(g),t.trigger(M.FP.RENDER,{type:M.FP.RENDER,target:t,delta:E})}})),t.trigger(M.FP.AR_START,{type:M.FP.AR_START,target:t,session:this});case 28:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.exit=function(){var e=(0,a.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._view3D.renderer.threeRenderer.xr.getSession(),e.abrupt("return",null==t?void 0:t.end());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t._getAllXRFeatures=function(){var e,t=this.features,n=null!=(e=(0,P.S3)(this.overlayRoot))?e:this._createARRootElement();return(0,P.TS)({},this._domOverlay.getFeatures(n),this._hitTest.getFeatures(),t)},t._initModelPosition=function(e){var t=e.frame,n=e.session,i=e.size,r=e.vertical,a=e.referenceSpace,o=this._view3D,s=o.model,c=this._arScene,l=this._hitTest;if(l.ready&&s){var d=this._control,f=l.getResults(t);if(!(f.length<=0)){var v=f[0].getPose(a);if(v){var p=(new u.yGw).fromArray(v.transform.matrix);if(!(!r&&p.elements[5]<.75||r&&(p.elements[5]>=.25||p.elements[5]<=-.25))){var _=(new u.Pa4).setFromMatrixPosition(p),m=new u._fP;if(r){var g=new u.Pa4(0,1,0),y=v.transform.orientation,w=g.clone().applyQuaternion(new u._fP(y.x,y.y,y.z,y.w)).normalize(),E=(new u.Pa4).crossVectors(new u.Pa4(0,1,0),w),b=(new u.yGw).makeBasis(E,g,w),x=new u.USm(0,0,0,"YXZ").setFromRotationMatrix(b);x.z=0,x.x=Math.PI/2,m.setFromEuler(x),c.setWallRotation(m)}c.updateModelRootPosition(s,r),c.setRootPosition(_),c.showModel(),l.destroy(),this._modelPlaced=!0,o.trigger(M.FP.AR_MODEL_PLACED,{type:M.FP.AR_MODEL_PLACED,target:o,session:this,model:s}),d.init({model:s,vertical:r,session:n,size:i,hitPosition:_,hitRotation:m});var O=d.scale.scale,P=new h.Z({context:n,duration:1e3});P.on("progress",(function(e){c.setModelScale(e.easedProgress*O)})),P.on("finish",(function(){c.setModelScale(O),d.enable(n)})),P.start()}}}}},t._createARRootElement=function(){var e=this._view3D,t=document.createElement("div");return t.classList.add(S.es),e.rootEl.appendChild(t),e.once(M.FP.AR_END,(function(){e.rootEl.removeChild(t)})),t},(0,o.Z)(e,[{key:"control",get:function(){return this._control}},{key:"arScene",get:function(){return this._arScene}},{key:"hitTest",get:function(){return this._hitTest}},{key:"domOverlay",get:function(){return this._domOverlay}}]),e}();B.type=M.ok.WEBXR;var V=B,W=n(3366),G=n(1266),Q=n(9911),q=["file","mode","fallbackURL","title","link","sound","resizable","vertical","disableOcclusion","initialScale","shareText"],X=function(){function e(e,t){var n=void 0===t?{}:t,i=n.file,r=void 0===i?null:i,a=n.mode,o=void 0===a?M.Xi.ONLY_AR:a,s=n.fallbackURL,c=void 0===s?null:s,l=n.title,u=void 0===l?null:l,h=n.link,d=void 0===h?null:h,f=n.sound,v=void 0===f?null:f,p=n.resizable,_=void 0===p||p,m=n.vertical,g=void 0!==m&&m,y=n.disableOcclusion,w=void 0!==y&&y,E=n.initialScale,b=void 0===E?M.B7:E,x=n.shareText,O=void 0===x?null:x,P=(0,W.Z)(n,q);this._view3D=e,this.file=r,this.fallbackURL=c,this.mode=o,this.title=u,this.link=d,this.sound=v,this.resizable=_,this.vertical=g,this.disableOcclusion=w,this.initialScale=b,this.shareText=O,this.otherParams=P}e.isAvailable=function(){return Promise.resolve((0,G.wZ)())};var t=e.prototype;return t.enter=function(){var e=(0,a.Z)(c().mark((function e(){var t,n,i,r,a,o,s,u,h;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._view3D.model,(i=Object.assign({title:this.title,link:this.link,sound:this.sound,mode:this.mode,initial_scale:this.initialScale},this.otherParams)).resizable=(0,P.Pr)(this.resizable),i.enable_vertical_placement=(0,P.Pr)(this.vertical),i.disable_occlusion=(0,P.Pr)(this.disableOcclusion),i.share_text=this.shareText?encodeURIComponent(this.shareText):null,r=null!=(t=this.file)?t:n.src){e.next=9;break}return e.abrupt("return",Promise.reject(new l.Z(Q.ZP.MESSAGES.FILE_NOT_SUPPORTED(null!=(a=this.file)?a:n.src),Q.ZP.CODES.FILE_NOT_SUPPORTED)));case 9:i.file=new URL(r,window.location.href).href,o=this.fallbackURL,s=Object.keys(i).filter((function(e){return null!=i[e]})).map((function(e){return e+"="+i[e]})).join("&"),u=i.mode===M.Xi.ONLY_AR?E(s,o):b(s,o||x(s)),(h=document.createElement("a")).href=u,h.click();case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.exit=function(){return Promise.resolve()},e}();X.type=M.ok.SCENE_VIEWER;var Y=X,K=function(){function e(e,t){var n=void 0===t?{}:t,i=n.allowsContentScaling,r=void 0===i||i,a=n.canonicalWebPageURL,o=void 0===a?null:a,s=n.applePayButtonType,c=void 0===s?null:s,l=n.callToAction,u=void 0===l?null:l,h=n.checkoutTitle,d=void 0===h?null:h,f=n.checkoutSubtitle,v=void 0===f?null:f,p=n.price,_=void 0===p?null:p,m=n.custom,g=void 0===m?null:m,y=n.customHeight,w=void 0===y?null:y;this._view3D=e,this.allowsContentScaling=r,this.canonicalWebPageURL=o,this.applePayButtonType=c,this.callToAction=u,this.checkoutTitle=d,this.checkoutSubtitle=v,this.price=_,this.custom=g,this.customHeight=w}e.isAvailable=function(){return Promise.resolve((e=document.createElement("a")).relList&&e.relList.supports&&e.relList.supports("ar")&&(0,G.cj)());var e};var t=e.prototype;return t.enter=function(){var e=this._view3D,t=e.iosSrc;if(!t)return Promise.reject(new l.Z(Q.ZP.MESSAGES.FILE_NOT_SUPPORTED(""+t),Q.ZP.CODES.FILE_NOT_SUPPORTED));var n=this.canonicalWebPageURL,i=this.custom,r=window.location.href,a=document.createElement("a");a.setAttribute("rel","ar"),a.appendChild(document.createElement("img"));var o=Object.entries({applePayButtonType:this.applePayButtonType,callToAction:this.callToAction,checkoutTitle:this.checkoutTitle,checkoutSubtitle:this.checkoutSubtitle,price:this.price,customHeight:this.customHeight}).reduce((function(e,t){var n=t[0],i=t[1];return i&&(e[n]=i),e}),{}),s=new URL(t,r);return this.allowsContentScaling||(o.allowsContentScaling="0"),n&&(o.canonicalWebPageURL=new URL(n,r).href),i&&(o.custom=new URL(i,r).href),s.hash=new URLSearchParams(o).toString(),a.setAttribute("href",s.href),a.addEventListener("message",(function(t){"_apple_ar_quicklook_button_tapped"===t.data&&e.trigger(M.FP.QUICK_LOOK_TAP,Object.assign({},t,{type:M.FP.QUICK_LOOK_TAP,target:e}))}),!1),a.click(),Promise.resolve()},t.exit=function(){return Promise.resolve()},e}();K.type=M.ok.QUICK_LOOK;var J,$=K,ee=((J={})[M.ok.WEBXR]=V,J[M.ok.SCENE_VIEWER]=Y,J[M.ok.QUICK_LOOK]=$,J),te=function(){function e(e){var t=this;this._view3D=e,this._activeSession=null,e.on(M.FP.AR_START,(function(e){var n=e.session;t._activeSession=n})),e.on(M.FP.AR_END,(function(){t._activeSession=null}))}var t=e.prototype;return t.isAvailable=function(){var e=(0,a.Z)(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getSesssionClasses(),e.next=3,Promise.all(t.map((function(e){return e.isAvailable()})));case 3:return n=e.sent,e.abrupt("return",n.some((function(e){return!0===e})));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.enter=function(){var e=(0,a.Z)(c().mark((function e(){var t,n,i,a,o,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this._view3D).model&&t.initialized){e.next=3;break}throw new l.Z(Q.ZP.MESSAGES.NOT_INITIALIZED,Q.ZP.CODES.NOT_INITIALIZED);case 3:n=this._getSesssionClasses(),i=(0,r.Z)(n);case 5:if((a=i()).done){e.next=21;break}return o=a.value,e.prev=7,e.next=10,o.isAvailable();case 10:if(!e.sent){e.next=15;break}return s=new o(t,(0,P.PO)(t[o.type])),e.next=14,s.enter();case 14:return e.abrupt("return",Promise.resolve());case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(7);case 19:e.next=5;break;case 21:return e.abrupt("return",Promise.reject());case 22:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(){return e.apply(this,arguments)}}(),t.exit=function(){var e=(0,a.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(t=this._activeSession)||t.exit();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t._getSesssionClasses=function(){return this._getUsingSessionTypes().map((function(e){return ee[e]}))},t._getUsingSessionTypes=function(){var e=this._view3D;return e.arPriority.filter((function(t){return!!e[t]}))},(0,o.Z)(e,[{key:"activeSession",get:function(){return this._activeSession}}]),e}(),ne=te},4253:function(e,t,n){var i=n(4578),r=n(2921),a=n(625),o=n(8519),s=function(e){function t(t){var n,i=void 0===t?{}:t,r=i.context,s=void 0===r?window:r,c=i.repeat,l=void 0===c?0:c,u=i.duration,h=void 0===u?a.zn:u,d=i.easing,f=void 0===d?a.Xt:d;return(n=e.call(this)||this)._loop=function(){var e=n._getDeltaTime(),t=n._duration,i=n._repeat,r=n._time+e,a=Math.floor(r/t);n._time=n._loopCount>=i?(0,o.uZ)(r,0,t):(0,o.zc)(r,0,t);var s=n._time/t,c={progress:s,easedProgress:n._easing(s)};n.trigger("progress",c);for(var l=0;l<a;l++){if(n._loopCount++,n._loopCount>i)return n.trigger("finish"),void n.stop();n.trigger("loop",Object.assign({},c,{loopIndex:n._loopCount}))}n._rafId=n._ctx.requestAnimationFrame(n._loop)},n._repeat=l,n._duration=h,n._easing=f,n._ctx=s,n._rafId=-1,n._time=0,n._clock=0,n._loopCount=0,n}(0,i.Z)(t,e);var n=t.prototype;return n.start=function(){this._rafId>=0||(this._updateClock(),this._loop())},n.stop=function(){this._rafId<0||(this._time=0,this._loopCount=0,this._stopLoop())},n.pause=function(){this._rafId<0||this._stopLoop()},n._stopLoop=function(){this._ctx.cancelAnimationFrame(this._rafId),this._rafId=-1},n._getDeltaTime=function(){var e=this._clock;return this._updateClock(),this._clock-e},n._updateClock=function(){this._clock=Date.now()},t}(r.Z);t.Z=s},7693:function(e,t,n){var i=n(3144),r=n(1266),a=function(){function e(e,t){var n=this,i=void 0===t?{}:t,a=i.delay,o=void 0===a?2e3:a,s=i.delayOnMouseLeave,c=void 0===s?0:s,l=i.speed,u=void 0===l?1:l,h=i.pauseOnHover,d=void 0!==h&&h,f=i.canInterrupt,v=void 0===f||f,p=i.disableOnInterrupt,_=void 0!==p&&p;this._enabled=!1,this._interrupted=!1,this._interruptionTimer=-1,this._hovering=!1,this._onMouseDown=function(e){n._canInterrupt&&(e.button!==r.T.LEFT&&e.button!==r.T.RIGHT||(n._interrupted=!0,n._clearTimeout(),window.addEventListener(r.FP.MOUSE_UP,n._onMouseUp,!1)))},this._onMouseUp=function(){window.removeEventListener(r.FP.MOUSE_UP,n._onMouseUp,!1),n._setUninterruptedAfterDelay(n._delay)},this._onTouchStart=function(){n._canInterrupt&&(n._interrupted=!0,n._clearTimeout())},this._onTouchEnd=function(){n._setUninterruptedAfterDelay(n._delay)},this._onMouseEnter=function(){n._pauseOnHover&&(n._interrupted=!0,n._hovering=!0)},this._onMouseLeave=function(){n._pauseOnHover&&(n._hovering=!1,n._setUninterruptedAfterDelay(n._delayOnMouseLeave))},this._onWheel=function(){n._canInterrupt&&(n._interrupted=!0,n._setUninterruptedAfterDelay(n._delay))},this._view3D=e,this._delay=o,this._delayOnMouseLeave=c,this._speed=u,this._pauseOnHover=d,this._canInterrupt=v,this._disableOnInterrupt=_}var t=e.prototype;return t.destroy=function(){this.disable()},t.update=function(e){this._enabled&&(this._interrupted?this._disableOnInterrupt&&this.disable():this._view3D.camera.newPose.yaw+=this._speed*e/100)},t.enable=function(){if(!this._enabled){var e=this._view3D.renderer.canvas;e.addEventListener(r.FP.MOUSE_DOWN,this._onMouseDown,!1),e.addEventListener(r.FP.TOUCH_START,this._onTouchStart,{passive:!1,capture:!1}),e.addEventListener(r.FP.TOUCH_END,this._onTouchEnd,{passive:!1,capture:!1}),e.addEventListener(r.FP.MOUSE_ENTER,this._onMouseEnter,!1),e.addEventListener(r.FP.MOUSE_LEAVE,this._onMouseLeave,!1),e.addEventListener(r.FP.WHEEL,this._onWheel,{passive:!1,capture:!1}),this._enabled=!0}},t.enableAfterDelay=function(){this.enable(),this._interrupted=!0,this._setUninterruptedAfterDelay(this._delay)},t.disable=function(){if(this._enabled){var e=this._view3D.renderer.canvas;e.removeEventListener(r.FP.MOUSE_DOWN,this._onMouseDown,!1),window.removeEventListener(r.FP.MOUSE_UP,this._onMouseUp,!1),e.removeEventListener(r.FP.TOUCH_START,this._onTouchStart,!1),e.removeEventListener(r.FP.TOUCH_END,this._onTouchEnd,!1),e.removeEventListener(r.FP.MOUSE_ENTER,this._onMouseEnter,!1),e.removeEventListener(r.FP.MOUSE_LEAVE,this._onMouseLeave,!1),e.removeEventListener(r.FP.WHEEL,this._onWheel,!1),this._enabled=!1,this._interrupted=!1,this._hovering=!1,this._clearTimeout()}},t._setUninterruptedAfterDelay=function(e){var t=this;this._hovering||(this._clearTimeout(),e>0?this._interruptionTimer=window.setTimeout((function(){t._interrupted=!1,t._interruptionTimer=-1}),e):(this._interrupted=!1,this._interruptionTimer=-1))},t._clearTimeout=function(){this._interruptionTimer>=0&&(window.clearTimeout(this._interruptionTimer),this._interruptionTimer=-1)},(0,i.Z)(e,[{key:"enabled",get:function(){return this._enabled}},{key:"animating",get:function(){return this._enabled&&!this._interrupted}},{key:"delay",get:function(){return this._delay},set:function(e){this._delay=e}},{key:"delayOnMouseLeave",get:function(){return this._delayOnMouseLeave},set:function(e){this._delayOnMouseLeave=e}},{key:"speed",get:function(){return this._speed},set:function(e){this._speed=e}},{key:"pauseOnHover",get:function(){return this._pauseOnHover},set:function(e){this._pauseOnHover=e}},{key:"canInterrupt",get:function(){return this._canInterrupt},set:function(e){this._canInterrupt=e}},{key:"disableOnInterrupt",get:function(){return this._disableOnInterrupt},set:function(e){this._disableOnInterrupt=e}}]),e}();t.Z=a},9894:function(e,t,n){var i=n(3144),r=n(1266),a=function(){function e(e){var t,n=this;this._onResize=function(){n._view3d.resize()},this._skipFirstResize=(t=!0,function(){t?t=!1:n._onResize()}),this._view3d=e,this._enabled=!1,this._resizeObserver=null}var t=e.prototype;return t.enable=function(){var e=this._view3d;if(this._enabled&&this.disable(),e.useResizeObserver&&window.ResizeObserver){var t=e.renderer.canvas,n=t.getBoundingClientRect(),i=0!==n.width||0!==n.height,a=new ResizeObserver(i?this._skipFirstResize:this._onResize);a.observe(t),this._resizeObserver=a}else e.resize(),window.addEventListener(r.FP.RESIZE,this._onResize);return this._enabled=!0,this},t.disable=function(){if(!this._enabled)return this;var e=this._resizeObserver;return e?(e.disconnect(),this._resizeObserver=null):window.removeEventListener(r.FP.RESIZE,this._onResize),this._enabled=!1,this},(0,i.Z)(e,[{key:"enabled",get:function(){return this._enabled}}]),e}();t.Z=a},8001:function(e,t,n){var i=n(3144),r=n(4412),a=n(9254),o=n(8519),s=n(625),c=n(5702),l=n(456),u=function(){function e(e){this._view3D=e,this._threeCamera=new r.cPb,this._maxTanHalfHFov=0,this._baseFov=45,this._baseDistance=0;var t=(0,o.hj)(e.initialZoom)?e.initialZoom:0;this._defaultPose=new l.Z(e.yaw,e.pitch,t),this._currentPose=this._defaultPose.clone(),this._newPose=this._currentPose.clone()}var t=e.prototype;return t.reset=function(e,t,n){void 0===e&&(e=0),void 0===t&&(t=s.Xt);var i=this._view3D,r=i.control,o=i.autoPlayer,c=this._newPose,l=this._currentPose,u=null!=n?n:this._defaultPose;if(e<=0)return c.copy(u),l.copy(u),i.renderer.renderSingleFrame(),r.sync(),Promise.resolve();var h=o.enabled,d=new a.Z(i,l,u);return d.duration=e,d.easing=t,d.enable(),h&&o.disable(),r.add(d),new Promise((function(e){d.onFinished((function(){c.copy(u),l.copy(u),r.remove(d),r.sync(),h&&o.enableAfterDelay(),e()}))}))},t.resize=function(e,t){var n=e.width,i=e.height;void 0===t&&(t=null);var r=this._view3D,a=r.control,l=r.fov,u=r.maintainSize,h=n/i;if(this._threeCamera.aspect=h,l===c.B7)if(u&&null!=t){var d=i/t.height,f=this._currentPose.zoom,v=Math.tan((0,o.c$)((this._baseFov-f)/2));this._baseFov=(0,o.Dc)(2*Math.atan(d*v))+f}else this._applyEffectiveFov(s.xg);else this._baseFov=l;a.zoom.updateRange()},t.fit=function(e,t){var n=this._view3D,i=this._threeCamera,a=n.control,l=this._defaultPose,u=e.bbox,h=n.fov,d=h===c.B7?s.xg:h,f=Array.isArray(t)?(new r.Pa4).fromArray(t):u.getCenter(new r.Pa4),v=t===c.B7?(new r.Pa4).subVectors(u.max,u.min).lengthSq()/4:e.reduceVertices((function(e,t){return Math.max(e,t.distanceToSquared(f))}),0),p=Math.sqrt(v),_=p/Math.sin((0,o.c$)(d/2)),m=e.reduceVertices((function(e,t){var n=(new r.Pa4).subVectors(t,f),i=Math.hypot(n.x,n.z);return Math.max(e,i/(_-Math.abs(n.y)))}),0);if(h===c.B7?(this._maxTanHalfHFov=m,this._applyEffectiveFov(d)):this._maxTanHalfHFov=h,l.pivot=f.clone(),this._baseDistance=_,i.near=.1*(_-p),i.far=10*(_+p),a.zoom.updateRange(),(0,o.hj)(n.initialZoom))l.zoom=n.initialZoom;else{var g=this._baseFov,y=e.bbox,w=n.initialZoom.axis,E=n.initialZoom.ratio,b=(new r.Pa4).subVectors(y.max,y.min),x=b[w],O="y"===w?x/E:x/(E*i.aspect),P="z"!==w?_-b.z/2:_-b.x/2,T=(0,o.Dc)(2*Math.atan(O/(2*P)));l.zoom=g-T}},t.updatePosition=function(){var e=this._view3D,t=e.control,n=this._threeCamera,i=this._currentPose,r=this._newPose,a=this._baseFov,l=this._baseDistance,u=t.zoom.type===c.sO.FOV,h=i.clone();i.yaw=(0,o.zc)(r.yaw,0,360),i.pitch=(0,o.uZ)(r.pitch,s.y2.min,s.y2.max),i.zoom=r.zoom,i.pivot.copy(r.pivot);var d=u?a-i.zoom:a,f=u?l:l-i.zoom,v=(0,o.YC)(f,i.yaw,i.pitch);v.add(i.pivot),n.fov=d,n.position.copy(v),n.lookAt(i.pivot),n.updateProjectionMatrix(),r.copy(i),e.trigger(c.FP.CAMERA_CHANGE,{type:c.FP.CAMERA_CHANGE,target:e,pose:i.clone(),prevPose:h})},t._applyEffectiveFov=function(e){var t=this._threeCamera,n=Math.tan((0,o.c$)(e/2)),i=n*Math.max(1,this._maxTanHalfHFov/n/t.aspect);this._baseFov=(0,o.Dc)(2*Math.atan(i))},(0,i.Z)(e,[{key:"threeCamera",get:function(){return this._threeCamera}},{key:"defaultPose",get:function(){return this._defaultPose}},{key:"currentPose",get:function(){return this._currentPose.clone()}},{key:"newPose",get:function(){return this._newPose}},{key:"yaw",get:function(){return this._currentPose.yaw},set:function(e){this._newPose.yaw=e}},{key:"pitch",get:function(){return this._currentPose.pitch},set:function(e){this._newPose.pitch=e}},{key:"zoom",get:function(){return this._currentPose.zoom},set:function(e){this._newPose.zoom=e}},{key:"distance",get:function(){return this._view3D.control.zoom.type===c.sO.FOV?this._baseDistance:this._baseDistance-this._currentPose.zoom}},{key:"baseDistance",get:function(){return this._baseDistance}},{key:"baseFov",get:function(){return this._baseFov},set:function(e){this._baseFov=e}},{key:"pivot",get:function(){return this._currentPose.pivot},set:function(e){this._newPose.pivot.copy(e)}},{key:"fov",get:function(){return this._threeCamera.fov}},{key:"renderWidth",get:function(){return this.renderHeight*this._threeCamera.aspect}},{key:"renderHeight",get:function(){return 2*this.distance*Math.tan((0,o.c$)(this._threeCamera.getEffectiveFOV()/2))}}]),e}();t.Z=u},1496:function(e,t,n){var i=n(3144),r=n(4412),a=n(8519),o=function(){function e(e){var t=e.src,n=e.scenes,i=e.animations,a=void 0===i?[]:i,o=e.annotations,s=void 0===o?[]:o,c=e.fixSkinnedBbox,l=void 0!==c&&c,u=e.castShadow,h=void 0===u||u,d=e.receiveShadow,f=void 0!==d&&d;this._src=t;var v=new r.ZAu;v.add.apply(v,n),this._animations=a,this._annotations=s,this._scene=v;var p=this._getInitialBbox(l),_=p.min.y;v.translateY(-_),v.updateMatrixWorld(),p.translate(new r.Pa4(0,-_,0)),this._fixSkinnedBbox=l,this._bbox=p,this.castShadow=h,this.receiveShadow=f}var t=e.prototype;return t.reduceVertices=function(e,t){var n=this,i=this.meshes,o=t;return i.forEach((function(t){var i=t.geometry.attributes.position;if(i)if(t.updateMatrixWorld(),n._fixSkinnedBbox&&t.isSkinnedMesh)n._forEachSkinnedVertices(t,(function(t){o=e(o,t)}));else for(var s=(0,a.Gr)(i),c=0;c<i.count;c++){var l=(new r.Pa4).fromBufferAttribute(i,c);i.normalized&&l.multiplyScalar(s),l.applyMatrix4(t.matrixWorld),o=e(o,l)}})),o},t._getInitialBbox=function(e){return this._scene.updateMatrixWorld(),e&&this._hasSkinnedMesh()?this._getSkeletonBbox():(new r.ZzF).setFromObject(this._scene)},t._getSkeletonBbox=function(){var e=this,t=new r.ZzF;return this.meshes.forEach((function(n){n.isSkinnedMesh?e._forEachSkinnedVertices(n,(function(e){return t.expandByPoint(e)})):t.expandByObject(n)})),t},t._getAllMeshes=function(){var e=[];return this._scene.traverse((function(t){t.isMesh&&e.push(t)})),e.sort((function(e,t){return e.name.localeCompare(t.name)}))},t._hasSkinnedMesh=function(){return this._getAllMeshes().some((function(e){return e.isSkinnedMesh}))},t._forEachSkinnedVertices=function(e,t){var n=e.geometry,i=n.attributes.position,r=n.attributes.skinWeight;e.skeleton.update();for(var o=(0,a.Gr)(i),s=(0,a.Gr)(r),c=0;c<i.count;c++){t((0,a.cy)(c,e,o,s))}},(0,i.Z)(e,[{key:"src",get:function(){return this._src}},{key:"scene",get:function(){return this._scene}},{key:"animations",get:function(){return this._animations}},{key:"annotations",get:function(){return this._annotations}},{key:"meshes",get:function(){return this._getAllMeshes()}},{key:"bbox",get:function(){return this._bbox}},{key:"castShadow",set:function(e){this.meshes.forEach((function(t){return t.castShadow=e}))}},{key:"receiveShadow",set:function(e){this.meshes.forEach((function(t){return t.receiveShadow=e}))}}]),e}();t.Z=o},4988:function(e,t,n){var i=n(5861),r=n(3144),a=n(7757),o=n.n(a),s=n(4412),c=n(5702),l=function(){function e(e){this._view3D=e,this._mixer=new s.Xcj(e.scene.userObjects),this._clips=[],this._actions=[],this._activeAnimationIdx=-1,this._fadePromises=[]}var t=e.prototype;return t.setClips=function(e){var t=this._mixer;this._clips=e,this._actions=e.map((function(e){var n=t.clipAction(e);return n.setEffectiveWeight(0),n}))},t.play=function(e){var t=this._actions[e];t&&(this.stop(),this._restoreTimeScale(),t.setEffectiveTimeScale(1),t.setEffectiveWeight(1),t.play(),this._activeAnimationIdx=e,this._flushFadePromises())},t.crossFade=function(){var e=(0,i.Z)(o().mark((function e(t,n,i){var r,a,s,l,u,h,d,f,v,p,_,m,g,y=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(void 0===i?{}:i).synchronize,s=void 0!==a&&a,l=this._view3D,u=this._mixer,h=this._actions,d=this._activeAnimationIdx,f=h[t],v=null!=(r=h[d])?r:f,p="loop",this._restoreTimeScale(),_=function(){f.enabled=!0,f.setEffectiveTimeScale(1),f.setEffectiveWeight(1),f.time=0,f.play(),v.crossFadeTo(f,n/1e3,!0),y._activeAnimationIdx=t},s?(m=function e(t){t.action===v&&(u.removeEventListener(p,e),_())},u.addEventListener(p,m)):_(),this._flushFadePromises(),g=new Promise((function(e){var t=function t(){f.getEffectiveWeight()<1||(l.off(c.FP.BEFORE_RENDER,t),e(!0))};l.on(c.FP.BEFORE_RENDER,t),y._fadePromises.push({listener:t,resolve:e})})),e.abrupt("return",g);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}(),t.fadeOut=function(){var e=(0,i.Z)(o().mark((function e(t){var n,i,r,a,s=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._view3D,i=this._actions,r=i[this._activeAnimationIdx]){e.next=5;break}return e.abrupt("return",!1);case 5:return this._flushFadePromises(),this._restoreTimeScale(),r.fadeOut(t/1e3),a=new Promise((function(e){var t=function t(){r.getEffectiveWeight()>0||(n.off(c.FP.BEFORE_RENDER,t),s._activeAnimationIdx=-1,e(!0))};n.on(c.FP.BEFORE_RENDER,t),s._fadePromises.push({listener:t,resolve:e})})),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.pause=function(){this._mixer.timeScale=0},t.resume=function(){this._restoreTimeScale()},t.stop=function(){this._actions.forEach((function(e){e.stop(),e.setEffectiveWeight(0)})),this._view3D.renderer.renderSingleFrame(),this._activeAnimationIdx=-1,this._flushFadePromises()},t.update=function(e){this._mixer.update(e)},t.reset=function(){var e=this._mixer;this.stop(),e.uncacheRoot(e.getRoot()),this._clips=[],this._actions=[]},t._restoreTimeScale=function(){this._mixer.timeScale=1},t._flushFadePromises=function(){var e=this._view3D;this._fadePromises.forEach((function(t){var n=t.resolve,i=t.listener;n(!1),e.off(c.FP.BEFORE_RENDER,i)})),this._fadePromises=[]},(0,r.Z)(e,[{key:"clips",get:function(){return this._clips}},{key:"mixer",get:function(){return this._mixer}},{key:"actions",get:function(){return this._actions}},{key:"animationCount",get:function(){return this._clips.length}},{key:"activeAnimation",get:function(){var e;return null!=(e=this._clips[this._activeAnimationIdx])?e:null}},{key:"activeAnimationIndex",get:function(){return this._activeAnimationIdx}},{key:"paused",get:function(){return 0===this._mixer.timeScale}},{key:"animating",get:function(){return this.activeAnimation&&!this.paused}}]),e}();t.Z=l},3795:function(e,t,n){var i=n(3144),r=n(8519),a=n(625),o=function(){function e(e){var t=void 0===e?{}:e,n=t.duration,i=void 0===n?a.zn:n,r=t.loop,o=void 0===r?a.Fw:r,s=t.range,c=void 0===s?a.XK:s,l=t.easing,u=void 0===l?a.Xt:l;this._duration=i,this._loop=o,this._range=c,this._easing=u,this._activated=!1,this.reset(0)}var t=e.prototype;return t.update=function(e){if(!this._activated)return 0;var t=this._start,n=this._end,i=this._duration,a=this._val,o=this._loop,s=this._progress+e/i;this._progress=o?(0,r.zc)(s,0,1):(0,r.uZ)(s,0,1);var c=this._easing(this._progress);return this._val=(0,r.t7)(t,n,c),!o&&this._progress>=1&&(this._activated=!1),this._val-a},t.reset=function(e){var t=this._range,n=(0,r.uZ)(e,t.min,t.max);this._start=n,this._end=n,this._val=n,this._progress=0,this._activated=!1},t.setEndDelta=function(e){var t=this._range;this._start=this._val,this._end=(0,r.uZ)(this._end+e,t.min,t.max),this._progress=0,this._activated=!0},(0,i.Z)(e,[{key:"val",get:function(){return this._val}},{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}},{key:"progress",get:function(){return this._progress}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e}},{key:"loop",get:function(){return this._loop},set:function(e){this._loop=e}},{key:"range",get:function(){return this._range},set:function(e){this._range=e}},{key:"easing",get:function(){return this._easing},set:function(e){this._easing=e}},{key:"activated",get:function(){return this._activated}}]),e}();t.Z=o},456:function(e,t,n){var i=n(4412),r=n(8519),a=function(){function e(e,t,n,r){void 0===r&&(r=[0,0,0]),this.yaw=e,this.pitch=t,this.zoom=n,this.pivot=(new i.Pa4).fromArray(r)}var t=e.prototype;return t.clone=function(){return new e(this.yaw,this.pitch,this.zoom,this.pivot.toArray())},t.copy=function(e){this.yaw=e.yaw,this.pitch=e.pitch,this.zoom=e.zoom,this.pivot.copy(e.pivot)},t.equals=function(e){var t=this.yaw,n=this.pitch,i=this.zoom,a=this.pivot;return(0,r.zc)(t,0,360)===(0,r.zc)(e.yaw,0,360)&&n===e.pitch&&i===e.zoom&&a.equals(e.pivot)},e}();t.Z=a},6016:function(e,t,n){var i=n(3144),r=n(4412),a=n(8519),o=n(1266),s=n(5702),c=function(){function e(e){var t=this;this._defaultRenderLoop=function(e){var n=t._view3D,i=n.control,r=n.autoPlayer;(n.animator.animating||i.animating||r.animating)&&t._renderFrame(e)},this._onContextLost=function(){t._canvas.classList.add(s.Qz.CTX_LOST)},this._onContextRestore=function(){var e=t._canvas,n=t._view3D.scene;e.classList.remove(s.Qz.CTX_LOST),n.initTextures(),t.renderSingleFrame()};var n=(0,a.gE)(e.rootEl,e.canvasSelector);this._canvas=n,this._view3D=e,this._renderQueued=!1;var i=new r.CP7({canvas:n,alpha:!0,antialias:!0,preserveDrawingBuffer:!0});i.toneMapping=e.toneMapping,i.toneMappingExposure=e.exposure,i.outputEncoding=r.knz,i.setClearColor(0,0),this._halfFloatAvailable=(0,a.Bb)(i),this._renderer=i,this._clock=new r.SUY(!1),this._canvasSize=new r.FM8,n.addEventListener(o.FP.CONTEXT_LOST,this._onContextLost),n.addEventListener(o.FP.CONTEXT_RESTORED,this._onContextRestore)}var t=e.prototype;return t.destroy=function(){var e=this._canvas;this.stopAnimationLoop(),this._renderer.dispose(),e.removeEventListener(o.FP.CONTEXT_LOST,this._onContextLost),e.removeEventListener(o.FP.CONTEXT_RESTORED,this._onContextRestore)},t.resize=function(){var e=this._renderer,t=this._canvas;if(!e.xr.isPresenting){var n=t.clientWidth,i=t.clientHeight;e.setPixelRatio(window.devicePixelRatio),e.setSize(n,i,!1),this._canvasSize.set(n,i)}},t.setAnimationLoop=function(e){var t=this._view3D,n=this._clock;n.start(),this._renderer.setAnimationLoop((function(i,r){var a=Math.min(n.getDelta(),t.maxDeltaTime);e(a,r)}))},t.stopAnimationLoop=function(){this._clock.stop(),this._renderer.setAnimationLoop(null)},t.renderSingleFrame=function(e){var t=this;void 0===e&&(e=!1),this._renderer.xr.isPresenting||(e?this._renderFrame(0):this._renderQueued||(requestAnimationFrame((function(){t._renderFrame(0)})),this._renderQueued=!0))},t._renderFrame=function(e){var t=this._view3D,n=this._renderer,i=t.scene,r=t.camera,a=t.control,o=t.autoPlayer,c=t.animator,l=t.annotation;if(!n.getContext().isContextLost()){var u=1e3*e;this._renderQueued=!1,c.update(e),a.update(u),o.update(u),t.trigger(s.FP.BEFORE_RENDER,{type:s.FP.BEFORE_RENDER,target:t,delta:u}),r.updatePosition(),i.shadowPlane.render(),n.render(i.root,r.threeCamera),l.render(),t.trigger(s.FP.RENDER,{type:s.FP.RENDER,target:t,delta:u})}},(0,i.Z)(e,[{key:"canvas",get:function(){return this._canvas}},{key:"context",get:function(){return this._renderer.getContext()}},{key:"threeRenderer",get:function(){return this._renderer}},{key:"defaultRenderLoop",get:function(){return this._defaultRenderLoop}},{key:"size",get:function(){var e=this._renderer.getSize(new r.FM8);return{width:e.width,height:e.y}}},{key:"canvasSize",get:function(){return this._canvasSize}},{key:"capabilities",get:function(){var e=this._renderer;return Object.assign({},e.capabilities,{halfFloat:this._halfFloatAvailable})}}]),e}();t.Z=c},2449:function(e,t,n){var i=n(5861),r=n(3144),a=n(7757),o=n.n(a),s=n(4412),c=n(9768),l=n(8630),u=n(8519),h=n(491),d=n(266),f=function(){function e(e){this._view3D=e,this._root=new s.xsS,this._userObjects=new s.ZAu,this._envObjects=new s.ZAu,this._fixedObjects=new s.ZAu,this._shadowPlane=new h.Z(e,(0,u.PO)(e.shadow));var t=this._root,n=this._userObjects,i=this._envObjects,r=this._fixedObjects,a=this._shadowPlane;n.name="userObjects",i.name="envObjects",r.name="fixedObjects",t.add(n,i,r),e.shadow&&r.add(a.root)}var t=e.prototype;return t.reset=function(e){var t=(void 0===e?{}:e).volatileOnly,n=void 0===t||t;this._removeChildsOf(this._userObjects),n||this._removeChildsOf(this._envObjects)},t.add=function(e,t){void 0===t&&(t=!0);var n=t?this._userObjects:this._envObjects,i=Array.isArray(e)?e:[e];n.add.apply(n,i)},t.remove=function(e){var t,n,i=Array.isArray(e)?e:[e];(t=this._userObjects).remove.apply(t,i),(n=this._envObjects).remove.apply(n,i)},t.setBackground=function(){var e=(0,i.Z)(o().mark((function e(t){var n,i,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._view3D,i=this._root,"number"!=typeof t&&"#"!==t.charAt(0)){e.next=6;break}i.background=new s.Ilk(t),e.next=12;break;case 6:return r=new c.Z(n),e.next=9,r.load(t);case 9:(a=e.sent).encoding=s.knz,i.background=a;case 12:n.renderer.renderSingleFrame();case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.setSkybox=function(){var e=(0,i.Z)(o().mark((function e(t){var n,i,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._root,i=this._view3D,n.background&&n.background.isTexture&&n.background.dispose(),!t){e.next=12;break}return r=new c.Z(i),e.next=7,r.loadHDRTexture(t);case 7:a=e.sent,i.skyboxBlur?n.background=d.Z.createBlurredHDR(i,a):n.background=a,n.environment=a,e.next=14;break;case 12:n.background=null,n.environment=null;case 14:i.renderer.renderSingleFrame();case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.setEnvMap=function(){var e=(0,i.Z)(o().mark((function e(t){var n,i,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._view3D,i=this._root,!t){e.next=10;break}return r=new c.Z(n),e.next=6,r.loadHDRTexture(t);case 6:a=e.sent,i.environment=a,e.next=11;break;case 10:i.environment=null;case 11:n.renderer.renderSingleFrame();case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.initTextures=function(){var e=this._view3D,t=e.skybox,n=e.envmap,i=e.background,r=[];if(e.useDefaultEnv&&this.setDefaultEnv(),t||n){var a=t?this.setSkybox(t):this.setEnvMap(n);r.push(a)}return!t&&i&&r.push(this.setBackground(i)),r},t.setDefaultEnv=function(){var e=this._view3D.renderer,t=d.Z.createDefaultEnv(e.threeRenderer);this._root.environment=t},t._removeChildsOf=function(e){for(e.traverse((function(e){if(e.isMesh){var t=e;t.geometry.dispose(),(Array.isArray(t.material)?t.material:[t.material]).forEach((function(e){l.xI.forEach((function(t){e[t]&&e[t].dispose()}))}))}}));e.children.length>0;)e.remove(e.children[0])},(0,r.Z)(e,[{key:"root",get:function(){return this._root}},{key:"shadowPlane",get:function(){return this._shadowPlane}},{key:"userObjects",get:function(){return this._userObjects}},{key:"envObjects",get:function(){return this._envObjects}},{key:"fixedObjects",get:function(){return this._fixedObjects}}]),e}();t.Z=f},491:function(e,t,n){var i=n(3144),r=n(4412),a=n(8625),o=n(6665),s=function(){function e(e,t){var n=void 0===t?{}:t,i=n.darkness,a=void 0===i?.5:i,o=n.mapSize,s=void 0===o?9:o,c=n.blur,l=void 0===c?3.5:c,u=n.shadowScale,h=void 0===u?1:u,d=n.planeScale,f=void 0===d?2:d;this._view3D=e,this._darkness=a,this._mapSize=s,this._blur=l,this._shadowScale=h,this._planeScale=f;var v=e.renderer.threeRenderer,p=Math.min(Math.pow(2,Math.floor(s)),v.capabilities.maxTextureSize);this._root=new r.ZAu,this._renderTarget=new r.dd2(p,p,{format:r.wk1}),this._blurTarget=new r.dd2(p,p,{format:r.wk1}),this._renderTarget.texture.generateMipmaps=!1,this._blurTarget.texture.generateMipmaps=!1;var _=new r.iKG(-.5,.5,.5,-.5,0);_.rotation.x=Math.PI/2,this._shadowCamera=_,this._root.add(_);var m=new r.iKG(-.5,.5,.5,-.5,0);this._blurCamera=m,this._setupPlanes()}var t=e.prototype;return t.updateDimensions=function(e){var t=this._root,n=this._shadowCamera,i=this._planeScale,a=e.bbox.getBoundingSphere(new r.aLr),o=2*i*a.radius,s=this._shadowScale;n.far=s*(e.bbox.max.y-e.bbox.min.y)/o,n.rotation.set(Math.PI/2,Math.PI,0,"YXZ"),t.position.copy(a.center).setY(e.bbox.min.y),t.scale.setScalar(o),n.updateProjectionMatrix()},t.render=function(){this._plane.visible=!1;var e=this._view3D,t=e.renderer,n=e.ar,i=this._shadowCamera,r=t.threeRenderer,a=n.activeSession?n.activeSession.arScene:e.scene,o=r.xr.enabled;r.xr.enabled=!1;var s=a.root,c=s.background;s.background=null,s.overrideMaterial=this._depthMaterial;var l=r.getClearAlpha();r.setClearAlpha(0);var u=r.getRenderTarget();r.setRenderTarget(this._renderTarget),r.clear(),r.render(s,i),s.overrideMaterial=null,this._blurShadow(this._blur),this._blurShadow(.4*this._blur),r.xr.enabled=o,r.setRenderTarget(u),r.setClearAlpha(l),s.background=c,this._plane.visible=!0},t._blurShadow=function(e){var t=this._view3D.renderer,n=this._blurCamera,i=t.threeRenderer,r=this._blurPlane,a=this._renderTarget,o=this._blurTarget,s=this._horizontalBlurMaterial,c=this._verticalBlurMaterial;r.visible=!0,s.uniforms.tDiffuse.value=a.texture,s.uniforms.h.value=1*e/256,s.needsUpdate=!0,r.material=s,i.setRenderTarget(o),i.render(r,n),c.uniforms.tDiffuse.value=o.texture,c.uniforms.v.value=1*e/256,c.needsUpdate=!0,r.material=c,i.setRenderTarget(a),i.render(r,n),r.visible=!1},t._setupPlanes=function(){var e=this._root,t=new r.BKK,n=new r.vBJ({opacity:this._darkness,transparent:!0,side:r._Li,depthWrite:!1,map:this._renderTarget.texture}),i=new r.Kj0(t,n);i.renderOrder=1,i.scale.set(-1,-1,1),i.rotation.order="YXZ",i.rotation.x=Math.PI/2,this._plane=i,e.add(i);var s=new r.Kj0(t);this._blurPlane=s;var c=new r.lRF;c.onBeforeCompile=function(e){e.fragmentShader="\n        "+e.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * opacity );")},this._depthMaterial=c;var l=new r.jyz(a.P);l.depthTest=!1,this._horizontalBlurMaterial=l;var u=new r.jyz(o.Z);u.depthTest=!1,this._verticalBlurMaterial=u},(0,i.Z)(e,[{key:"root",get:function(){return this._root}},{key:"darkness",get:function(){return this._darkness},set:function(e){this._plane.material.opacity=e,this._darkness=e}},{key:"mapSize",get:function(){return this._mapSize}},{key:"blur",get:function(){return this._blur},set:function(e){this._blur=e}},{key:"shadowScale",get:function(){return this._shadowScale},set:function(e){this._shadowScale=e;var t=this._view3D.model;t&&this.updateDimensions(t)}},{key:"planeScale",get:function(){return this._planeScale}}]),e}();t.Z=s},266:function(e,t,n){var i=n(4412),r=n(8212),a=function(){function e(){}return e.createDefaultEnv=function(t){var n=new i.xsS,r=new i.cek(16777215,.8,20);r.decay=2,r.position.set(0,7,0),n.add(r);var a=new i.nvb(1,1,1),o=new i.Wid({side:i._Li}),s=new i.Kj0(a,o);s.castShadow=!1,s.scale.set(15,45,15),s.position.set(0,20,0),n.add(s);var c=e._createRectAreaLightSource({intensity:4.5,width:4,height:4});c.position.set(0,2.5,0),c.rotateX(Math.PI/2);var l=e._createRectAreaLightSource({intensity:3,width:2,height:2});l.position.set(0,1,4),l.lookAt(0,0,0);var u=e._createRectAreaLightSource({intensity:3,width:2,height:2});u.position.set(-4,1,1),u.lookAt(0,0,0);var h=e._createRectAreaLightSource({intensity:3,width:2,height:2});h.position.set(4,1,1),h.lookAt(0,0,0);var d=e._createRectAreaLightSource({intensity:2.5,width:2,height:2});d.position.set(1.5,1,-4),d.lookAt(0,0,0);var f=e._createRectAreaLightSource({intensity:2.5,width:2,height:2});f.position.set(-1.5,1,-4),f.lookAt(0,0,0),n.add(c,l,u,h,d,f);var v=t.outputEncoding,p=t.toneMapping;t.outputEncoding=i.rnI,t.toneMapping=i.uL9;var _=new i.anP(t).fromScene(n,.035);return t.outputEncoding=v,t.toneMapping=p,_.texture},e.createBlurredHDR=function(e,t){var n=e.renderer.threeRenderer,a=new i.xsS;a.background=t;var o=n.toneMappingExposure;n.toneMappingExposure=1;var s=new i.oAp(256,{encoding:i.knz,format:i.wk1}),c=new i._am(.1,1e3,s);c.update(n,a);for(var l=r.F.fromCubeRenderTarget(n,s),u=new i.Wid({side:i._Li}),h=new i.Wjw(1,4),d=new i.xsS,f=new i.Kj0(h,u),v=h.getAttribute("normal"),p=0;p<v.count;p++)v.setXYZ(p,-v.getX(p),-v.getY(p),-v.getZ(p));return d.add(f),d.add(l),c.update(n,d),n.toneMappingExposure=o,s.texture},e._createRectAreaLightSource=function(e){var t=e.intensity,n=e.width,r=e.height,a=new i.BKK(n,r),o=new i.vBJ;return o.color.setScalar(t),new i.Kj0(a,o)},e}();t.Z=a},6872:function(e,t,n){var i=n(7326),r=n(4578),a=function(e){function t(n,r){var a;return a=e.call(this,n)||this,Object.setPrototypeOf((0,i.Z)(a),t.prototype),a.name="View3DError",a.code=r,a}return(0,r.Z)(t,e),t}((0,n(4542).Z)(Error));t.Z=a},432:function(e,t,n){var i=n(3144),r=n(4412),a=n(1266),o=n(5702),s=n(8519),c=function(){function e(e,t){var n=this,i=void 0===t?{}:t,a=i.element,o=void 0===a?null:a,s=i.focus,c=void 0===s?[]:s,l=i.focusDuration,u=void 0===l?1e3:l,h=i.baseFov,d=void 0===h?45:h,f=i.baseDistance,v=void 0===f?null:f,p=i.aspect,_=void 0===p?1:p;this._onClick=function(){n.focus()},this._onWheel=function(e){e.preventDefault(),e.stopPropagation()},this._view3D=e,this._element=o,this._focus=c,this._focusDuration=u,this._baseFov=d,this._baseDistance=v,this._aspect=_,this._enabled=!1,this._tooltipSize=new r.FM8,o&&(o.draggable=!1,this.resize())}var t=e.prototype;return t.destroy=function(){var e=this._view3D.annotation.wrapper,t=this._element;this.disableEvents(),t&&t.parentElement===e&&e.removeChild(t)},t.resize=function(){var e=this._element;if(e){var t=e.querySelector("."+o.Qz.ANNOTATION_TOOLTIP);t&&this._tooltipSize.set(t.offsetWidth,t.offsetHeight)}},t.render=function(e){var t=e.screenPos,n=e.screenSize,i=e.renderOrder,r=this._element,a=this._tooltipSize;r&&(r.style.zIndex=""+(i+1),r.style.transform="translate(-50%, -50%) translate("+t.x+"px, "+t.y+"px)",t.y+a.y>n.y?r.classList.add(o.Qz.ANNOTATION_FLIP_Y):r.classList.remove(o.Qz.ANNOTATION_FLIP_Y),t.x+a.x>n.x?r.classList.add(o.Qz.ANNOTATION_FLIP_X):r.classList.remove(o.Qz.ANNOTATION_FLIP_X))},t.setOpacity=function(e){var t=this._element;t&&(t.style.opacity=""+e)},t.enableEvents=function(){var e=this._element;e&&!this._enabled&&(e.addEventListener(a.FP.CLICK,this._onClick),e.addEventListener(a.FP.WHEEL,this._onWheel),this._enabled=!0)},t.disableEvents=function(){var e=this._element;e&&this._enabled&&(e.removeEventListener(a.FP.CLICK,this._onClick),e.removeEventListener(a.FP.WHEEL,this._onWheel),this._enabled=!1)},t._getFocus=function(){var e,t=this._view3D,n=(new r.Pa4).fromArray(this._focus),i=t.camera.baseDistance,a=t.renderer.size,o=Math.max(a.height/a.width,1),c=this._aspect,l=this._baseFov,u=o/c*(null!=(e=this._baseDistance)?e:i)*Math.tan((0,s.c$)((l-n.z)/2)),h=2*(0,s.Dc)(Math.atan(u/i));return n.z=t.camera.baseFov-h,n},(0,i.Z)(e,[{key:"element",get:function(){return this._element}},{key:"renderable",get:function(){return!!this._element}},{key:"focusPose",get:function(){return this._focus}},{key:"focusDuration",get:function(){return this._focusDuration},set:function(e){this._focusDuration=e}},{key:"baseFov",get:function(){return this._baseFov},set:function(e){this._baseFov=e}},{key:"baseDistance",get:function(){return this._baseDistance},set:function(e){this._baseDistance=e}},{key:"aspect",get:function(){return this._aspect},set:function(e){this._aspect=e}}]),e}();t.Z=c},1065:function(e,t,n){var i=n(8906),r=n(3366),a=n(3144),o=n(4412),s=n(5702),c=n(8630),l=n(8519),u=n(1379),h=n(5367),d=["meshIndex","faceIndex","position"],f=function(){function e(e){var t=this;this._onInput=function(){t._list.forEach((function(e){e.element&&e.unfocus()}))},this._view3D=e,this._list=[],this._wrapper=(0,l.S3)(e.annotationWrapper,e.rootEl)||this._createWrapper()}var t=e.prototype;return t.init=function(){var e=this;this._view3D.control.controls.forEach((function(t){var n;t.on(((n={})[c.QA.HOLD]=e._onInput,n))}))},t.destroy=function(){var e=this;this._view3D.control.controls.forEach((function(t){var n;t.off(((n={})[c.QA.HOLD]=e._onInput,n))})),this.reset()},t.resize=function(){this._list.forEach((function(e){e.resize()}))},t.collect=function(){var e=this._view3D,t=this._wrapper,n=[].slice.apply(t.querySelectorAll(e.annotationSelector)).map((function(t){var n=t.dataset.focus,i={element:t,focus:n?n.split(" ").map((function(e){return parseFloat(e)})):[],focusDuration:t.dataset.duration?parseFloat(t.dataset.duration):void 0};if(t.dataset.meshIndex){var r=parseFloat(t.dataset.meshIndex),a=t.dataset.faceIndex?parseFloat(t.dataset.faceIndex):void 0;return new h.Z(e,Object.assign({},i,{meshIndex:r,faceIndex:a}))}var o=t.dataset.position,s=o?o.split(" ").map((function(e){return parseFloat(e)})):[];return new u.Z(e,Object.assign({},i,{position:s}))}));this.add.apply(this,n)},t.load=function(e){var t=this,n=new o.hH6;return new Promise((function(i,r){n.load(e,(function(e){var n=JSON.parse(e),r=t.parse(n);t.add.apply(t,r),i(r)}),void 0,(function(e){r(e)}))}))},t.parse=function(e){var t=this,n=this._view3D,i=e.baseFov,a=e.baseDistance,o=e.aspect;return e.items.map((function(e){var s=e.meshIndex,c=e.faceIndex,l=e.position,f=(0,r.Z)(e,d),v=t._createDefaultAnnotationElement(e.label);return null!=s&&null!=c?new h.Z(n,Object.assign({meshIndex:s,faceIndex:c},f,{baseFov:i,baseDistance:a,aspect:o,element:v})):new u.Z(n,Object.assign({position:l},f,{baseFov:i,baseDistance:a,aspect:o,element:v}))}))},t.render=function(){var e=this._view3D,t=e.model;if(t){var n=e.camera,r=e.renderer.canvasSize,a=r.clone().multiplyScalar(.5),s=n.threeCamera,c=s.position,u=t.bbox.getCenter(new o.Pa4),h=e.annotationBreakpoints,d=[].concat(this._list).filter((function(e){return e.renderable})).map((function(e){var t=e.position;return{annotation:e,position:t,distToCameraSquared:c.distanceToSquared(t)}})).sort((function(e,t){return t.distToCameraSquared-e.distToCameraSquared})),f=(new o.Pa4).subVectors(c,u).normalize(),v=Object.keys(h).map((function(e){return parseFloat(e)})).sort((function(e,t){return t-e}));d.forEach((function(e,t){var n=e.annotation,c=e.position;if(n.element){var d=c.clone().project(s),p=new o.FM8(d.x,-d.y),_=(new o.Pa4).subVectors(c,u).normalize(),m=(0,l.Dc)(Math.abs(Math.acos(_.dot(f))));p.multiply(a),p.add(a);for(var g,y=(0,i.Z)(v);!(g=y()).done;){var w=g.value;if(m>=w){n.setOpacity(h[w]);break}}n.render({position:c,renderOrder:t,screenPos:p,screenSize:r})}}))}},t.add=function(){for(var e,t=this._wrapper,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];i.forEach((function(e){e.enableEvents(),e.element&&e.element.parentElement!==t&&t.appendChild(e.element)})),(e=this._list).push.apply(e,i)},t.remove=function(e){var t=this._list.splice(e,1)[0];return t?(t.destroy(),t):null},t.reset=function(){var e=this._list;e.splice(0,e.length).forEach((function(e){e.destroy()}))},t.toJSON=function(){var e=this._view3D,t=this._list.map((function(e){var t,n;return Object.assign({},e.toJSON(),{label:(null==(t=e.element)||null==(n=t.querySelector("."+s.Qz.ANNOTATION_TOOLTIP))?void 0:n.innerHTML)||null})})),n=e.renderer.size,i=Math.max(n.height/n.width,1);return{baseFov:e.camera.baseFov,baseDistance:e.camera.baseDistance,aspect:i,items:t}},t._createWrapper=function(){var e=this._view3D,t=document.createElement("div");return t.classList.add(s.Qz.ANNOTATION_WRAPPER),e.rootEl.appendChild(t),t},t._createDefaultAnnotationElement=function(e){var t=document.createElement("div");if(t.classList.add(s.Qz.ANNOTATION),t.classList.add(s.Qz.ANNOTATION_DEFAULT),e){var n=document.createElement("div");n.classList.add(s.Qz.ANNOTATION_TOOLTIP),n.classList.add(s.Qz.ANNOTATION_DEFAULT),n.innerHTML=e,t.appendChild(n)}return t},(0,a.Z)(e,[{key:"list",get:function(){return this._list}},{key:"wrapper",get:function(){return this._wrapper}}]),e}();t.Z=f},5367:function(e,t,n){var i=n(5861),r=n(3366),a=n(3144),o=n(4578),s=n(7757),c=n.n(s),l=n(4412),u=n(456),h=n(9254),d=n(5702),f=n(8519),v=n(432),p=["meshIndex","faceIndex","weights"],_=function(e){function t(t,n){var i,a=void 0===n?{}:n,o=a.meshIndex,s=void 0===o?-1:o,c=a.faceIndex,l=void 0===c?-1:c,u=a.weights,h=void 0===u?[].concat(new Array(3)).map((function(){return 1/3})):u,d=(0,r.Z)(a,p);return(i=e.call(this,t,d)||this)._meshIndex=s,i._faceIndex=l,i._weights=h,i._trackingControl=null,i}(0,o.Z)(t,e);var n=t.prototype;return n.focus=function(){var e=(0,i.Z)(c().mark((function e(){var t,n,i,r,a,o,s,l,f=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=this._element)&&t.classList.add(d.Qz.ANNOTATION_SELECTED),n=this._view3D,i=n.camera,r=n.control,a=this._getFocus(),o=this._getPosition(),s=new u.Z(a.x,a.y,a.z,o.toArray()),l=new h.Z(n,i.currentPose,s,{duration:this._focusDuration,disableOnFinish:!1}),this._trackingControl=l,l.enable(),r.add(l),window.addEventListener("click",(function(){f.unfocus()}),{once:!0,capture:!0});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.unfocus=function(){var e=this._element,t=this._view3D.control,n=this._trackingControl;e&&e.classList.remove(d.Qz.ANNOTATION_SELECTED),n&&(t.sync(),t.remove(n),n.destroy(),this._trackingControl=null)},n.render=function(t){e.prototype.render.call(this,t);var n=this._trackingControl;if(n){var i=this._view3D.camera,r=this._getFocus(),a=this._getPosition(),o=new u.Z(r.x,r.y,r.z,a.toArray());n.changeStartEnd(i.currentPose,o),n.reset()}},n.toJSON=function(){return{meshIndex:this._meshIndex,faceIndex:this._faceIndex,focus:this._focus,duration:this._focusDuration}},n._getPosition=function(){var e=this._view3D.model,t=this._meshIndex,n=this._faceIndex,i=this._weights,r=(0,f.pU)(e,t,n);return r?(new l.Pa4).addScaledVector(r[0],i[0]).addScaledVector(r[1],i[1]).addScaledVector(r[2],i[2]):new l.Pa4},(0,a.Z)(t,[{key:"position",get:function(){return this._getPosition()}},{key:"renderable",get:function(){return!!this._element&&this._meshIndex>=0&&this._faceIndex>=0}},{key:"meshIndex",get:function(){return this._meshIndex}},{key:"faceIndex",get:function(){return this._faceIndex}},{key:"weights",get:function(){return this._weights}}]),t}(v.Z);t.Z=_},1379:function(e,t,n){var i=n(5861),r=n(3366),a=n(3144),o=n(4578),s=n(7757),c=n.n(s),l=n(4412),u=n(456),h=n(625),d=n(5702),f=n(8519),v=n(432),p=["position"],_=function(e){function t(t,n){var i,a=void 0===n?{}:n,o=a.position,s=void 0===o?[]:o,c=(0,r.Z)(a,p);return(i=e.call(this,t,c)||this)._position=(new l.Pa4).fromArray(s),i}(0,o.Z)(t,e);var n=t.prototype;return n.focus=function(){var e=(0,i.Z)(c().mark((function e(){var t,n,i,r,a,o,s,l,v,p=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._view3D.camera,n=this._element,this._focus.length>0?(r=this._getFocus(),a=this._position,i=new u.Z(r.x,r.y,r.z,a.toArray())):(o=this._calculateNormalFromModelCenter(),s=(0,f.dv)(o),l=s.yaw,v=s.pitch,i=new u.Z((0,f.Dc)(l),(0,f.Dc)(v),0,this._position.toArray())),n&&(n.classList.add(d.Qz.ANNOTATION_SELECTED),window.addEventListener("click",(function(){p.unfocus()}),{once:!0,capture:!0})),i.equals(t.currentPose)){e.next=9;break}return e.abrupt("return",t.reset(this._focusDuration,h.Xt,i));case 9:return e.abrupt("return",Promise.resolve());case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.unfocus=function(){var e=this._element;e&&e.classList.remove(d.Qz.ANNOTATION_SELECTED)},n.toJSON=function(){return{position:this._position.toArray(),focus:this._focus,duration:this._focusDuration}},n._calculateNormalFromModelCenter=function(){var e=this._view3D.model,t=e?e.bbox.getCenter(new l.Pa4):new l.Pa4;return(new l.Pa4).subVectors(this._position,t).normalize()},(0,a.Z)(t,[{key:"position",get:function(){return this._position}}]),t}(v.Z);t.Z=_},5360:function(e,t,n){n.d(t,{NL:function(){return a.Z},Hn:function(){return i.Z},Lf:function(){return r.Z}});n(4253),n(8412),n(7693),n(9894),n(8001);var i=n(1496),r=(n(4988),n(3795),n(456),n(6016),n(2449),n(491),n(266)),a=(n(6872),n(1065),n(432),n(1379),n(5367))},8326:function(e,t,n){n.d(t,{_A:function(){return W},If:function(){return Q},NL:function(){return B.NL},EP:function(){return U},Ff:function(){return X},Hn:function(){return B.Hn},bU:function(){return b.bU},ZP:function(){return Y}});var i=n(5861),r=n(3144),a=n(7326),o=n(4578),s=n(7757),c=n.n(s),l=n(2921),u=n(6016),h=n(2449),d=n(8001),f=n(9894),v=n(4988),p=n(266),_=n(8412),m=n(1065),g=n(6872),y=n(1266),w=n(8630),E=n(8519),b=n(5702),x=n(4412),O=n(3795),P=n(625),T=function(e){function t(t,n){var i,r=void 0===n?{}:n,a=r.duration,o=void 0===a?P.zn:a,s=r.easing,c=void 0===s?P.Xt:s,l=r.scale,u=void 0===l?1:l,h=r.disablePitch,d=void 0!==h&&h,f=r.disableYaw,v=void 0!==f&&f;return(i=e.call(this)||this)._screenScale=new x.FM8(0,0),i._prevPos=new x.FM8(0,0),i._isFirstTouch=!1,i._isScrolling=!1,i._enabled=!1,i._onMouseDown=function(e){if(e.button===y.T.LEFT){var t=i._view3D.renderer.canvas;e.preventDefault(),t.focus?t.focus():window.focus(),i._prevPos.set(e.clientX,e.clientY),window.addEventListener(y.FP.MOUSE_MOVE,i._onMouseMove,!1),window.addEventListener(y.FP.MOUSE_UP,i._onMouseUp,!1),i.trigger(w.QA.HOLD,{inputType:b.rC.ROTATE,isTouch:!1})}},i._onMouseMove=function(e){e.preventDefault();var t=i._prevPos,n=new x.FM8(e.clientX,e.clientY).sub(t).multiplyScalar(i._scale);n.multiply(i._screenScale),i._xMotion.setEndDelta(n.x),i._yMotion.setEndDelta(n.y),t.set(e.clientX,e.clientY)},i._onMouseUp=function(){i._prevPos.set(0,0),window.removeEventListener(y.FP.MOUSE_MOVE,i._onMouseMove,!1),window.removeEventListener(y.FP.MOUSE_UP,i._onMouseUp,!1),i.trigger(w.QA.RELEASE,{inputType:b.rC.ROTATE,isTouch:!1})},i._onTouchStart=function(e){var t=e.touches[0];i._isFirstTouch=!0,i._prevPos.set(t.clientX,t.clientY),i.trigger(w.QA.HOLD,{inputType:b.rC.ROTATE,isTouch:!0})},i._onTouchMove=function(e){if(!(e.touches.length>1||i._isScrolling)){var t=e.touches[0],n=i._view3D.scrollable;if(i._isFirstTouch){if(n){var r=new x.FM8(t.clientX,t.clientY).sub(i._prevPos);if(Math.abs(r.y)>Math.abs(r.x))return void(i._isScrolling=!0)}i._isFirstTouch=!1}!n&&e.cancelable&&e.preventDefault(),e.stopPropagation();var a=i._prevPos,o=new x.FM8(t.clientX,t.clientY).sub(a).multiplyScalar(i._scale);o.multiply(i._screenScale),i._xMotion.setEndDelta(o.x),i._yMotion.setEndDelta(o.y),a.set(t.clientX,t.clientY)}},i._onTouchEnd=function(e){var t=e.touches[0];t?i._prevPos.set(t.clientX,t.clientY):(i._prevPos.set(0,0),i.trigger(w.QA.RELEASE,{inputType:b.rC.ROTATE,isTouch:!0})),i._isScrolling=!1},i._view3D=t,i._scale=u,i._duration=o,i._easing=c,i._disablePitch=d,i._disableYaw=v,i._xMotion=new O.Z({duration:o,range:P.oK,easing:c}),i._yMotion=new O.Z({duration:o,range:P.y2,easing:c}),i}(0,o.Z)(t,e);var n=t.prototype;return n.destroy=function(){this.disable(),this.reset(),this.off()},n.reset=function(){this._isFirstTouch=!1,this._isScrolling=!1},n.update=function(e){var t=this._view3D.camera,n=this._xMotion,i=this._yMotion,r=t.newPose,a=!this._disableYaw,o=!this._disablePitch,s=new x.FM8(n.update(e),i.update(e));a&&(r.yaw+=s.x),o&&(r.pitch+=s.y)},n.resize=function(e){this._screenScale.set(360/e.width,180/e.height)},n.enable=function(){if(!this._enabled){var e=this._view3D.renderer.canvas;e.addEventListener(y.FP.MOUSE_DOWN,this._onMouseDown),e.addEventListener(y.FP.TOUCH_START,this._onTouchStart,{passive:!0}),e.addEventListener(y.FP.TOUCH_MOVE,this._onTouchMove,{passive:this._view3D.scrollable}),e.addEventListener(y.FP.TOUCH_END,this._onTouchEnd),this._enabled=!0,this.sync(),this.trigger(w.QA.ENABLE,{inputType:b.rC.ROTATE})}},n.disable=function(){if(this._enabled){var e=this._view3D.renderer.canvas;e.removeEventListener(y.FP.MOUSE_DOWN,this._onMouseDown),window.removeEventListener(y.FP.MOUSE_MOVE,this._onMouseMove),window.removeEventListener(y.FP.MOUSE_UP,this._onMouseUp),e.removeEventListener(y.FP.TOUCH_START,this._onTouchStart),e.removeEventListener(y.FP.TOUCH_MOVE,this._onTouchMove),e.removeEventListener(y.FP.TOUCH_END,this._onTouchEnd),this._enabled=!1,this.trigger(w.QA.DISABLE,{inputType:b.rC.ROTATE})}},n.sync=function(){var e=this._view3D.camera;this._xMotion.reset(e.yaw),this._yMotion.reset(e.pitch)},(0,r.Z)(t,[{key:"enabled",get:function(){return this._enabled}},{key:"animating",get:function(){return this._xMotion.activated||this._yMotion.activated}},{key:"scale",get:function(){return this._scale},set:function(e){this._scale=e}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e,this._xMotion.duration=e,this._yMotion.duration=e}},{key:"easing",get:function(){return this._easing},set:function(e){this._easing=e,this._xMotion.easing=e,this._yMotion.easing=e}},{key:"disablePitch",get:function(){return this._disablePitch}},{key:"disableYaw",get:function(){return this._disableYaw}}]),t}(l.Z),S=function(e){function t(t,n){var i,r=void 0===n?{}:n,a=r.easing,o=void 0===a?P.Xt:a,s=r.duration,c=void 0===s?0:s,l=r.scale,u=void 0===l?1:l;return(i=e.call(this)||this)._enabled=!1,i._touchInitialized=!1,i._prevPos=new x.FM8(0,0),i._screenSize=new x.FM8(0,0),i._onMouseDown=function(e){if(e.button===y.T.RIGHT){var t=i._view3D.renderer.canvas;e.preventDefault(),t.focus?t.focus():window.focus(),i._prevPos.set(e.clientX,e.clientY),window.addEventListener(y.FP.MOUSE_MOVE,i._onMouseMove,!1),window.addEventListener(y.FP.MOUSE_UP,i._onMouseUp,!1),window.addEventListener(y.FP.CONTEXT_MENU,i._onContextMenu,!1),i.trigger(w.QA.HOLD,{inputType:b.rC.TRANSLATE,isTouch:!1})}},i._onMouseMove=function(e){e.preventDefault();var t=i._prevPos,n=new x.FM8(e.clientX,e.clientY).sub(t).multiplyScalar(i._scale);i._xMotion.setEndDelta(-n.x),i._yMotion.setEndDelta(n.y),t.set(e.clientX,e.clientY)},i._onMouseUp=function(){i._prevPos.set(0,0),window.removeEventListener(y.FP.MOUSE_MOVE,i._onMouseMove,!1),window.removeEventListener(y.FP.MOUSE_UP,i._onMouseUp,!1),i.trigger(w.QA.RELEASE,{inputType:b.rC.TRANSLATE,isTouch:!1})},i._onTouchStart=function(e){2===e.touches.length&&(!1!==e.cancelable&&e.preventDefault(),i._prevPos.copy(i._getTouchesMiddle(e.touches)),i._touchInitialized=!0,i.trigger(w.QA.HOLD,{inputType:b.rC.TRANSLATE,isTouch:!0}))},i._onTouchMove=function(e){if(2===e.touches.length){!1!==e.cancelable&&e.preventDefault(),e.stopPropagation();var t=i._prevPos,n=i._getTouchesMiddle(e.touches);if(!i._touchInitialized)return t.copy(n),void(i._touchInitialized=!0);var r=(new x.FM8).subVectors(n,t).multiplyScalar(i._scale);i._xMotion.setEndDelta(-r.x),i._yMotion.setEndDelta(r.y),t.copy(n)}},i._onTouchEnd=function(e){2===e.touches.length?(i._prevPos.copy(i._getTouchesMiddle(e.touches)),i._touchInitialized=!0):i._touchInitialized&&(i._touchInitialized=!1,i.trigger(w.QA.RELEASE,{inputType:b.rC.TRANSLATE,isTouch:!0}))},i._onContextMenu=function(e){e.preventDefault(),window.removeEventListener(y.FP.CONTEXT_MENU,i._onContextMenu,!1)},i._view3D=t,i._xMotion=new O.Z({duration:c,range:P.oK,easing:o}),i._yMotion=new O.Z({duration:c,range:P.oK,easing:o}),i._scale=u,i}(0,o.Z)(t,e);var n=t.prototype;return n.destroy=function(){this.disable(),this.reset(),this.off()},n.reset=function(){this._touchInitialized=!1},n.update=function(e){var t=this._view3D.camera,n=t.newPose,i=this._screenSize,r=new x.FM8(this._xMotion.update(e),this._yMotion.update(e)),a=new x.Pa4(1,0,0).applyQuaternion(t.threeCamera.quaternion),o=new x.Pa4(0,1,0).applyQuaternion(t.threeCamera.quaternion),s=new x.FM8(t.renderWidth,t.renderHeight).divide(i);r.multiply(s);var c=n.pivot.clone();n.pivot=c.add(a.multiplyScalar(r.x)).add(o.multiplyScalar(r.y))},n.resize=function(e){this._screenSize.copy(new x.FM8(e.width,e.height))},n.enable=function(){if(!this._enabled){var e=this._view3D.renderer.canvas;e.addEventListener(y.FP.MOUSE_DOWN,this._onMouseDown,!1),e.addEventListener(y.FP.TOUCH_START,this._onTouchStart,{passive:!1,capture:!1}),e.addEventListener(y.FP.TOUCH_MOVE,this._onTouchMove,{passive:!1,capture:!1}),e.addEventListener(y.FP.TOUCH_END,this._onTouchEnd,{passive:!1,capture:!1}),this._enabled=!0,this.sync(),this.trigger(w.QA.ENABLE,{inputType:b.rC.TRANSLATE})}},n.disable=function(){if(this._enabled){var e=this._view3D.renderer.canvas;e.removeEventListener(y.FP.MOUSE_DOWN,this._onMouseDown,!1),window.removeEventListener(y.FP.MOUSE_MOVE,this._onMouseMove,!1),window.removeEventListener(y.FP.MOUSE_UP,this._onMouseUp,!1),e.removeEventListener(y.FP.TOUCH_START,this._onTouchStart,!1),e.removeEventListener(y.FP.TOUCH_MOVE,this._onTouchMove,!1),e.removeEventListener(y.FP.TOUCH_END,this._onTouchEnd,!1),window.removeEventListener(y.FP.CONTEXT_MENU,this._onContextMenu,!1),this._enabled=!1,this.trigger(w.QA.DISABLE,{inputType:b.rC.TRANSLATE})}},n.sync=function(){this._xMotion.reset(0),this._yMotion.reset(0)},n._getTouchesMiddle=function(e){return new x.FM8(e[0].clientX+e[1].clientX,e[0].clientY+e[1].clientY).multiplyScalar(.5)},(0,r.Z)(t,[{key:"enabled",get:function(){return this._enabled}},{key:"animating",get:function(){return this._xMotion.activated||this._yMotion.activated}},{key:"scale",get:function(){return this._scale},set:function(e){this._scale=e}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e,this._xMotion.duration=e,this._yMotion.duration=e}},{key:"easing",get:function(){return this._easing},set:function(e){this._easing=e,this._xMotion.easing=e,this._yMotion.easing=e}}]),t}(l.Z),k=function(e){function t(t,n){var i,r=void 0===n?{}:n,a=r.type,o=void 0===a?b.sO.FOV:a,s=r.scale,c=void 0===s?1:s,l=r.duration,u=void 0===l?P.zn:l,h=r.minFov,d=void 0===h?1:h,f=r.maxFov,v=void 0===f?b.B7:f,p=r.minDistance,_=void 0===p?.1:p,m=r.maxDistance,g=void 0===m?2:m,y=r.easing,E=void 0===y?P.Xt:y;return(i=e.call(this)||this)._scaleModifier=1,i._wheelModifier=.02,i._touchModifier=.05,i._prevTouchDistance=-1,i._enabled=!1,i._isFirstTouch=!0,i._isWheelScrolling=!1,i._onWheel=function(e){var t=i._view3D.wheelScrollable;if(0!==e.deltaY&&!t){e.preventDefault(),e.stopPropagation();var n=i._motion,r=-i._scale*i._scaleModifier*i._wheelModifier*e.deltaY;i._isWheelScrolling||i.trigger(w.QA.HOLD,{inputType:b.rC.ZOOM,isTouch:!1}),i._isWheelScrolling=!0,n.setEndDelta(r)}},i._onTouchMove=function(e){var t=e.touches;if(2===t.length){!1!==e.cancelable&&e.preventDefault(),e.stopPropagation();var n=i._motion,r=i._prevTouchDistance,a=new x.FM8(t[0].pageX,t[0].pageY),o=new x.FM8(t[1].pageX,t[1].pageY),s=a.sub(o).length()*i._scale*i._scaleModifier*i._touchModifier,c=i._isFirstTouch?0:s-r;i._prevTouchDistance=s,i._isFirstTouch&&i.trigger(w.QA.HOLD,{inputType:b.rC.ZOOM,isTouch:!0}),i._isFirstTouch=!1,n.setEndDelta(c)}},i._onTouchEnd=function(e){0===e.touches.length&&(i.trigger(w.QA.RELEASE,{inputType:b.rC.ZOOM,isTouch:!0}),i._prevTouchDistance=-1,i._isFirstTouch=!0)},i._view3D=t,i._type=o,i._scale=c,i._duration=u,i._minFov=d,i._maxFov=v,i._minDistance=_,i._maxDistance=g,i._easing=E,i._motion=new O.Z({duration:u,easing:E,range:{min:-1/0,max:1/0}}),i}(0,o.Z)(t,e);var n=t.prototype;return n.destroy=function(){this.disable(),this.reset(),this.off()},n.reset=function(){this._prevTouchDistance=-1,this._isFirstTouch=!0,this._isWheelScrolling=!1},n.update=function(e){var t=this._view3D.camera.newPose,n=this._motion,i=n.progress,r=n.update(e),a=n.progress;t.zoom-=r,this._isWheelScrolling&&i<1&&a>=1&&(this.trigger(w.QA.RELEASE,{inputType:b.rC.ZOOM,isTouch:!1}),this._isWheelScrolling=!1)},n.resize=function(e){},n.enable=function(){if(!this._enabled){var e=this._view3D.renderer.canvas;e.addEventListener(y.FP.WHEEL,this._onWheel,{passive:!1,capture:!1}),e.addEventListener(y.FP.TOUCH_MOVE,this._onTouchMove,{passive:!1,capture:!1}),e.addEventListener(y.FP.TOUCH_END,this._onTouchEnd,{passive:!1,capture:!1}),this._enabled=!0,this.sync(),this.trigger(w.QA.ENABLE,{inputType:b.rC.ZOOM})}},n.disable=function(){if(this._enabled){var e=this._view3D.renderer.canvas;e.removeEventListener(y.FP.WHEEL,this._onWheel,!1),e.removeEventListener(y.FP.TOUCH_MOVE,this._onTouchMove,!1),e.removeEventListener(y.FP.TOUCH_END,this._onTouchEnd,!1),this._enabled=!1,this.trigger(w.QA.DISABLE,{inputType:b.rC.ZOOM})}},n.sync=function(){var e=this._view3D.camera;this._motion.reset(-e.zoom),this._type===b.sO.FOV?this._scaleModifier=-1:this._scaleModifier=-e.baseDistance/44},n.updateRange=function(){var e=this._motion.range,t=this._view3D.camera;if(this._type===b.sO.FOV){var n=t.baseFov,i=this._maxFov;e.max=i===b.B7?Math.min(n+45,175)-n:i-n,e.min=this._minFov-n}else e.max=t.baseDistance*this._maxDistance-t.baseDistance,e.min=t.baseDistance*this._minDistance-t.baseDistance},(0,r.Z)(t,[{key:"enabled",get:function(){return this._enabled}},{key:"animating",get:function(){return this._motion.activated}},{key:"range",get:function(){return this._motion.range}},{key:"type",get:function(){return this._type},set:function(e){this._type=e}},{key:"scale",get:function(){return this._scale},set:function(e){this._scale=e}},{key:"duration",get:function(){return this._duration}},{key:"minFov",get:function(){return this._minFov}},{key:"maxFov",get:function(){return this._maxFov}},{key:"minDistance",get:function(){return this._minDistance}},{key:"maxDistance",get:function(){return this._maxDistance}},{key:"easing",get:function(){return this._easing}}]),t}(l.Z),M=function(){function e(e){var t=this;this._onEnable=function(e){if(e.inputType!==b.rC.ZOOM){var n=t._view3D,i=n.renderer.canvas;n.useGrabCursor&&(t._rotateControl.enabled||t._translateControl.enabled)&&i.style.cursor===y.WV.NONE&&t._setCursor(y.WV.GRAB)}},this._onDisable=function(e){e.inputType!==b.rC.ZOOM&&(t._view3D.renderer.canvas.style.cursor!==y.WV.NONE&&!t._rotateControl.enabled&&!t._translateControl.enabled&&t._setCursor(y.WV.NONE))},this._onHold=function(e){var n=e.inputType,i=e.isTouch,r=t._view3D;n===b.rC.ZOOM||i||r.useGrabCursor&&(t._rotateControl.enabled||t._translateControl.enabled)&&t._setCursor(y.WV.GRABBING);r.trigger(b.FP.INPUT_START,{type:b.FP.INPUT_START,target:r,inputType:n})},this._onRelease=function(e){var n=e.inputType,i=e.isTouch,r=t._view3D;n===b.rC.ZOOM||i||r.useGrabCursor&&(t._rotateControl.enabled||t._translateControl.enabled)&&t._setCursor(y.WV.GRAB);r.trigger(b.FP.INPUT_END,{type:b.FP.INPUT_END,target:r,inputType:n})},this._view3D=e,this._rotateControl=new T(e,(0,E.PO)(e.rotate)),this._translateControl=new S(e,(0,E.PO)(e.translate)),this._zoomControl=new k(e,(0,E.PO)(e.zoom)),this._extraControls=[],[this._rotateControl,this._translateControl,this._zoomControl].forEach((function(e){var n;e.on(((n={})[w.QA.HOLD]=t._onHold,n[w.QA.RELEASE]=t._onRelease,n[w.QA.ENABLE]=t._onEnable,n[w.QA.DISABLE]=t._onDisable,n))}))}var t=e.prototype;return t.destroy=function(){this._rotateControl.destroy(),this._translateControl.destroy(),this._zoomControl.destroy(),this._extraControls.forEach((function(e){return e.destroy()})),this._extraControls=[]},t.update=function(e){this._rotateControl.update(e),this._translateControl.update(e),this._zoomControl.update(e),this._extraControls.forEach((function(t){return t.update(e)}))},t.resize=function(e){this._rotateControl.resize(e),this._translateControl.resize(e),this._zoomControl.resize(e),this._extraControls.forEach((function(t){return t.resize(e)}))},t.enable=function(){var e=this._view3D;e.rotate&&this._rotateControl.enable(),e.translate&&this._translateControl.enable(),e.zoom&&this._zoomControl.enable(),this._extraControls.forEach((function(e){return e.enable()}))},t.disable=function(){this._rotateControl.disable(),this._translateControl.disable(),this._zoomControl.disable(),this._extraControls.forEach((function(e){return e.disable()}))},t.sync=function(){this._rotateControl.sync(),this._translateControl.sync(),this._zoomControl.sync(),this._extraControls.forEach((function(e){return e.sync()}))},t.add=function(e){this._extraControls.push(e)},t.remove=function(e){var t=this._extraControls,n=t.findIndex((function(t){return t===e}));n>=0&&t.splice(n,1)},t.updateCursor=function(){var e=this._view3D.useGrabCursor?y.WV.GRAB:y.WV.NONE;this._setCursor(e)},t._setCursor=function(e){var t=this._view3D;(t.useGrabCursor||e===y.WV.NONE)&&(t.renderer.canvas.style.cursor=e)},(0,r.Z)(e,[{key:"rotate",get:function(){return this._rotateControl}},{key:"translate",get:function(){return this._translateControl}},{key:"zoom",get:function(){return this._zoomControl}},{key:"controls",get:function(){return[this._rotateControl,this._translateControl,this._zoomControl]}},{key:"extraControls",get:function(){return this._extraControls}},{key:"animating",get:function(){return this._rotateControl.animating||this._translateControl.animating||this._zoomControl.animating||this._extraControls.some((function(e){return e.animating}))}}]),e}(),C=n(7693),R=n(9911),N=n(8331),D=n(5157),F=n(7631),A=n(1496),L=n(1677),I=new D._,z=new F.a,Z=function(e){function t(t){var n;(n=e.call(this,t)||this)._loader=new N.E;var i=n._loader;return i.setCrossOrigin("anonymous"),i.setDRACOLoader(I),i.setKTX2Loader(z.detectSupport(t.renderer.threeRenderer)),n}(0,o.Z)(t,e),t.setMeshoptDecoder=function(){var e=(0,i.Z)(c().mark((function e(n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var a=document.createElement("script");a.addEventListener("load",(0,i.Z)(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.MeshoptDecoder.ready;case 2:t.meshoptDecoder=window.MeshoptDecoder,document.body.removeChild(a),e();case 5:case"end":return n.stop()}}),n)})))),a.addEventListener("error",(function(){document.body.removeChild(a),r()})),a.src=new URL(n,location.href).href,document.body.appendChild(a)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var n=t.prototype;return n.load=function(e){var n=this,i=this._view3D,r=this._loader,a=(0,E.uh)(i,e);return I.setDecoderPath(i.dracoPath),z.setTranscoderPath(i.ktxPath),t.meshoptDecoder&&r.setMeshoptDecoder(t.meshoptDecoder),r.manager=x.tEQ,new Promise((function(t,i){try{r.load(e,(function(i){var r=n._parseToModel(i,e);t(r)}),(function(t){return n._onLoadingProgress(t,e,a)}),(function(e){a.initialized=!0,i(e)}))}catch(o){i(o)}}))},n.loadFromFiles=function(e){var n=this,i=this._view3D,r=this._loader,a=[],o=function(){a.forEach((function(e){URL.revokeObjectURL(e)}))};return I.setDecoderPath(i.dracoPath),z.setTranscoderPath(i.ktxPath),t.meshoptDecoder&&r.setMeshoptDecoder(t.meshoptDecoder),new Promise((function(t,s){if(e.length<=0)s(new Error("No files found"));else{var c=e.find((function(e){return/\.(gltf|glb)$/i.test(e.name)}));if(c){var l=new Map;e.forEach((function(e){l.set(e.name,e)}));var u=URL.createObjectURL(c);a.push(u);var h=new x.lLk;h.setURLModifier((function(e){if(/^data:.*,.*$/i.test(e))return e;var t=/[^\/|\\]+$/.exec(e),n=t&&t[0]||"";if(l.has(n)){var i=l.get(n),r=URL.createObjectURL(i);return a.push(r),r}return e}));var d=(0,E.uh)(i,u);r.manager=h,r.load(u,(function(e){var i=n._parseToModel(e,c.name);o(),t(i)}),(function(e){return n._onLoadingProgress(e,u,d)}),(function(e){d.initialized=!0,o(),s(e)}))}else s(new Error("No glTF file found"))}}))},n._parseToModel=function(e,t){var n=this._view3D,r=n.fixSkinnedBbox;e.scenes.forEach((function(e){e.traverse((function(e){e.frustumCulled=!1}))}));var a=n.renderer.threeRenderer.capabilities.maxTextureSize,o=[];e.scenes.forEach((function(e){e.traverse((function(e){e.isMesh&&o.push(e)}))}));var s=o.reduce((function(e,t){return[].concat(e,Array.isArray(t.material)?t.material:[t.material])}),[]).reduce((function(e,t){return[].concat(e,w.xI.filter((function(e){return t[e]})).map((function(e){return t[e]})))}),[]),l=e.parser.associations,u=e.parser.json,h=s.filter((function(e){return l.has(e)})).map((function(e){return u.textures[l.get(e).textures]})),d=[].concat(new Set(h).values()).reduce((function(e,t,n){var i=t.extensions&&t.extensions[w.ei],r=t.extras&&t.extras[w.Fy];if(!i&&!r)return e;var o=s[n];return(i?t.extensions[w.ei].levels:t.extras[w.Fy].levels).forEach((function(t,n){var i=t.index;t.size>a||(e[n]||(e[n]=[]),e[n].push({index:i,texture:o}))})),e}),[]),f=d.map((function(){return!1}));d.forEach(function(){var t=(0,i.Z)(c().mark((function t(i,r){var a,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(i.map((function(t){var n=t.index;return e.parser.getDependency("texture",n)})));case 2:if(a=t.sent,o=f.slice(r+1).some((function(e){return!!e})),f[r]=!0,!o){t.next=7;break}return t.abrupt("return");case 7:a.forEach((function(e,t){var r=i[t].texture;r.image=e.image,r.needsUpdate=!0,n.renderer.renderSingleFrame()}));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());var v=[];if(e.parser.json.extras&&e.parser.json.extras[w.HZ]){var p=e.parser.json.extras[w.HZ];v.push.apply(v,n.annotation.parse(p))}return new A.Z({src:t,scenes:e.scenes,annotations:v,animations:e.animations,fixSkinnedBbox:r})},t}(L.Z),U=Z,j=(n(9768),function(e){function t(t,n){var r,o=void 0===n?{}:n,s=o.src,l=void 0===s?null:s,p=o.iosSrc,g=void 0===p?null:p,y=o.dracoPath,w=void 0===y?P.yt:y,x=o.ktxPath,O=void 0===x?P.eA:x,T=o.meshoptPath,S=void 0===T?null:T,k=o.fixSkinnedBbox,R=void 0!==k&&k,N=o.fov,D=void 0===N?b.B7:N,F=o.center,A=void 0===F?b.B7:F,L=o.yaw,I=void 0===L?0:L,z=o.pitch,Z=void 0===z?0:z,U=o.initialZoom,j=void 0===U?0:U,H=o.rotate,B=void 0===H||H,V=o.translate,W=void 0===V||V,G=o.zoom,Q=void 0===G||G,q=o.autoplay,X=void 0!==q&&q,Y=o.scrollable,K=void 0===Y||Y,J=o.wheelScrollable,$=void 0!==J&&J,ee=o.useGrabCursor,te=void 0===ee||ee,ne=o.skybox,ie=void 0===ne?null:ne,re=o.envmap,ae=void 0===re?null:re,oe=o.background,se=void 0===oe?null:oe,ce=o.exposure,le=void 0===ce?1:ce,ue=o.shadow,he=void 0===ue||ue,de=o.skyboxBlur,fe=void 0!==de&&de,ve=o.toneMapping,pe=void 0===ve?b.bU.LINEAR:ve,_e=o.useDefaultEnv,me=void 0===_e||_e,ge=o.annotationURL,ye=void 0===ge?null:ge,we=o.annotationWrapper,Ee=void 0===we?"."+b.Qz.ANNOTATION_WRAPPER:we,be=o.annotationSelector,xe=void 0===be?"."+b.Qz.ANNOTATION:be,Oe=o.annotationBreakpoints,Pe=void 0===Oe?P.FW:Oe,Te=o.webAR,Se=void 0===Te||Te,ke=o.sceneViewer,Me=void 0===ke||ke,Ce=o.quickLook,Re=void 0===Ce||Ce,Ne=o.arPriority,De=void 0===Ne?P.QU:Ne,Fe=o.poster,Ae=void 0===Fe?null:Fe,Le=o.canvasSelector,Ie=void 0===Le?"canvas":Le,ze=o.autoInit,Ze=void 0===ze||ze,Ue=o.autoResize,je=void 0===Ue||Ue,He=o.useResizeObserver,Be=void 0===He||He,Ve=o.maintainSize,We=void 0!==Ve&&Ve,Ge=o.on,Qe=void 0===Ge?{}:Ge,qe=o.plugins,Xe=void 0===qe?[]:qe,Ye=o.maxDeltaTime,Ke=void 0===Ye?1/30:Ye;return(r=e.call(this)||this)._rootEl=(0,E.sb)(t),r._src=l,r._iosSrc=g,r._dracoPath=w,r._ktxPath=O,r._meshoptPath=S,r._fixSkinnedBbox=R,r._fov=D,r._center=A,r._yaw=I,r._pitch=Z,r._initialZoom=j,r._rotate=B,r._translate=W,r._zoom=Q,r._autoplay=X,r._scrollable=K,r._wheelScrollable=$,r._useGrabCursor=te,r._skybox=ie,r._envmap=ae,r._background=se,r._exposure=le,r._shadow=he,r._skyboxBlur=fe,r._toneMapping=pe,r._useDefaultEnv=me,r._annotationURL=ye,r._annotationWrapper=Ee,r._annotationSelector=xe,r._annotationBreakpoints=Pe,r._webAR=Se,r._sceneViewer=Me,r._quickLook=Re,r._arPriority=De,r._poster=Ae,r._canvasSelector=Ie,r._autoInit=Ze,r._autoResize=je,r._useResizeObserver=Be,r._maintainSize=We,r._model=null,r._initialized=!1,r._loadingContext=[],r._plugins=Xe,r._maxDeltaTime=Ke,r._renderer=new u.Z((0,a.Z)(r)),r._camera=new d.Z((0,a.Z)(r)),r._control=new M((0,a.Z)(r)),r._scene=new h.Z((0,a.Z)(r)),r._animator=new v.Z((0,a.Z)(r)),r._autoPlayer=new C.Z((0,a.Z)(r),(0,E.PO)(X)),r._autoResizer=new f.Z((0,a.Z)(r)),r._arManager=new _.Z((0,a.Z)(r)),r._annotationManager=new m.Z((0,a.Z)(r)),r._addEventHandlers(Qe),r._addPosterImage(),(0,i.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._initPlugins(Xe);case 2:if(!l||!Ze){e.next=5;break}return e.next=5,r.init();case 5:case"end":return e.stop()}}),e)})))(),r}(0,o.Z)(t,e);var n=t.prototype;return n.destroy=function(){var e=this;this._scene.reset(),this._renderer.destroy(),this._control.destroy(),this._autoResizer.disable(),this._animator.reset(),this._annotationManager.destroy(),this._plugins.forEach((function(t){return t.teardown(e)})),this._plugins=[]},n.init=function(){var e=(0,i.Z)(c().mark((function e(){var t,n,i,r,a,o,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._src){e.next=2;break}throw new g.Z(R.ZP.MESSAGES.PROVIDE_SRC_FIRST,R.ZP.CODES.PROVIDE_SRC_FIRST);case 2:if(t=this._scene,n=this._renderer,i=this._control,r=this._annotationManager,a=this._meshoptPath,o=[],this.resize(),r.init(),this._autoResize&&this._autoResizer.enable(),!a||U.meshoptDecoder){e.next=14;break}return e.next=14,U.setMeshoptDecoder(a);case 14:return o.push.apply(o,t.initTextures()),s=this._loadModel(this._src),o.push.apply(o,s),this._resetLoadingContextOnFinish(o),e.next=20,Promise.race(s);case 20:if(!this._annotationURL){e.next=23;break}return e.next=23,this._annotationManager.load(this._annotationURL);case 23:i.enable(),this._autoplay&&this._autoPlayer.enable(),n.stopAnimationLoop(),n.setAnimationLoop(n.defaultRenderLoop),n.renderSingleFrame(),this._initialized=!0,this.trigger(b.FP.READY,{type:b.FP.READY,target:this});case 30:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.resize=function(){var e=this._renderer,t=this._initialized?e.size:null;e.resize();var n=e.size;this._camera.resize(n,t),this._control.resize(n),this._annotationManager.resize(),e.renderSingleFrame(!0),this.trigger(b.FP.RESIZE,Object.assign({},n,{type:b.FP.RESIZE,target:this}))},n.load=function(){var e=(0,i.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._initialized){e.next=8;break}return n=this._loadModel(t),this._resetLoadingContextOnFinish(n),e.next=5,Promise.race(n);case 5:this._src=t,e.next=11;break;case 8:return this._src=t,e.next=11,this.init();case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.display=function(e,t){var n=(void 0===t?{}:t).resetCamera,i=void 0===n||n,r=this._renderer,a=this._scene,o=this._camera,s=this._animator,c=this._annotationManager,l=r.threeRenderer.xr.isPresenting;if(a.reset(),a.add(e.scene),a.shadowPlane.updateDimensions(e),i&&(o.fit(e,this._center),o.reset(0)),s.reset(),s.setClips(e.animations),e.animations.length>0&&s.play(0),c.reset(),c.collect(),c.add.apply(c,e.annotations),this._model=e,l){var u=this._arManager.activeSession;u&&u.control.syncTargetModel(e)}r.renderSingleFrame(),this.trigger(b.FP.MODEL_CHANGE,{type:b.FP.MODEL_CHANGE,target:this,model:e})},n.loadPlugins=function(){var e=(0,i.Z)(c().mark((function e(){var t,n,i,r,a=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=a.length,i=new Array(n),r=0;r<n;r++)i[r]=a[r];return e.next=3,this._initPlugins(i);case 3:(t=this._plugins).push.apply(t,i);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.removePlugins=function(){var e=(0,i.Z)(c().mark((function e(){var t,n,i,r=this,a=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=a.length,n=new Array(t),i=0;i<t;i++)n[i]=a[i];return e.next=3,Promise.all(n.map((function(e){return e.teardown(r)})));case 3:n.forEach((function(e){var t=r._plugins.indexOf(e);t<0||r._plugins.splice(t,1)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n.screenshot=function(e){void 0===e&&(e="screenshot");var t=this._renderer.canvas.toDataURL("png"),n=document.createElement("a");n.href=t,n.download=e,n.click()},n._loadModel=function(e){var t=this,n=new U(this);if(Array.isArray(e)){var i=e.map((function(){return!1}));return e.map((function(e,r){return t._loadSingleModel(n,e,r,i)}))}return[this._loadSingleModel(n,e,0,[!1])]},n._loadSingleModel=function(){var e=(0,i.Z)(c().mark((function e(t,n,i,r){var a,o,s,l;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length-1,this.trigger(b.FP.LOAD_START,{type:b.FP.LOAD_START,target:this,src:n,level:i,maxLevel:a}),e.prev=2,e.next=5,t.load(n);case 5:if(o=e.sent,s=r.slice(i+1).some((function(e){return!!e})),l=r.some((function(e){return!!e})),this.trigger(b.FP.LOAD,{type:b.FP.LOAD,target:this,model:o,level:i,maxLevel:a}),r[i]=!0,!s){e.next=12;break}return e.abrupt("return");case 12:this.display(o,{resetCamera:!l}),e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(2),this.trigger(b.FP.LOAD_ERROR,{type:b.FP.LOAD_ERROR,target:this,level:i,maxLevel:a,error:e.t0}),new g.Z(R.ZP.MESSAGES.MODEL_FAIL_TO_LOAD(n),R.ZP.CODES.MODEL_FAIL_TO_LOAD);case 19:case"end":return e.stop()}}),e,this,[[2,15]])})));return function(t,n,i,r){return e.apply(this,arguments)}}(),n._addEventHandlers=function(e){var t=this;Object.keys(e).forEach((function(n){t.on(n,e[n])}))},n._addPosterImage=function(){var e=this._poster,t=this._rootEl;if(e){var n,i=(0,E.kK)(e);if(i||(0,E.dN)(e)){var r=i?e:t.querySelector(e);if(!r)throw new g.Z(R.ZP.MESSAGES.ELEMENT_NOT_FOUND(e),R.ZP.CODES.ELEMENT_NOT_FOUND);n=r}else{var a=document.createElement("img");a.className=b.Qz.POSTER,a.src=e,t.appendChild(a),n=a,this.once(b.FP.READY,(function(){a.parentElement===t&&t.removeChild(a)}))}this.once(b.FP.READY,(function(){n.parentElement&&n.parentElement.removeChild(n)}))}},n._initPlugins=function(){var e=(0,i.Z)(c().mark((function e(t){var n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map((function(e){return e.init(n)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n._resetLoadingContextOnFinish=function(){var e=(0,i.Z)(c().mark((function e(t){var n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Promise.all(t).then((function(){n.trigger(b.FP.LOAD_FINISH,{type:b.FP.LOAD_FINISH,target:n}),n._loadingContext=[]}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(0,r.Z)(t,[{key:"renderer",get:function(){return this._renderer}},{key:"scene",get:function(){return this._scene}},{key:"camera",get:function(){return this._camera}},{key:"control",get:function(){return this._control}},{key:"autoPlayer",get:function(){return this._autoPlayer}},{key:"model",get:function(){return this._model}},{key:"animator",get:function(){return this._animator}},{key:"ar",get:function(){return this._arManager}},{key:"annotation",get:function(){return this._annotationManager}},{key:"rootEl",get:function(){return this._rootEl}},{key:"initialized",get:function(){return this._initialized}},{key:"loadingContext",get:function(){return this._loadingContext}},{key:"plugins",get:function(){return this._plugins}},{key:"src",get:function(){return this._src}},{key:"iosSrc",get:function(){return this._iosSrc}},{key:"dracoPath",get:function(){return this._dracoPath}},{key:"ktxPath",get:function(){return this._ktxPath}},{key:"meshoptPath",get:function(){return this._meshoptPath}},{key:"fixSkinnedBbox",get:function(){return this._fixSkinnedBbox}},{key:"fov",get:function(){return this._fov}},{key:"center",get:function(){return this._center}},{key:"yaw",get:function(){return this._yaw}},{key:"pitch",get:function(){return this._pitch}},{key:"initialZoom",get:function(){return this._initialZoom},set:function(e){this._initialZoom=e}},{key:"rotate",get:function(){return this._rotate}},{key:"translate",get:function(){return this._translate}},{key:"zoom",get:function(){return this._zoom}},{key:"autoplay",get:function(){return this._autoplay}},{key:"scrollable",get:function(){return this._scrollable}},{key:"wheelScrollable",get:function(){return this._wheelScrollable}},{key:"useGrabCursor",get:function(){return this._useGrabCursor},set:function(e){this._useGrabCursor=e,this._control.updateCursor()}},{key:"skybox",get:function(){return this._skybox},set:function(e){this._scene.setSkybox(e),this._skybox=e,!e&&this._useDefaultEnv&&this._scene.setDefaultEnv()}},{key:"envmap",get:function(){return this._envmap},set:function(e){this._scene.setEnvMap(e),this._envmap=e,!e&&this._useDefaultEnv&&this._scene.setDefaultEnv()}},{key:"background",get:function(){return this._background}},{key:"exposure",get:function(){return this._exposure},set:function(e){this._exposure=e,this._renderer.threeRenderer.toneMappingExposure=e,this._renderer.renderSingleFrame()}},{key:"shadow",get:function(){return this._shadow}},{key:"skyboxBlur",get:function(){return this._skyboxBlur},set:function(e){this._skyboxBlur=e;var t=this._scene,n=t.root,i=t.root.environment;i&&null!==n.background&&(n.background=e?p.Z.createBlurredHDR(this,i):i)}},{key:"toneMapping",get:function(){return this._toneMapping},set:function(e){this._toneMapping=e,this._renderer.threeRenderer.toneMapping=e,this._renderer.renderSingleFrame()}},{key:"useDefaultEnv",get:function(){return this._useDefaultEnv}},{key:"annotationURL",get:function(){return this._annotationURL}},{key:"annotationWrapper",get:function(){return this._annotationWrapper}},{key:"annotationSelector",get:function(){return this._annotationSelector}},{key:"annotationBreakpoints",get:function(){return this._annotationBreakpoints}},{key:"webAR",get:function(){return this._webAR}},{key:"sceneViewer",get:function(){return this._sceneViewer}},{key:"quickLook",get:function(){return this._quickLook}},{key:"arPriority",get:function(){return this._arPriority}},{key:"poster",get:function(){return this._poster}},{key:"canvasSelector",get:function(){return this._canvasSelector}},{key:"autoInit",get:function(){return this._autoInit}},{key:"autoResize",get:function(){return this._autoResize},set:function(e){this._autoResize=e,e?this._autoResizer.enable():this._autoResizer.disable()}},{key:"useResizeObserver",get:function(){return this._useResizeObserver}},{key:"maintainSize",get:function(){return this._maintainSize},set:function(e){this._maintainSize=e}},{key:"maxDeltaTime",get:function(){return this._maxDeltaTime},set:function(e){this._maxDeltaTime=e}}]),t}(l.Z));j.VERSION="#__VERSION__#";var H=j,B=n(5360),V=(n(9254),function(){function e(e){void 0===e&&(e={}),this._options=e,this._button=null}var t=e.prototype;return t.init=function(){var e=(0,i.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._addButton(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.teardown=function(e){var t=this._button;t&&(t.parentElement===e.rootEl&&e.rootEl.removeChild(t),this._button=null)},t._addButton=function(){var e=(0,i.Z)(c().mark((function e(t){var n,i,r,a,o,s,l,u,h,d,f,v,p,_=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._options,i=n.availableText,r=void 0===i?"View in AR":i,a=n.unavailableText,o=void 0===a?"AR is not available in this browser":a,s=n.buttonClass,l=void 0===s?"view3d-ar-button":s,u=n.tooltipClass,h=void 0===u?"view3d-tooltip":u,e.next=3,t.ar.isAvailable();case 3:if(d=e.sent,f=document.createElement("button"),v=document.createElement("div"),p=document.createTextNode(d?r:o),f.classList.add(l),v.classList.add(h),f.disabled=!0,f.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" viewBox="0 0 24 24" width="32px" height="32px"><g><rect fill="none" height="24" width="24" x="0" y="0"/></g><g><g><path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.34,1,1,2.34,1,4v2h2V4z"/><path d="M3,20v-2H1v2c0,1.66,1.34,3,3,3h2v-2H4C3.45,21,3,20.55,3,20z"/><path d="M20,1h-2v2h2c0.55,0,1,0.45,1,1v2h2V4C23,2.34,21.66,1,20,1z"/><path d="M21,20c0,0.55-0.45,1-1,1h-2v2h2c1.66,0,3-1.34,3-3v-2h-2V20z"/><path d="M19,14.87V9.13c0-0.72-0.38-1.38-1-1.73l-5-2.88c-0.31-0.18-0.65-0.27-1-0.27s-0.69,0.09-1,0.27L6,7.39 C5.38,7.75,5,8.41,5,9.13v5.74c0,0.72,0.38,1.38,1,1.73l5,2.88c0.31,0.18,0.65,0.27,1,0.27s0.69-0.09,1-0.27l5-2.88 C18.62,16.25,19,15.59,19,14.87z M11,17.17l-4-2.3v-4.63l4,2.33V17.17z M12,10.84L8.04,8.53L12,6.25l3.96,2.28L12,10.84z M17,14.87l-4,2.3v-4.6l4-2.33V14.87z"/></g></g></svg>',f.appendChild(v),v.appendChild(p),t.rootEl.appendChild(f),this._button=f,!t.initialized){e.next=20;break}return e.next=18,this._setAvailable(t,f,d);case 18:e.next=21;break;case 20:t.once(b.FP.MODEL_CHANGE,(function(){_._setAvailable(t,f,d)}));case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t._setAvailable=function(){var e=(0,i.Z)(c().mark((function e(t,n,i){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i?(n.disabled=!1,n.addEventListener("click",(function(){t.ar.enter()}))):n.disabled=!0;case 1:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),e}()),W=V,G=function(){function e(e){void 0===e&&(e={}),this._options=e}var t=e.prototype;return t.init=function(){var e=(0,i.Z)(c().mark((function e(t){var n=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.on(b.FP.AR_START,(function(e){var i=e.session,r=i.domOverlay.root;if(r){if(n._cachedElements)Object.values(n._cachedElements).map((function(e){r.contains(e)||r.appendChild(e)}));else{var a=document.createElement("div");a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="48px" height="48px" fill="#FFFFFF"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>',a.classList.add("view3d-ar-close"),r.appendChild(a),n._cachedElements={closeButton:a}}var o=n._cachedElements.closeButton,s=function(){i.exit()};o.addEventListener("click",s),t.once(b.FP.AR_END,(function(){o.parentElement&&o.parentElement.removeChild(o),o.removeEventListener("click",s)}))}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.teardown=function(){},e}(),Q=G,q=function(){function e(t){var n=this;void 0===t&&(t={}),this._startLoading=function(t){var i=t.target;if(0===t.level){var r=n._options,a=r.type,o=void 0===a?"default":a,s=r.loadingLabel,c=void 0===s?"Loading 3D Model...":s,l=r.parsingLabel,u=void 0===l?"Parsing 3D Model...":l,h=r.labelColor,d=void 0===h?"#ffffff":h,f=r.barWidth,v=void 0===f?"70%":f,p=r.barHeight,_=void 0===p?"10px":p,m=r.barBackground,g=void 0===m?"#bbbbbb":m,y=r.barForeground,w=void 0===y?"#3e8ed0":y,E=r.spinnerWidth,x=void 0===E?"30%":E,O=r.overlayBackground,P=void 0===O?"rgba(0, 0, 0, 0.3)":O,T=document.createElement("div"),S=document.createElement("div"),k=document.createElement("div"),M=document.createElement("div"),C=document.createElement("div");if(T.classList.add("view3d-lb-overlay"),S.classList.add("view3d-lb-wrapper"),M.classList.add("view3d-lb-base"),k.classList.add("view3d-lb-label"),C.classList.add("view3d-lb-filler"),T.style.backgroundColor=P,o!==e.TYPE.SPINNER?(M.style.height=_,M.style.backgroundColor=g,C.style.backgroundColor=w):(M.classList.add("type-spinner"),M.style.width=x,M.style.paddingTop=x,C.style.borderWidth=_,C.style.borderColor=w,C.style.borderLeftColor="transparent"),o===e.TYPE.TOP?T.classList.add("type-top"):o===e.TYPE.DEFAULT&&(M.style.width=v),k.style.color=d,k.innerText=c,M.appendChild(C),S.appendChild(M),S.appendChild(k),T.appendChild(S),i.rootEl.appendChild(T),o!==e.TYPE.SPINNER){var R=function(){if(i.loadingContext.every((function(e){return e.initialized}))){var e=i.loadingContext.filter((function(e){return e.lengthComputable})).reduce((function(e,t){return e[0]+=t.loaded,e[1]+=t.total,e}),[0,0]),t=e[0],n=e[1];if(!(n<=0)){var r=t/n*100;C.style.width=r.toFixed(2)+"%",t===n&&(k.innerText=u)}}};i.on(b.FP.PROGRESS,R),i.once(b.FP.LOAD_FINISH,(function(){i.off(b.FP.PROGRESS,R)}))}i.once(b.FP.LOAD_FINISH,(function(){n._removeOverlay(i)})),n._overlay=T}},this._options=t}var t=e.prototype;return t.init=function(){var e=(0,i.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.on(b.FP.LOAD_START,this._startLoading);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.teardown=function(e){e.off(b.FP.LOAD_START,this._startLoading),this._removeOverlay(e)},t._removeOverlay=function(e){var t=this._overlay;t&&(t.parentElement===e.rootEl&&e.rootEl.removeChild(t),this._overlay=null)},e}();q.TYPE={DEFAULT:"default",TOP:"top",SPINNER:"spinner"};var X=q,Y=H},1677:function(e,t,n){var i=n(5702);t.Z=function(e){var t=this;this._onLoadingProgress=function(e,n,r){var a=t._view3D;r.initialized=!0,r.lengthComputable=e.lengthComputable,r.loaded=e.loaded,r.total=e.total,a.trigger(i.FP.PROGRESS,{type:i.FP.PROGRESS,target:a,src:n,lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total})},this._view3D=e}},9768:function(e,t,n){var i=n(4578),r=n(4412),a=n(8567),o=n(1266),s=n(8519),c=function(e){function t(t){return e.call(this,t)||this}(0,i.Z)(t,e);var n=t.prototype;return n.load=function(e){var t=this,n=this._view3D;return new Promise((function(i,a){var c=new r.dpR,l=(0,s.uh)(n,e);c.setCrossOrigin(o.o2),c.load(e,i,(function(n){return t._onLoadingProgress(n,e,l)}),(function(e){l.initialized=!0,a(e)}))}))},n.loadHDRTexture=function(e){var t=this,n=this._view3D;return new Promise((function(i,c){var l=new a.x;n.renderer.capabilities.halfFloat||(l.type=r.VzW);var u=(0,s.uh)(n,e);l.setCrossOrigin(o.o2),l.load(e,(function(e){e.mapping=r.dSO,i(e)}),(function(n){return t._onLoadingProgress(n,e,u)}),(function(e){u.initialized=!0,c(e)}))}))},t}(n(1677).Z);t.Z=c},8519:function(e,t,n){n.d(t,{Bb:function(){return M},Dc:function(){return v},Gr:function(){return T},PO:function(){return E},Pr:function(){return b},S3:function(){return l},TS:function(){return g},YC:function(){return x},c$:function(){return f},cM:function(){return w},cy:function(){return S},dN:function(){return d},dv:function(){return O},gE:function(){return h},hj:function(){return o},hl:function(){return y},kK:function(){return c},pU:function(){return R},sb:function(){return u},t7:function(){return _},uZ:function(){return p},uh:function(){return P},zc:function(){return m}});var i=n(4412),r=n(6872),a=n(9911),o=function(e){return"number"==typeof e},s=function(e){return"string"==typeof e},c=function(e){return!!e&&e.nodeType===Node.ELEMENT_NODE},l=function(e,t){var n=null;if(s(e)){var i=(t||document).querySelector(e);if(!i)return null;n=i}else c(e)&&(n=e);return n},u=function(e,t){var n=l(e,t);if(!n)throw s(e)?new r.Z(a.ZP.MESSAGES.ELEMENT_NOT_FOUND(e),a.ZP.CODES.ELEMENT_NOT_FOUND):new r.Z(a.ZP.MESSAGES.WRONG_TYPE(e,["HTMLElement","string"]),a.ZP.CODES.WRONG_TYPE);return n},h=function(e,t){var n=e.querySelector(t);if(!n)throw new r.Z(a.ZP.MESSAGES.CANVAS_NOT_FOUND,a.ZP.CODES.CANVAS_NOT_FOUND);return n},d=function(e){if(!s(e))return!1;var t=document.createDocumentFragment();try{t.querySelector(e)}catch(n){return!1}return!0},f=function(e){return e*Math.PI/180},v=function(e){return 180*e/Math.PI},p=function(e,t,n){return Math.max(Math.min(e,n),t)},_=function(e,t,n){return e*(1-n)+t*n},m=function(e,t,n){var i=Math.abs(n-t);if(e<t)e=n-(t-e)%i;else if(e>n){e=t+(e-n)%i}return e},g=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.forEach((function(t){Object.keys(t).forEach((function(n){var i=t[n];Array.isArray(e[n])&&Array.isArray(i)?e[n]=[].concat(e[n],i):e[n]=i}))})),e},y=function(e){for(var t=1;t<e;)t*=2;return t},w=function(e,t,n){var r=(new i.FM8).subVectors(t,e).normalize(),a=(new i.FM8).subVectors(n,e).normalize().angle()-r.angle(),o=-Math.sign(a)*(2*Math.PI-Math.abs(a));return Math.abs(a)<Math.abs(o)?a:o},E=function(e){return"object"==typeof e?e:{}},b=function(e){return e?"true":"false"},x=function(e,t,n){var r=f(t),a=f(n),o=new i.Pa4(0,0,0);return o.y=e*Math.sin(a),o.z=e*Math.cos(a),o.x=o.z*Math.sin(-r),o.z=o.z*Math.cos(-r),o},O=function(e){var t=new i.FM8(e.x,e.z),n=new i.FM8;return{yaw:Math.abs(e.y)<=.99?w(n,new i.FM8(0,1),t):0,pitch:Math.atan2(e.y,t.distanceTo(n))}},P=function(e,t){var n={src:t,loaded:0,total:0,lengthComputable:!1,initialized:!1};return e.loadingContext.push(n),n},T=function(e){if(e.normalized&&ArrayBuffer.isView(e.array)){var t=e.array,n=k(t),i=1/(Math.pow(2,8*t.BYTES_PER_ELEMENT)-1);return n?2*i:i}return 1},S=function(e,t,n,r){var a=t.geometry,o=a.attributes.position,s=a.attributes.skinIndex,c=a.attributes.skinWeight,l=t.skeleton.boneMatrices,u=(new i.Pa4).fromBufferAttribute(o,e).multiplyScalar(n),h=new i.Ltg(0,0,0,0),d=new i.Ltg(u.x,u.y,u.z).applyMatrix4(t.bindMatrix),f=[c.getX(e),c.getY(e),c.getZ(e),c.getW(e)].map((function(e){return e*r})),v=[s.getX(e),s.getY(e),s.getZ(e),s.getW(e)];f.forEach((function(e,t){var n=(new i.yGw).fromArray(l,16*v[t]);h.add(d.clone().applyMatrix4(n).multiplyScalar(e))}));var p=(new i.Pa4).fromArray(h.applyMatrix4(t.bindMatrixInverse).toArray());return p.applyMatrix4(t.matrixWorld),p},k=function(e){var t=new e.constructor(1);return t[0]=-1,t[0]<0},M=function(e){if(e.capabilities.isWebGL2)return!0;var t=e.getContext(),n=t.createTexture(),i=!0;try{var r=new Uint16Array(4),a=t.getExtension("OES_texture_half_float");if(a)t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,a.HALF_FLOAT_OES,r),i=t.getError()===t.NO_ERROR;else i=!1}catch(o){i=!1}return t.deleteTexture(n),i},C=function(e,t,n){var r;if(!e||t<0||n<0)return null;var a,o=e.meshes[t],s=null==o||null==(r=o.geometry.index)?void 0:r.array,c=s?(a=3,!a||a<=0?[]:Array.apply(0,Array(a)).map((function(e,t){return t}))).map((function(e){return s[3*n+e]})):null;if(!o||!s||!c||c.some((function(e){return null==e})))return null;var l=o.geometry.getAttribute("position");return c.map((function(e){return(new i.Pa4).fromBufferAttribute(l,e)}))},R=function(e,t,n){var i=C(e,t,n);if(!i)return null;var r=e.meshes[t],a=r.geometry.getIndex().array.slice(3*n,3*n+3);if(r.isSkinnedMesh){var o=r.geometry,s=o.attributes.position,c=o.attributes.skinWeight,l=T(s),u=T(c);i.forEach((function(e,t){var n=a[t],i=S(n,r,l,u);e.copy(i)}))}else i.forEach((function(e){e.applyMatrix4(r.matrixWorld)}));return i}}}]);