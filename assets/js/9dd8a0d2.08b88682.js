"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7054,891],{6240:function(e,t,n){n.d(t,{Z:function(){return h}});var i,r,o=n(7294),s=["title","titleId"];function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a.apply(this,arguments)}function c(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=function(e){var t=e.title,n=e.titleId,l=c(e,s);return o.createElement("svg",a({xmlns:"http://www.w3.org/2000/svg",height:18,viewBox:"0 0 24 24",width:18,"aria-labelledby":n},l),t?o.createElement("title",{id:n},t):null,i||(i=o.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),r||(r=o.createElement("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})))},u={CC0:"https://creativecommons.org/publicdomain/zero/1.0/","Creative Commons Attribution":"https://creativecommons.org/licenses/by/4.0/","CC Attribution-NonCommercial-ShareAlike":"http://creativecommons.org/licenses/by-nc-sa/4.0/"},h=function(e){var t=e.items,n=void 0===t?[]:t,i=e.className,r=void 0===i?"":i;return o.createElement("div",{className:r},o.createElement("article",{className:"message"},o.createElement("div",{className:"message-body"},o.createElement("div",{className:"mb-2 is-flex is-align-items-center"},o.createElement(l,{className:"mr-1"}),o.createElement("span",{className:"has-text-weight-bold"},"Assets Used")),n.map((function(e,t){return o.createElement("div",{key:t},o.createElement("span",{className:"mx-2"},"\u25aa"),o.createElement("a",{href:e.link},e.name)," by ",o.createElement("a",{href:e.authorLink},e.author)," licensed under ",o.createElement("a",{href:u[e.license]},e.license))})))))}},4918:function(e,t,n){n.d(t,{ZP:function(){return N}});var i,r,o=n(3366),s=n(3144),a=n(4578),c=n(7294),l=n(4412),u=n(6010),h=n(8993),d=["title","titleId"];function v(){return v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},v.apply(this,arguments)}function _(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p,f,m=function(e){var t=e.title,n=e.titleId,o=_(e,d);return c.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,"aria-labelledby":n},o),t?c.createElement("title",{id:n},t):null,i||(i=c.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),r||(r=c.createElement("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"})))},g=n(6396),w=n(8215),y=n(9055),b=function(e){var t=e.options,n=void 0===t?{}:t,i=JSON.stringify(n,void 0,4).replace(/"([^"]+)":/g,"$1:");return c.createElement("div",null,c.createElement(g.Z,{groupId:"options",defaultValue:"json",lazy:!0,values:[{label:"JSON",value:"json"},{label:"JavaScript",value:"js"}]},c.createElement(w.Z,{value:"json"},c.createElement(y.Z,{className:"language-json"},i)),c.createElement(w.Z,{value:"js"},c.createElement(y.Z,{className:"language-js"},'new View3D("#el", '+i+");"))))},E=["title","titleId"];function x(){return x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},x.apply(this,arguments)}function P(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var k=function(e){var t=e.title,n=e.titleId,i=P(e,E);return c.createElement("svg",x({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,fill:"#FFF","aria-labelledby":n},i),t?c.createElement("title",{id:n},t):null,p||(p=c.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),f||(f=c.createElement("path",{d:"m10 17 5-5-5-5v10z"})))},M=function(e){function t(t){var n;return(n=e.call(this,t)||this)._onEvent=function(e){var t=n.state.events,i=t[t.length-1];i&&e.type===i.name?i.count+=1:t.push({name:e.type,count:1}),n.setState({events:t})},n.state={events:[]},n}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this;setTimeout((function(){var t=e.props,n=t.view3D,i=t.events;Object.values(i).forEach((function(t){n.view3D.on(t,e._onEvent)}))}))},n.render=function(){var e=this.state.events;return c.createElement("div",{className:"view3d-events-overlay"},c.createElement("div",{className:"view3d-events"},c.createElement("div",{className:"button is-white is-outlined",style:{pointerEvents:"none"}},"Events Triggered"),e.map((function(e,t){return c.createElement("div",{className:"bulma-tags has-addons mb-0 ml-2",key:e.name},t>0&&c.createElement(k,{className:"mr-2"}),c.createElement("div",{className:"bulma-tag mb-0 is-medium is-dark"},e.name),c.createElement("div",{className:"bulma-tag mb-0 is-medium is-info"},e.count))}))))},t}(c.Component);M.defaultProps={events:[]};var O=M,T=["children","showBbox","showARButton","showExampleCode","clickToLoad"],S=["children","className","poster","showExampleCode","clickToLoad","showEventsTriggered"],C=function(e){function t(t){var n;return(n=e.call(this,t)||this)._rootRef=c.createRef(),n.state={arAvailable:!1,initialized:!1},n}(0,a.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this,t=this.props,n=(t.children,t.showBbox),i=t.showARButton,r=(t.showExampleCode,t.clickToLoad),s=(0,o.Z)(t,T),a=Object.assign({},s,{autoInit:!r&&s.autoInit}),c=new h.ZP(this._rootRef.current,a);c.on("ready",(function(){e.setState({initialized:!0})})),this._view3D=c,n&&c.once("modelChange",(function(e){var t=e.model,n=t.bbox.clone().applyMatrix4(t.scene.matrixWorld),i=new l.GQ(n,new l.Ilk(65535));c.scene.add(i)})),i&&c.loadPlugins(new h._A,new h.If)},n.componentWillUnmount=function(){this._view3D.destroy()},n.render=function(){var e=this,n=this.state.initialized,i=this.props,r=i.children,s=i.className,a=i.poster,l=i.showExampleCode,d=i.clickToLoad,v=i.showEventsTriggered,_=(0,o.Z)(i,S),p=Array.isArray(l)?l:[],f=Object.keys(_).filter((function(e){return e in h.ZP.prototype&&(_[e]!==t.defaultProps[e]||p.includes(e))})).reduce((function(e,t){var n;return Object.assign({},e,((n={})[t]=_[t],n))}),{});return c.createElement(c.Fragment,null,c.createElement("div",{ref:this._rootRef,className:(0,u.Z)(s,"view3d-wrapper","view3d-square","mb-2")},c.createElement("canvas",{className:"view3d-canvas"}),d&&c.createElement("div",{className:(0,u.Z)({"view3d-overlay":!0,hidden:n})},c.createElement("div",{className:"button is-medium",onClick:function(t){var n=t.currentTarget;n.classList.contains("is-loading")||(n.classList.add("is-loading"),e._view3D.init())}},c.createElement("span",{className:"icon is-medium"},c.createElement(m,null)),c.createElement("span",null,"Load 3D model"))),a&&!n&&c.createElement("img",{className:"view3d-poster",src:a}),v&&c.createElement(O,{view3D:this,events:v}),r),l&&c.createElement(b,{options:f}))},(0,s.Z)(t,[{key:"view3D",get:function(){return this._view3D}}]),t}(c.Component);C.defaultProps={className:"",poster:null,clickToLoad:!1,showARButton:!1,showBbox:!1,showExampleCode:!1,showEventsTriggered:null,dracoPath:"/egjs-view3d/lib/draco/",ktxPath:"/egjs-view3d/lib/basis/",meshoptPath:"/egjs-view3d/lib/meshopt_decoder.js"};var N=C},7873:function(e,t,n){n.r(t),n.d(t,{default:function(){return Q}});var i,r,o=n(4578),s=n(7294),a=n(6010),c=n(4161),l=n(9960),u=n(9055),h=n(8993),d=n(6240),v="max400_g8Xu",_="packageName_9bdB",p="badges_H8YT",f="btnsWrapper_xHue",m="featuresImage_3Vev",g="features_hEjI",w="featuresIcon_Hdkm",y=n(4918),b=["title","titleId"];function E(){return E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},E.apply(this,arguments)}function x(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var P,k,M=function(e){var t=e.title,n=e.titleId,o=x(e,b);return s.createElement("svg",E({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,"aria-labelledby":n},o),t?s.createElement("title",{id:n},t):null,i||(i=s.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),r||(r=s.createElement("path",{d:"M7.53 21.48A10.487 10.487 0 0 1 1.56 13H.06c.51 6.16 5.66 11 11.95 11l.66-.03-3.81-3.81-1.33 1.32zm.89-6.52c-.19 0-.37-.03-.52-.08a1.07 1.07 0 0 1-.4-.24c-.11-.1-.2-.22-.26-.37-.06-.14-.09-.3-.09-.47h-1.3c0 .36.07.68.21.95.14.27.33.5.56.69.24.18.51.32.82.41.3.1.62.15.96.15.37 0 .72-.05 1.03-.15.32-.1.6-.25.83-.44s.42-.43.55-.72.2-.61.2-.97c0-.19-.02-.38-.07-.56a1.67 1.67 0 0 0-.23-.51c-.1-.16-.24-.3-.4-.43-.17-.13-.37-.23-.61-.31a2.098 2.098 0 0 0 .89-.75c.1-.15.17-.3.22-.46s.07-.32.07-.48c0-.36-.06-.68-.18-.96s-.29-.51-.51-.69c-.2-.19-.47-.33-.77-.43C9.11 8.05 8.77 8 8.4 8c-.36 0-.69.05-1 .16-.3.11-.57.26-.79.45-.21.19-.38.41-.51.67-.12.26-.18.54-.18.85h1.3c0-.17.03-.32.09-.45s.14-.25.25-.34.23-.17.38-.22.3-.08.48-.08c.4 0 .7.1.89.31.19.2.29.49.29.86 0 .18-.03.34-.08.49s-.14.27-.25.37c-.11.1-.25.18-.41.24-.16.06-.36.09-.58.09h-.77v1.03h.77c.22 0 .42.02.6.07s.33.13.45.23c.12.11.22.24.29.4s.1.35.1.57c0 .41-.12.72-.35.93-.23.23-.55.33-.95.33zm8.55-5.92c-.32-.33-.7-.59-1.14-.77-.44-.18-.93-.27-1.47-.27H12v8h2.3c.55 0 1.06-.09 1.51-.27s.84-.43 1.16-.76c.32-.33.57-.73.74-1.19.17-.47.26-.99.26-1.57v-.4c0-.58-.09-1.1-.26-1.57s-.42-.87-.74-1.2zm-.39 3.16c0 .42-.05.79-.14 1.13-.1.33-.24.62-.43.85-.19.23-.43.41-.71.53-.29.12-.62.18-.99.18h-.91V9.12h.97c.72 0 1.27.23 1.64.69.38.46.57 1.12.57 1.99v.4zM12.01 0l-.66.03 3.81 3.81 1.33-1.33c3.27 1.55 5.61 4.72 5.96 8.48h1.5C23.45 4.84 18.3 0 12.01 0z"})))},O=["title","titleId"];function T(){return T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},T.apply(this,arguments)}function S(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var C,N,R=function(e){var t=e.title,n=e.titleId,i=S(e,O);return s.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,"aria-labelledby":n},i),t?s.createElement("title",{id:n},t):null,P||(P=s.createElement("path",{fill:"none",d:"M0 0h24v24H0z"})),k||(k=s.createElement("path",{d:"M3 4c0-.55.45-1 1-1h2V1H4C2.34 1 1 2.34 1 4v2h2V4zM3 20v-2H1v2c0 1.66 1.34 3 3 3h2v-2H4c-.55 0-1-.45-1-1zM20 1h-2v2h2c.55 0 1 .45 1 1v2h2V4c0-1.66-1.34-3-3-3zM21 20c0 .55-.45 1-1 1h-2v2h2c1.66 0 3-1.34 3-3v-2h-2v2zM19 14.87V9.13c0-.72-.38-1.38-1-1.73l-5-2.88c-.31-.18-.65-.27-1-.27s-.69.09-1 .27L6 7.39c-.62.36-1 1.02-1 1.74v5.74c0 .72.38 1.38 1 1.73l5 2.88c.31.18.65.27 1 .27s.69-.09 1-.27l5-2.88c.62-.35 1-1.01 1-1.73zm-8 2.3-4-2.3v-4.63l4 2.33v4.6zm1-6.33L8.04 8.53 12 6.25l3.96 2.28L12 10.84zm5 4.03-4 2.3v-4.6l4-2.33v4.63z"})))},I=["title","titleId"];function D(){return D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},D.apply(this,arguments)}function L(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var z,F,A,Z=function(e){var t=e.title,n=e.titleId,i=L(e,I);return s.createElement("svg",D({xmlns:"http://www.w3.org/2000/svg",height:24,viewBox:"0 0 24 24",width:24,"aria-labelledby":n},i),t?s.createElement("title",{id:n},t):null,C||(C=s.createElement("path",{d:"M0 0h24v24H0V0z",fill:"none"})),N||(N=s.createElement("path",{d:"M10.5 4.5c.28 0 .5.22.5.5v2h6v6h2c.28 0 .5.22.5.5s-.22.5-.5.5h-2v6h-2.12c-.68-1.75-2.39-3-4.38-3s-3.7 1.25-4.38 3H4v-2.12c1.75-.68 3-2.39 3-4.38 0-1.99-1.24-3.7-2.99-4.38L4 7h6V5c0-.28.22-.5.5-.5m0-2A2.5 2.5 0 0 0 8 5H4c-1.1 0-1.99.9-1.99 2v3.8h.29c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-.3c0-1.49 1.21-2.7 2.7-2.7s2.7 1.21 2.7 2.7v.3H17c1.1 0 2-.9 2-2v-4a2.5 2.5 0 0 0 0-5V7c0-1.1-.9-2-2-2h-4a2.5 2.5 0 0 0-2.5-2.5z"})))},j=["title","titleId"];function H(){return H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},H.apply(this,arguments)}function G(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var V=function(e){var t=e.title,n=e.titleId,i=G(e,j);return s.createElement("svg",H({xmlns:"http://www.w3.org/2000/svg",width:1e3,height:500,viewBox:"0 0 1000 500",xmlSpace:"preserve","aria-labelledby":n},i),t?s.createElement("title",{id:n},t):null,z||(z=s.createElement("g",{fill:"#86C540"},s.createElement("path",{d:"M419.671 403.727c14.757-16.554 22.561-40.735 22.561-73.316V148.37h-31.174v28.48h-.385c-5.905-11.029-14.113-19.303-24.631-24.823-10.524-5.515-22.069-8.275-34.637-8.275-17.193 0-31.691 3.271-43.49 9.814-11.804 6.543-21.299 14.95-28.479 25.209-7.187 10.264-12.315 21.552-15.395 33.868-3.079 12.315-4.618 24.378-4.618 36.177 0 13.603 1.858 26.496 5.581 38.679 3.716 12.19 9.296 22.9 16.741 32.137 7.439 9.236 16.675 16.548 27.71 21.936 11.035 5.388 23.994 8.082 38.877 8.082 6.158 0 12.376-.769 18.665-2.309 6.291-1.539 12.19-3.782 17.71-6.735a59.932 59.932 0 0 0 14.817-11.16c4.36-4.487 7.95-9.813 10.776-15.972h.757v13.084c0 11.293-1.094 21.553-3.272 30.79-2.182 9.237-5.712 17.127-10.583 23.668-4.877 6.543-11.035 11.672-18.474 15.395-7.445 3.717-16.549 5.581-27.325 5.581-5.389 0-11.035-.579-16.935-1.732-2.13-.416-4.2-.928-6.211-1.53a424.477 424.477 0 0 1-6.51-2.356c-.2-.085-.399-.172-.598-.259v.036c-84.527-31.572-140.157-85.246-140.157-146.152 0-97.147 141.523-175.899 316.1-175.899 97.253 0 184.451 22.15 242.436 60.593C676.24 70.283 562.757 25.022 433.005 25 234.282 24.965 73.17 125.674 73.153 249.938c-.012 84.821 75.042 158.697 185.893 197.058 88.919 3.044 134.048-13.459 160.625-43.269zm-13.423-132.201c-2.182 9.236-5.58 17.512-10.199 24.823-4.617 7.314-10.715 13.219-18.28 17.703-7.571 4.493-16.742 6.735-27.517 6.735-10.777 0-19.761-2.242-26.941-6.735-7.186-4.484-12.959-10.39-17.319-17.703-4.366-7.311-7.444-15.454-9.237-24.439-1.797-8.978-2.694-17.956-2.694-26.94 0-9.489 1.088-18.6 3.271-27.326 2.178-8.719 5.641-16.417 10.392-23.092 4.745-6.669 10.837-11.991 18.281-15.972 7.439-3.975 16.417-5.965 26.941-5.965 10.259 0 18.984 2.057 26.17 6.158 7.18 4.107 13.019 9.561 17.511 16.356 4.486 6.801 7.758 14.432 9.814 22.899a109.169 109.169 0 0 1 3.079 25.786c0 9.238-1.095 18.475-3.272 27.712zM434.849 422.485c-18.854 17.113-52.532 36.647-98.397 44.316 30.707 5.339 63.065 8.194 96.49 8.198 129.236.025 242.425-45.091 305.881-109.055-57.984 38.206-144.83 59.951-241.728 59.951-23.018.002-40.626-.809-62.246-3.41z"}))),F||(F=s.createElement("path",{fill:"#86C540",d:"M633.84 347.908h-46.965V189.705h-58.922v-40.234h164.81v40.234H633.84v158.203zM764.173 347.908h-46.967V149.471h144.988v40.234h-98.021v37.128h85.803v40.233h-85.803v80.842zM469.554 100.031h32.714v247.313h-32.714V100.031z"})),A||(A=s.createElement("g",{fill:"#86C540"},s.createElement("path",{d:"M902.783 155.289h-7.348V174.4h-6.418v-19.111h-7.347v-5.52h21.112v5.52zM905.647 149.769h9.453l4.242 16.421h.069l4.243-16.421h9.453V174.4h-6.038v-18.697h-.068l-5.175 18.697h-4.897l-5.177-18.697h-.069V174.4h-6.036v-24.631z"}))))},U=function(){return s.createElement("section",{className:"py-4"},s.createElement("div",{className:"title mb-6"},"Features"),s.createElement("div",{className:"columns"},s.createElement("div",{className:"column"},s.createElement("div",{className:(0,a.Z)(g,"subtitle")},s.createElement(M,{className:(0,a.Z)(w,"mx-2")}),"glTF Viewer"),s.createElement(y.ZP,{className:"image is-square m-0",src:"/egjs-view3d/model/draco/plant.glb",poster:"/egjs-view3d/poster/plant.png",clickToLoad:!0,envmap:"/egjs-view3d/texture/artist_workshop_1k.hdr"}),s.createElement("div",{className:"block mt-4"},"View, rotate, translate and zoom your ",s.createElement("strong",null,"glTF 3D models")," in the web. Works on both ",s.createElement("strong",null,"\ud83d\udda5\ufe0f Desktop & \ud83d\udcf1 Mobile")),s.createElement("div",{className:"block"},"Customize your viewer with ",s.createElement("a",{href:"docs/options/model/src"},"Options")," like ",s.createElement("strong",null,"autoplay"),", ",s.createElement("strong",null,"skybox"),", and ",s.createElement("strong",null,"shadow")),s.createElement("div",{className:"block"},s.createElement("a",{href:"docs/options/model/src"},s.createElement("button",{className:"button"},"Options")))),s.createElement("div",{className:"column"},s.createElement("div",{className:(0,a.Z)(g,"subtitle")},s.createElement(R,{className:(0,a.Z)(w,"mx-2")}),"Augmented Reality"),s.createElement("figure",{className:"image is-square m-0"},s.createElement("video",{className:(0,a.Z)(m),src:"video/FloorARSession.mp4",muted:!0,autoPlay:!0,loop:!0})),s.createElement("div",{className:"block mt-4"},"View3D supports ",s.createElement("strong",null,"Augmented Reality")," based on ",s.createElement("a",{href:"docs/options/ar/webAR"},"WebXR"),", ",s.createElement("a",{href:"docs/options/ar/sceneViewer"},"Scene Viewer"),", and ",s.createElement("a",{href:"docs/options/ar/quickLook"},"AR Quick Look")),s.createElement("div",{className:"block"},"You can see, rotate, move, and scale the 3D model on the floor & wall in our AR sessions."),s.createElement("div",{className:"block"},s.createElement("a",{href:"docs/ar"},s.createElement("button",{className:"button"},"Demo")))),s.createElement("div",{className:"column"},s.createElement("div",{className:(0,a.Z)(g,"subtitle")},s.createElement(Z,{className:(0,a.Z)(w,"mx-2")}),"Supports compressed glTF 2.0 models"),s.createElement("figure",{className:"image is-square m-0"},s.createElement(V,{className:(0,a.Z)(m)})),s.createElement("div",{className:"block"},s.createElement("div",{className:"block mt-4"},"View3D can display compressed glTF models with the following extensions."),s.createElement("ul",null,s.createElement("a",{href:"docs/tutorials/Compression/Draco"},s.createElement("li",null,"KHR_draco_mesh_compression")),s.createElement("a",{href:"docs/tutorials/Compression/Meshopt"},s.createElement("li",null,"EXT_meshopt_compression")),s.createElement("a",{href:"docs/tutorials/Compression/Basisu"},s.createElement("li",null,"KHR_texture_basisu"))),s.createElement("div",{className:"block"},"Speed up your page load with compressed glTF models. Check out how to do it in our guide page."),s.createElement("div",{className:"block"},s.createElement("a",{href:"docs/tutorials/Compression/Draco"},s.createElement("button",{className:"button"},"Guide")))))))},B=function(){return s.createElement("section",{className:"py-4"},s.createElement("div",{className:"title mb-6"},"Quick Start"),s.createElement("div",{className:"columns"},s.createElement("div",{className:"column"},s.createElement(u.Z,{className:"language-html",title:"HTML"},'<div id="view3d" class="view3d-wrapper view3d-square">\n  <canvas class="view3d-canvas"></canvas>\n</div>')),s.createElement("div",{className:"column"},s.createElement(u.Z,{className:"language-js",title:"JS"},'import View3D from "@egjs/view3d";\nimport "@egjs/view3d/css/view3d-bundle.min.css";\n\nconst view3D = new View3D("#view3d", {\n  src: "URL_TO_YOUR_3D_MODEL",\n  envmap: "URL_TO_YOUR_HDR_IMAGE",\n});'))))},W=n(6396),q=n(8215),Y=function(){return s.createElement("section",{className:"py-4"},s.createElement("div",{className:"title mb-6"},"CDN Links"),s.createElement("div",{className:"columns"},s.createElement("div",{className:"column"},s.createElement("div",{className:"subtitle"},"JS"),s.createElement(W.Z,{groupId:"cdn",defaultValue:"url",lazy:!0,values:[{label:"URL",value:"url"},{label:"HTML <script>",value:"html"}]},s.createElement(q.Z,{value:"url"},s.createElement(u.Z,{className:"language-shell"},"https://unpkg.com/@egjs/view3d@latest/dist/view3d.pkgd.min.js")),s.createElement(q.Z,{value:"html"},s.createElement(u.Z,{className:"language-html"},'<script src="https://unpkg.com/@egjs/view3d@latest/dist/view3d.pkgd.min.js"><\/script>')))),s.createElement("div",{className:"column"},s.createElement("div",{className:"subtitle"},"CSS"),s.createElement(W.Z,{groupId:"cdn",defaultValue:"url",lazy:!0,values:[{label:"URL",value:"url"},{label:"HTML <link>",value:"html"},{label:"CSS @import",value:"css"}]},s.createElement(q.Z,{value:"url"},s.createElement(u.Z,{className:"language-shell"},"https://unpkg.com/@egjs/view3d@latest/dist/view3d-bundle.min.css")),s.createElement(q.Z,{value:"html"},s.createElement(u.Z,{className:"language-html"},'<link rel="stylesheet" href="https://unpkg.com/@egjs/view3d@latest/dist/view3d-bundle.min.css">')),s.createElement(q.Z,{value:"css"},s.createElement(u.Z,{className:"language-css"},'@import "https://unpkg.com/@egjs/view3d@latest/dist/view3d-bundle.min.css";'))))))},X=function(e){function t(){return e.apply(this,arguments)||this}(0,o.Z)(t,e);var n=t.prototype;return n.componentDidMount=function(){new h.ZP("#home-view3d",{src:"/egjs-view3d/model/cube.glb",envmap:"/egjs-view3d/texture/artist_workshop_1k.hdr",zoom:!1,pitch:25,autoplay:{canInterrupt:!1}})},n.render=function(){return s.createElement(c.Z,null,s.createElement("div",{className:"container pb-6"},s.createElement("div",{className:v},s.createElement("div",{id:"home-view3d",className:"view3d-wrapper view3d-square"},s.createElement("canvas",{className:"view3d-canvas"}))),s.createElement("section",{className:"py-4"},s.createElement("div",{className:(0,a.Z)(_,"is-size-1","has-text-centered","mb-4")},"View3D"),s.createElement("div",{className:(0,a.Z)(p,"mb-2")},s.createElement("img",{alt:"npm (scoped)",src:"https://img.shields.io/npm/v/@egjs/view3d?logo=npm"}),s.createElement("img",{alt:"License",src:"https://img.shields.io/github/license/naver/egjs-view3d"}),s.createElement("img",{alt:"Typescript",src:"https://img.shields.io/static/v1.svg?label=&message=TypeScript&color=294E80&style=flat-square&logo=typescript"}),s.createElement("img",{alt:"GitHub Repo stars",src:"https://img.shields.io/github/stars/naver/egjs-view3d?style=social"})),s.createElement(u.Z,{className:(0,a.Z)(v,"language-shell")},"npm install @egjs/view3d"),s.createElement("div",{className:"subtitle has-text-centered"},"Fast & Customizable glTF 3D model viewer, packed with full of features!"),s.createElement("div",{className:f},s.createElement(l.Z,{className:"button mr-2",to:"/docs"},"\ud83d\ude80 Get Started"),s.createElement(l.Z,{className:"button",to:"/Playground"},"\ud83d\ude82 Playground"))),s.createElement(U,null),s.createElement(B,null),s.createElement(Y,null),s.createElement(d.Z,{className:"py-4",items:[{name:"Potted Plant 04",link:"https://polyhaven.com/a/potted_plant_04",author:"Poly Haven",authorLink:"https://polyhaven.com/",license:"CC0"},{name:"Artist Workshop",link:"https://polyhaven.com/a/artist_workshop",author:"Poly Haven",authorLink:"https://polyhaven.com/",license:"CC0"}]})))},t}(s.Component),Q=X},7275:function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var i=n(7294),r=n(7873);function o(){return i.createElement(r.default,null)}},8993:function(e,t,n){n.d(t,{_A:function(){return Lt},If:function(){return Ft},EP:function(){return St},ZP:function(){return At}});var i,r=n(5861),o=n(3144),s=n(7326),a=n(4578),c=n(7757),l=n.n(c),u=n(2921),h=n(4412),d=function(e){function t(n,i){var r;return r=e.call(this,n)||this,Object.setPrototypeOf((0,s.Z)(r),t.prototype),r.name="View3DError",r.code=i,r}return(0,a.Z)(t,e),t}((0,n(4542).Z)(Error)),v={WRONG_TYPE:0,ELEMENT_NOT_FOUND:1,CANVAS_NOT_FOUND:2,WEBGL_NOT_SUPPORTED:3,PROVIDE_SRC_FIRST:4,PROVIDE_WIDTH_OR_HEIGHT:5,FORMAT_NOT_SUPPORTED:6,FILE_NOT_SUPPORTED:7,NOT_INITIALIZED:8},_={WRONG_TYPE:function(e,t){return typeof e+" is not a "+t.map((function(e){return'"'+e+'"'})).join(" or ")+"."},ELEMENT_NOT_FOUND:function(e){return'Element with selector "'+e+'" not found.'},CANVAS_NOT_FOUND:"The canvas element was not found inside the given root element",WEBGL_NOT_SUPPORTED:"WebGL is not supported on this browser.",PROVIDE_SRC_FIRST:'"src" should be provided before initialization',PROVIDE_WIDTH_OR_HEIGHT:"Either width or height should be given.",FORMAT_NOT_SUPPORTED:function(e){return'Given format "'+e+'" is not supported or invalid'},FILE_NOT_SUPPORTED:function(e){return'Given file "'+e+'" is not supported.'},NOT_INITIALIZED:"View3D is not initialized yet"},p=function(e,t){var n=null;if("string"==typeof e){var i=(t||document).querySelector(e);if(!i)throw new d(_.ELEMENT_NOT_FOUND(e),v.ELEMENT_NOT_FOUND);n=i}else e&&e.nodeType===Node.ELEMENT_NODE&&(n=e);return n},f=function(e){return e*Math.PI/180},m=function(e,t,n){return Math.max(Math.min(e,n),t)},g=function(e,t,n){return e*(1-n)+t*n},w=function(e,t,n){var i=Math.abs(n-t);if(e<t)e=n-(t-e)%i;else if(e>n){e=t+(e-n)%i}return e},y=function(e){return"object"==typeof e?e:{}},b=function(e){return e?"true":"false"},E=function(e,t,n){var i=f(t),r=f(n),o=new h.Pa4(0,0,0);return o.y=e*Math.sin(r),o.z=e*Math.cos(r),o.x=o.z*Math.sin(-i),o.z=o.z*Math.cos(-i),o},x="auto",P="ready",k="load",M="modelChange",O="resize",T="beforeRender",S="render",C="progress",N="quickLookTap",R="arStart",I="arEnd",D="arModelPlaced",L={SINE_WAVE:function(e){return Math.sin(e*Math.PI*2)},EASE_OUT_CUBIC:function(e){return 1-Math.pow(1-e,3)},EASE_OUT_BOUNCE:function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375}},z="webAR",F="sceneViewer",A="quickLook",Z="ar_only",j=function(){function e(e){var t=this;this._defaultRenderLoop=function(e){var n=t._view3D,i=n.scene,r=n.camera,o=n.control,s=n.autoPlayer,a=1e3*e;n.animator.update(e),o.update(a),s.update(a),n.trigger(T,{type:T,target:n,delta:a}),r.updatePosition(),t._renderer.render(i.root,r.threeCamera),n.trigger(S,{type:S,target:n,delta:a})},this._view3D=e,this._canvas=function(e,t){var n=e.querySelector(t);if(!n)throw new d(_.CANVAS_NOT_FOUND,v.CANVAS_NOT_FOUND);return n}(e.rootEl,e.canvasSelector);var n=new h.CP7({canvas:this._canvas,alpha:!0,antialias:!0,preserveDrawingBuffer:!0});n.toneMapping=h.EoG,n.toneMappingExposure=e.exposure,n.outputEncoding=h.knz,this._renderer=n,this._clock=new h.SUY(!1),this.enableShadow()}var t=e.prototype;return t.resize=function(){var e=this._renderer,t=this._canvas;e.xr.isPresenting||(e.setPixelRatio(window.devicePixelRatio),e.setSize(t.offsetWidth,t.offsetHeight,!1))},t.setAnimationLoop=function(e){var t=this;this._clock.start(),this._renderer.setAnimationLoop((function(n,i){var r=t._clock.getDelta();e(r,i)}))},t.stopAnimationLoop=function(){this._clock.stop(),this._renderer.setAnimationLoop(null)},t.enableShadow=function(){var e=this._renderer;e.shadowMap.enabled=!0,e.shadowMap.type=h.ntZ},t.disableShadow=function(){this._renderer.shadowMap.enabled=!1},(0,o.Z)(e,[{key:"canvas",get:function(){return this._canvas}},{key:"context",get:function(){return this._renderer.context}},{key:"threeRenderer",get:function(){return this._renderer}},{key:"defaultRenderLoop",get:function(){return this._defaultRenderLoop}},{key:"size",get:function(){var e=this._renderer.getSize(new h.FM8);return{width:e.width,height:e.y}}}]),e}(),H=n(8567),G=function(){function e(e){this._renderer=e}var t=e.prototype;return t.load=function(e){return new Promise((function(t,n){(new h.dpR).load(e,t,void 0,n)}))},t.loadEquirectagularTexture=function(e){var t=this;return new Promise((function(n,i){(new h.dpR).load(e,(function(e){n(t._equirectToCubemap(e))}),void 0,i)}))},t.loadCubeTexture=function(e){return new Promise((function(t,n){(new h.cBK).load(e,t,void 0,n)}))},t.loadHDRTexture=function(e){var t=this;return new Promise((function(n,i){var r=new H.x;r.setCrossOrigin("anonymous"),r.load(e,(function(e){n(t._equirectToCubemap(e))}),void 0,i)}))},t._equirectToCubemap=function(e){var t=new h.anP(this._renderer.threeRenderer),n=t.fromEquirectangular(e);return t.compileCubemapShader(),n},e}(),V=["alphaMap","aoMap","bumpMap","displacementMap","emissiveMap","envMap","lightMap","map","metalnessMap","normalMap","roughnessMap"],U="hold",B="release",W="enable",q="disable";!function(e){e[e.NONE=0]="NONE",e[e.ONE_FINGER_HORIZONTAL=1]="ONE_FINGER_HORIZONTAL",e[e.ONE_FINGER_VERTICAL=2]="ONE_FINGER_VERTICAL",e[e.ONE_FINGER=3]="ONE_FINGER",e[e.TWO_FINGER_HORIZONTAL=4]="TWO_FINGER_HORIZONTAL",e[e.TWO_FINGER_VERTICAL=8]="TWO_FINGER_VERTICAL",e[e.TWO_FINGER=12]="TWO_FINGER",e[e.PINCH=16]="PINCH"}(i||(i={}));var Y,X="mousedown",Q="mousemove",K="mouseup",J="touchstart",$="touchmove",ee="touchend",te="wheel",ne="resize",ie="contextmenu",re="mouseenter",oe="mouseleave";!function(e){e[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT"}(Y||(Y={}));var se,ae=Number.MAX_SAFE_INTEGER||9007199254740991,ce=function(){function e(e,t){var n=void 0===t?{}:t,i=n.opacity,r=void 0===i?.3:i,o=n.hardness,s=void 0===o?6:o,a=n.yaw,c=void 0===a?0:a,l=n.pitch,u=void 0===l?0:l;this._hardness=s,this._yaw=c,this._pitch=u,this._geometry=new h.BKK(2,2),this._material=new h.Tn7({opacity:r,fog:!1}),this._mesh=new h.Kj0(this._geometry,this._material),this._light=new h.Ox3,this._baseLightPos=new h.Pa4,this._modelRadius=0;var d=this._mesh;d.rotateX(-Math.PI/2),d.scale.setScalar(Math.pow(2,32)-1),d.receiveShadow=!0,d.castShadow=!1,d.name="ShadowPlane-Mesh";var v=this._light;v.intensity=0,v.target=d,v.castShadow=!0,v.name="ShadowPlane-Light";var _=e.renderer.threeRenderer.capabilities.maxTextureSize;this._maxHardness=Math.round(Math.log(_)/Math.log(2)),this._updateSoftnessLevel()}var t=e.prototype;return t.update=function(e){this._updatePlane(e),this._updateLightPosition(e),this.updateShadow()},t.updateShadow=function(e){void 0===e&&(e=1);var t=this._light,n=t.shadow.camera,i=this._modelRadius;t.position.copy(this._baseLightPos.clone().multiplyScalar(e));var r=1.5*e*i;n.near=0,n.far=ae,n.left=-r,n.right=r,n.top=r,n.bottom=-r,n.updateProjectionMatrix()},t._updateSoftnessLevel=function(){var e=this._light,t=m(Math.floor(this._hardness),1,this._maxHardness),n=Math.pow(2,t);e.shadow.mapSize.set(n,n)},t._updatePlane=function(e){var t=this._mesh,n=e.bbox,i=[n.min.x,n.min.z,n.max.x,n.max.z].map((function(e){return Math.abs(e)})),r=Math.max.apply(Math,i);t.scale.setScalar(100*r)},t._updateLightPosition=function(e){var t=this._yaw,n=this._pitch,i=e.bbox.getBoundingSphere(new h.aLr).radius,r=E(2*i+.1,t,90-n);this._baseLightPos.copy(r),this._modelRadius=i},(0,o.Z)(e,[{key:"mesh",get:function(){return this._mesh}},{key:"light",get:function(){return this._light}},{key:"opacity",get:function(){return this._material.opacity},set:function(e){this._material.opacity=e}},{key:"hardness",get:function(){return this._hardness}},{key:"yaw",get:function(){return this._yaw}},{key:"pitch",get:function(){return this._pitch}}]),e}(),le=function(){function e(e){this._view3D=e,this._root=new h.xsS,this._userObjects=new h.ZAu,this._envObjects=new h.ZAu,this._fixedObjects=new h.ZAu,this._shadowPlane=new ce(e,y(e.shadow));var t=this._root,n=this._userObjects,i=this._envObjects,r=this._fixedObjects,o=this._shadowPlane;n.name="userObjects",i.name="envObjects",r.name="fixedObjects",t.add(n,i,r),e.shadow&&r.add(o.mesh,o.light)}var t=e.prototype;return t.reset=function(e){var t=(void 0===e?{}:e).volatileOnly,n=void 0===t||t;this._removeChildsOf(this._userObjects),n||this._removeChildsOf(this._envObjects)},t.add=function(e,t){void 0===t&&(t=!0);var n=t?this._userObjects:this._envObjects,i=Array.isArray(e)?e:[e];n.add.apply(n,i)},t.remove=function(e){var t,n=Array.isArray(e)?e:[e];(t=this._root).remove.apply(t,n)},t.setBackground=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._root,"number"!=typeof t&&"#"!==t.charAt(0)){e.next=5;break}n.background=new h.Ilk(t),e.next=11;break;case 5:return i=new G(this._view3D.renderer),e.next=8,i.load(t);case 8:(r=e.sent).encoding=h.knz,n.background=r;case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.setSkybox=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._root,!t){e.next=10;break}return i=new G(this._view3D.renderer),e.next=5,i.loadHDRTexture(t);case 5:r=e.sent,n.background=r.texture,n.environment=r.texture,e.next=12;break;case 10:n.background=null,n.environment=null;case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.setEnvMap=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return n=new G(this._view3D.renderer),e.next=4,n.loadHDRTexture(t);case 4:i=e.sent,this._root.environment=i.texture,e.next=9;break;case 8:this._root.environment=null;case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t._removeChildsOf=function(e){for(e.traverse((function(e){if(e.isMesh){var t=e;t.geometry.dispose(),(Array.isArray(t.material)?t.material:[t.material]).forEach((function(e){V.forEach((function(t){e[t]&&e[t].dispose()}))}))}}));e.children.length>0;)e.remove(e.children[0])},(0,o.Z)(e,[{key:"root",get:function(){return this._root}},{key:"shadowPlane",get:function(){return this._shadowPlane}},{key:"userObjects",get:function(){return this._userObjects}},{key:"envObjects",get:function(){return this._envObjects}},{key:"fixedObjects",get:function(){return this._fixedObjects}}]),e}(),ue=le,he=function(){function e(e,t,n,i){void 0===i&&(i=[0,0,0]),this.yaw=e,this.pitch=t,this.zoom=n,this.pivot=(new h.Pa4).fromArray(i)}return e.prototype.clone=function(){return new e(this.yaw,this.pitch,this.zoom,this.pivot.toArray())},e}(),de=L.EASE_OUT_CUBIC,ve=300,_e={min:0,max:1},pe=new he(0,15,0,[0,0,0]),fe={min:-1/0,max:1/0},me={min:-89.9,max:89.9},ge=[z,F,A],we=function(){function e(e){var t=void 0===e?{}:e,n=t.duration,i=void 0===n?ve:n,r=t.loop,o=void 0!==r&&r,s=t.range,a=void 0===s?_e:s,c=t.easing,l=void 0===c?de:c;this._duration=i,this._loop=o,this._range=a,this._easing=l,this._activated=!1,this.reset(0)}var t=e.prototype;return t.update=function(e){if(!this._activated)return 0;var t=this._start,n=this._end,i=this._duration,r=this._val,o=this._loop,s=this._progress+e/i;this._progress=o?w(s,0,1):m(s,0,1);var a=this._easing(this._progress);return this._val=g(t,n,a),!o&&this._progress>=1&&(this._activated=!1),this._val-r},t.reset=function(e){var t=this._range,n=m(e,t.min,t.max);this._start=n,this._end=n,this._val=n,this._progress=0,this._activated=!1},t.setEndDelta=function(e){var t=this._range;this._start=this._val,this._end=m(this._end+e,t.min,t.max),this._progress=0,this._activated=!0},(0,o.Z)(e,[{key:"val",get:function(){return this._val}},{key:"start",get:function(){return this._start}},{key:"end",get:function(){return this._end}},{key:"progress",get:function(){return this._progress}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e}},{key:"loop",get:function(){return this._loop},set:function(e){this._loop=e}},{key:"range",get:function(){return this._range},set:function(e){this._range=e}},{key:"easing",get:function(){return this._easing},set:function(e){this._easing=e}}]),e}(),ye=we,be=function(){function e(e,t,n,i){var r=void 0===i?{}:i,o=r.duration,s=void 0===o?ve:o,a=r.easing,c=void 0===a?de:a;this._enabled=!1,this._finishCallbacks=[],this._view3D=e,t=t.clone(),n=n.clone(),t.yaw=w(t.yaw,0,360),n.yaw=w(n.yaw,0,360),Math.abs(n.yaw-t.yaw)>180&&(n.yaw=n.yaw<t.yaw?n.yaw+360:n.yaw-360),this._motion=new ye({duration:s,range:_e,easing:c}),this._from=t,this._to=n}var t=e.prototype;return t.destroy=function(){this.disable()},t.update=function(e){if(this._enabled){var t=this._view3D.camera,n=this._from,i=this._to,r=this._motion;r.update(e);var o=r.val;t.yaw=g(n.yaw,i.yaw,o),t.pitch=g(n.pitch,i.pitch,o),t.zoom=g(n.zoom,i.zoom,o),t.pivot=n.pivot.clone().lerp(i.pivot,o),o>=1&&(this.disable(),this._finishCallbacks.forEach((function(e){return e()})))}},t.enable=function(){this._enabled||(this._enabled=!0,this._motion.reset(0),this._motion.setEndDelta(1))},t.disable=function(){this._enabled&&(this._enabled=!1)},t.onFinished=function(e){this._finishCallbacks.push(e)},t.clearFinished=function(){this._finishCallbacks=[]},t.resize=function(e){},t.sync=function(){},(0,o.Z)(e,[{key:"element",get:function(){return null}},{key:"enabled",get:function(){return this._enabled}},{key:"duration",get:function(){return this._motion.duration},set:function(e){this._motion.duration=e}},{key:"easing",get:function(){return this._motion.easing},set:function(e){this._motion.easing=e}}]),e}(),Ee=function(){function e(e){this._distance=0,this._baseFov=45,this._defaultPose=pe,this._currentPose=this._defaultPose.clone(),this._view3D=e,this._threeCamera=new h.cPb,this._maxTanHalfHFov=0,this._defaultPose=new he(e.yaw,e.pitch,0),this._currentPose=this._defaultPose.clone()}var t=e.prototype;return t.reset=function(){var e=(0,r.Z)(l().mark((function e(t,n){var i,r,o,s,a,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t=0),void 0===n&&(n=de),i=this._view3D,r=i.control,o=this._currentPose,s=this._defaultPose,!(t<=0)){e.next=12;break}return this._currentPose=s.clone(),r.sync(),e.abrupt("return",Promise.resolve());case 12:return(a=new be(i,o,s)).duration=t,a.easing=n,a.enable(),r.disable(),c=function(e){a.update(e.delta)},i.on(T,c),e.abrupt("return",new Promise((function(e){a.onFinished((function(){r.sync(),r.enable(),i.off(T,c),e()}))})));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),t.resize=function(e){var t=e.width,n=e.height,i=this._threeCamera,r=t/n,o=this._view3D.fov;i.aspect=r,o===x?this._applyEffectiveFov(45):this._baseFov=o},t.fit=function(e,t){var n=this._view3D,i=this._threeCamera,r=n.control,o=this._defaultPose,s=e.bbox,a=n.fov,c=a===x?45:a,l=Array.isArray(t)?(new h.Pa4).fromArray(t):s.getCenter(new h.Pa4),u=e.reduceVertices((function(e,t){return Math.max(e,t.distanceToSquared(l))}),0),d=Math.sqrt(u),v=d/Math.sin(f(c/2)),_=e.reduceVertices((function(e,t){var n=(new h.Pa4).subVectors(t,l),i=Math.sqrt(n.x*n.x+n.z*n.z);return Math.max(e,i/(v-Math.abs(n.y)))}),0);a===x?(this._maxTanHalfHFov=_,this._applyEffectiveFov(c)):this._maxTanHalfHFov=a,o.pivot=l.clone(),this._distance=v,i.near=.1*(v-d),i.far=10*(v+d),r.zoom.updateRange()},t.updatePosition=function(){var e=this._view3D.control,t=this._threeCamera,n=this._currentPose,i=this._distance,r=this._baseFov,o=e.zoom.range;n.yaw=w(n.yaw,0,360),n.pitch=m(n.pitch,me.min,me.max),n.zoom=m(r+n.zoom,o.min,o.max)-r;var s=E(i,n.yaw,n.pitch),a=n.zoom+r;s.add(n.pivot),t.fov=a,t.position.copy(s),t.lookAt(n.pivot),t.updateProjectionMatrix()},t._applyEffectiveFov=function(e){var t=this._threeCamera,n=Math.tan(f(e/2)),i=n*Math.max(1,this._maxTanHalfHFov/n/t.aspect);this._baseFov=180*(2*Math.atan(i))/Math.PI,t.updateProjectionMatrix()},(0,o.Z)(e,[{key:"threeCamera",get:function(){return this._threeCamera}},{key:"defaultPose",get:function(){return this._defaultPose}},{key:"currentPose",get:function(){return this._currentPose.clone()}},{key:"yaw",get:function(){return this._currentPose.yaw},set:function(e){this._currentPose.yaw=e}},{key:"pitch",get:function(){return this._currentPose.pitch},set:function(e){this._currentPose.pitch=e}},{key:"zoom",get:function(){return this._currentPose.zoom},set:function(e){this._currentPose.zoom=e}},{key:"baseFov",get:function(){return this._baseFov}},{key:"pivot",get:function(){return this._currentPose.pivot},set:function(e){this._currentPose.pivot=e}},{key:"fov",get:function(){return this._threeCamera.fov}},{key:"pose",get:function(){return this._currentPose}},{key:"renderWidth",get:function(){return this.renderHeight*this._threeCamera.aspect}},{key:"renderHeight",get:function(){return 2*this._distance*Math.tan(f(this._threeCamera.getEffectiveFOV()/2))}}]),e}(),xe=Ee,Pe=function(){function e(e){var t=this;this._onResize=function(){t._view3d.resize()},this._view3d=e,this._enabled=!1,this._resizeObserver=null}var t=e.prototype;return t.enable=function(){var e=this._view3d;if(this._enabled&&this.disable(),e.useResizeObserver&&window.ResizeObserver){var t=new ResizeObserver(this._onResize);t.observe(e.renderer.canvas),this._resizeObserver=t}else e.resize(),window.addEventListener(ne,this._onResize);return this._enabled=!0,this},t.disable=function(){if(!this._enabled)return this;var e=this._resizeObserver;return e?(e.disconnect(),this._resizeObserver=null):window.removeEventListener(ne,this._onResize),this._enabled=!1,this},(0,o.Z)(e,[{key:"enabled",get:function(){return this._enabled}}]),e}(),ke=function(){function e(e){this._mixer=new h.Xcj(e),this._clips=[],this._actions=[]}var t=e.prototype;return t.setClips=function(e){var t=this._mixer;this._clips=e,this._actions=e.map((function(e){return t.clipAction(e)}))},t.play=function(e){var t=this._actions[e];t&&t.play()},t.pause=function(e){var t=this._actions[e];t&&(t.timeScale=0)},t.resume=function(e){var t=this._actions[e];t&&(t.timeScale=1)},t.stop=function(e){var t=this._actions[e];t&&t.stop()},t.update=function(e){this._mixer.update(e)},t.reset=function(){var e=this._mixer;e.uncacheRoot(e.getRoot()),this._clips=[],this._actions=[]},(0,o.Z)(e,[{key:"clips",get:function(){return this._clips}},{key:"mixer",get:function(){return this._mixer}}]),e}(),Me=n(7855),Oe=function(e){function t(t){var n,i=void 0===t?{}:t,r=i.context,o=void 0===r?window:r,s=i.repeat,a=void 0===s?0:s,c=i.duration,l=void 0===c?ve:c,u=i.easing,h=void 0===u?L.EASE_OUT_CUBIC:u;return(n=e.call(this)||this)._loop=function(){var e=n._getDeltaTime(),t=n._duration;n._time+=e;var i=Math.floor(n._time/t);n._time=w(n._time,0,t);var r=n._time/t,o={progress:r,easedProgress:n._easing(r)};n.trigger("progress",o);for(var s=0;s<i;s++){if(n._loopCount++,n._loopCount>n._repeat)return n.trigger("finish"),void n.stop();n.trigger("loop",Object.assign({},o,{loopIndex:n._loopCount}))}n._rafId=n._ctx.requestAnimationFrame(n._loop)},n._repeat=a,n._duration=l,n._easing=h,n._ctx=o,n._rafId=-1,n._time=0,n._clock=0,n._loopCount=0,n}(0,a.Z)(t,e);var n=t.prototype;return n.start=function(){this._rafId>=0||(this._updateClock(),this._loop())},n.stop=function(){this._rafId<0||(this._time=0,this._loopCount=0,this._stopLoop())},n.pause=function(){this._rafId<0||this._stopLoop()},n._stopLoop=function(){this._ctx.cancelAnimationFrame(this._rafId),this._rafId=-1},n._getDeltaTime=function(){var e=this._clock;return this._updateClock(),this._clock-e},n._updateClock=function(){this._clock=Date.now()},t}(u.Z),Te="immersive-ar",Se="local",Ce="viewer",Ne="selectstart",Re="selectend",Ie="generic-touchscreen",De={requiredFeatures:["hit-test"]},Le=function(e){return e?{requiredFeatures:["dom-overlay"],domOverlay:{root:e}}:{}},ze={},Fe=function(e,t){return"intent://arvr.google.com/scene-viewer/1.2?"+e+"#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;"+(t?"S.browser_fallback_url="+t+";":"")+"end;"},Ae=function(e,t){return"intent://arvr.google.com/scene-viewer/1.2?"+e+"#Intent;scheme=https;package=com.google.android.googlequicksearchbox;action=android.intent.action.VIEW;"+(t?"S.browser_fallback_url="+t+";":"")+"end;"},Ze=function(e){return"https://arvr.google.com/scene-viewer?"+e},je=function(){function e(e){var t=(void 0===e?{}:e).scale,n=void 0===t?1:t;this.rotation=new h._fP,this._axis=new h.Pa4(0,1,0),this._enabled=!1,this._active=!1,this._prevPos=new h.FM8,this._fromQuat=new h._fP,this._toQuat=new h._fP,this._motion=new ye({range:fe}),this._userScale=n}var t=e.prototype;return t.updateRotation=function(e){this.rotation.copy(e),this._fromQuat.copy(e),this._toQuat.copy(e)},t.enable=function(){this._enabled=!0},t.disable=function(){this._enabled=!1},t.activate=function(){this._enabled&&(this._active=!0)},t.deactivate=function(){this._active=!1},t.updateAxis=function(e){this._axis.copy(e)},t.setInitialPos=function(e){this._prevPos.copy(e[0])},t.process=function(e,t){var n=e.scene,i=e.xrCam,r=t.coords;if(this._active&&1===r.length){var o,s,a,c,l,u,d=this._prevPos,v=this._motion,_=r[0],p=n.modelMovable.getWorldPosition(new h.Pa4),f=(new h.FM8).fromArray(p.project(i).toArray()),m=(o=f,s=d,a=_,c=(new h.FM8).subVectors(s,o).normalize(),l=(new h.FM8).subVectors(a,o).normalize().angle()-c.angle(),u=-Math.sign(l)*(2*Math.PI-Math.abs(l)),(Math.abs(l)<Math.abs(u)?l:u)*this._userScale),g=(new h._fP).setFromAxisAngle(this._axis,m),w=this._getInterpolatedQuaternion();this._fromQuat.copy(w),this._toQuat.premultiply(g),v.reset(0),v.setEndDelta(1),d.copy(_)}},t.update=function(e,t){var n=e.scene;if(this._active){this._motion.update(t);var i=this._getInterpolatedQuaternion();this.rotation.copy(i),n.setModelRotation(i)}},t._getInterpolatedQuaternion=function(){var e=this._motion,t=this._toQuat,n=this._fromQuat,i=e.val;return(new h._fP).copy(n).slerp(t,i)},(0,o.Z)(e,[{key:"enabled",get:function(){return this._enabled}},{key:"scale",get:function(){return this._userScale},set:function(e){this._userScale=e}}]),e}();!function(e){e[e.WAITING=0]="WAITING",e[e.TRANSLATING=1]="TRANSLATING",e[e.BOUNCING=2]="BOUNCING"}(se||(se={}));var He,Ge=function(){function e(e){var t=void 0===e?{}:e,n=t.hoverHeight,i=void 0===n?.1:n,r=t.bounceDuration,o=void 0===r?1e3:r,s=t.bounceEasing,a=void 0===s?L.EASE_OUT_BOUNCE:s;this._hoverPosition=new h.Pa4,this._floorPosition=new h.Pa4,this._wallRotation=new h._fP,this._dragPlane=new h.JOQ,this._enabled=!1,this._vertical=!1,this._state=se.WAITING,this._initialPos=new h.FM8,this._hoverHeight=i,this._bounceMotion=new ye({duration:o,easing:a,range:fe})}var t=e.prototype;return t.enable=function(){this._enabled=!0},t.disable=function(){this.deactivate(),this._enabled=!1},t.activate=function(){this._enabled&&(this._dragPlane.constant=this._calcDragPlaneConstant(this._floorPosition),this._state=se.TRANSLATING)},t.deactivate=function(){if(this._enabled&&!this._vertical&&this._state!==se.WAITING){this._state=se.BOUNCING;var e=this._floorPosition,t=this._hoverPosition,n=this._bounceMotion,i=t.y-e.y;n.reset(i),n.setEndDelta(-i)}else this._state=se.WAITING},t.init=function(e,t,n){this._floorPosition.copy(e),this._hoverPosition.copy(e);var i=n?new h.Pa4(0,1,0).applyQuaternion(t):new h.Pa4(0,1,0);this._dragPlane.normal.copy(i),this._wallRotation.copy(t),this._vertical=n},t.setInitialPos=function(e){this._initialPos.copy(e[0])},t.process=function(e,t){var n=e.frame,i=e.referenceSpace,r=e.xrCam,o=t.hitResults,s=this._state,a=s===se.WAITING||s===se.BOUNCING;if(o&&1===o.length&&!a){var c=o[0],l=this._floorPosition.clone(),u=this._floorPosition,d=this._hoverPosition,v=this._hoverHeight,_=this._dragPlane,p=this._vertical,f=c.results[0]&&c.results[0].getPose(i),m=f&&(new h.yGw).fromArray(f.transform.matrix),g=f&&m.elements[5]>.75,w=f&&m.elements[5]<.25,y=(new h.Pa4).setFromMatrixPosition(r.matrixWorld),b=f&&(new h.Pa4).setFromMatrixPosition(m);if(p){if(n&&(!f||!w)){var E=n.getPose(c.inputSource.targetRaySpace,i);if(!E)return;var x=E.transform.position,P=new h.Pa4(x.x,x.y,x.z).sub(y).normalize(),k=new h.zHn(y,P).intersectPlane(_,new h.Pa4);return void(k&&u.copy(k))}var M=new h.Pa4(0,1,0),O=f.transform.orientation,T=M.clone().applyQuaternion(new h._fP(O.x,O.y,O.z,O.w)).normalize(),S=(new h.Pa4).crossVectors(new h.Pa4(0,1,0),T),C=new h.Pa4(0,1,0).applyQuaternion(this._wallRotation).normalize();if(Math.acos(Math.abs(C.dot(T)))>=Math.PI/18){var N=(new h.yGw).makeBasis(S,M,T),R=new h.USm(0,0,0,"YXZ").setFromRotationMatrix(N);R.z=0,R.x=Math.PI/2,this._wallRotation.setFromEuler(R),_.normal.copy(new h.Pa4(0,1,0).applyQuaternion(this._wallRotation)),_.constant=this._calcDragPlaneConstant(b)}var I=(new h.Pa4).subVectors(b,y).normalize(),D=new h.zHn(y,I).intersectPlane(_,new h.Pa4);if(!D)return;u.copy(D)}else{if(n&&(!f||!g)){var L=n.getPose(c.inputSource.targetRaySpace,i);if(!L)return;var z=L.transform.position,F=new h.Pa4(z.x,z.y,z.z).sub(y).normalize(),A=new h.zHn(y,F).intersectPlane(_,new h.Pa4);return void(A&&(u.copy(A),u.setY(l.y),d.copy(A)))}var Z=-_.constant,j=b.y+v;j-Z>.1&&(_.constant=-j);var H=(new h.Pa4).subVectors(b,y).normalize(),G=new h.zHn(y,H).intersectPlane(_,new h.Pa4);if(!G)return;u.copy(G),u.setY(b.y),d.copy(G)}}},t.update=function(e,t){var n=e.scene,i=this._state,r=this._floorPosition,o=this._hoverPosition,s=this._bounceMotion,a=this._vertical;i===se.BOUNCING&&(s.update(t),o.setY(r.y+s.val),s.progress>=1&&(this._state=se.WAITING)),n.setRootPosition(r),a?n.setWallRotation(this._wallRotation):n.setModelHovering(o.y-r.y)},t._calcDragPlaneConstant=function(e){var t=this._vertical,n=this._dragPlane.normal.clone(),i=new h.JOQ(n,0),r=t?0:this._hoverHeight;return-(i.distanceToPoint(e)+r)},(0,o.Z)(e,[{key:"enabled",get:function(){return this._enabled}},{key:"floorPosition",get:function(){return this._floorPosition.clone()}},{key:"hoverHeight",get:function(){return this._hoverHeight},set:function(e){this._hoverHeight=e}}]),e}(),Ve=function(){function e(e){var t=void 0===e?{}:e,n=t.width,i=void 0===n?.1:n,r=t.padding,o=void 0===r?20:r,s=t.offset,a=void 0===s?.05:s,c=t.font,l=void 0===c?"64px sans-serif":c,u=t.color,d=void 0===u?"white":u,v=document.createElement("canvas"),_=v.getContext("2d");_.font=l;var p=_.measureText("100%"),f=p.actualBoundingBoxLeft+p.actualBoundingBoxRight,m=p.actualBoundingBoxAscent+p.actualBoundingBoxDescent,g=function(e){for(var t=1;t<e;)t*=2;return t}(f);v.width=g,v.height=g;var w=i*(g/f);this._ctx=_,this._canvas=v,this._height=w*m/f,this._texture=new h.ROQ(v);var y=new h._12(w,w),b=new h.Kj0(y,new h.vBJ({map:this._texture,transparent:!0,depthTest:!1}));this._mesh=b,this._font=l,this._color=d,this._padding=o,this._offset=a,this.hide()}var t=e.prototype;return t.updatePosition=function(e,t,n){var i=this._mesh,r=this._height/2+this._offset+n,o=new h.Pa4(0,r,0).applyQuaternion(e.clone().invert());i.position.copy(o),i.lookAt(t)},t.updateScale=function(e){var t=this._ctx,n=this._canvas,i=this._padding,r=(100*e).toFixed(0);t.clearRect(0,0,n.width,n.height);var o=n.width/2,s=n.height/2,a=t.measureText(r+"%"),c=(a.actualBoundingBoxLeft+a.actualBoundingBoxRight)/2,l=(a.actualBoundingBoxAscent+a.actualBoundingBoxDescent)/2;t.beginPath(),t.moveTo(o-c,s-l-i),t.lineTo(o+c,s-l-i),t.quadraticCurveTo(o+c+i,s-l-i,o+c+i,s-l),t.lineTo(o+c+i,s+l),t.quadraticCurveTo(o+c+i,s+l+i,o+c,s+l+i),t.lineTo(o-c,s+l+i),t.quadraticCurveTo(o-c-i,s+l+i,o-c-i,s+l),t.lineTo(o-c-i,s-l),t.quadraticCurveTo(o-c-i,s-l-i,o-c,s-l-i),t.closePath(),t.lineWidth=5,t.fillStyle="rgba(0, 0, 0, 0.3)",t.fill(),t.stroke(),t.font=this._font,t.textAlign="center",t.textBaseline="middle",t.strokeStyle=this._color,t.fillStyle=this._color,t.fillText(r+"%",o,s),this._texture.needsUpdate=!0,this._mesh.scale.setScalar(1/e)},t.show=function(){this._mesh.visible=!0},t.hide=function(){this._mesh.visible=!1},(0,o.Z)(e,[{key:"mesh",get:function(){return this._mesh}},{key:"height",get:function(){return this._height}},{key:"visible",get:function(){return this._mesh.visible}}]),e}(),Ue=function(){function e(e){var t=void 0===e?{}:e,n=t.min,i=void 0===n?.05:n,r=t.max,o=void 0===r?5:r;this._enabled=!1,this._active=!1,this._prevCoordDistance=-1,this._scaleMultiplier=1,this._ui=new Ve,this._motion=new ye({duration:0,range:{min:i,max:o}}),this._motion.reset(1),this._ui=new Ve}var t=e.prototype;return t.setInitialScale=function(e){var t=e.scene,n=e.model,i=e.floorPosition,r=e.xrCam,o=e.initialScale,s=this._motion,a=s.range;if(o===x){var c=2*Math.atan(1/r.projectionMatrix.elements[5]),l=r.projectionMatrix.elements[0]/r.projectionMatrix.elements[5],u=r.position,d=n.bbox.max.y-n.bbox.min.y,v=u.distanceTo((new h.Pa4).addVectors(i,new h.Pa4(0,d/2,0)))*Math.tan(c/2),_=v*l,p=n.bbox.getBoundingSphere(new h.aLr),f=v/p.radius,g=_/p.radius,w=m(Math.min(g,f),a.min,1);s.reset(w)}else s.reset(m(o,a.min,a.max));var y=this._motion.val;this._scaleMultiplier=y,t.setModelScale(y)},t.setInitialPos=function(e){this._prevCoordDistance=(new h.FM8).subVectors(e[0],e[1]).length()},t.enable=function(){this._enabled=!0},t.disable=function(){this._enabled=!1,this.deactivate()},t.activate=function(e){this._active=!0,this._ui.show(),this._updateUIPosition(e)},t.deactivate=function(){this._active=!1,this._ui.hide(),this._prevCoordDistance=-1},t.process=function(e,t){var n=t.coords;if(2===n.length&&this._enabled&&this._active){var i=this._motion,r=(new h.FM8).subVectors(n[0],n[1]).length(),o=r-this._prevCoordDistance;i.setEndDelta(o),this._prevCoordDistance=r,this._updateUIPosition(e)}},t.update=function(e,t){var n=e.view3D,i=e.scene;if(this._enabled&&this._active){var r=this._motion;r.update(t),this._scaleMultiplier=r.val,this._ui.updateScale(this._scaleMultiplier),i.setModelScale(this._scaleMultiplier),n.scene.shadowPlane.updateShadow(this._scaleMultiplier)}},t._updateUIPosition=function(e){var t=e.view3D,n=e.scene,i=e.xrCam,r=e.vertical,o=t.model,s=(new h.Pa4).setFromMatrixPosition(i.matrixWorld),a=r?o.bbox.getBoundingSphere(new h.aLr).radius:o.bbox.max.y-o.bbox.min.y;this._ui.updatePosition(n.root.quaternion,s,a)},(0,o.Z)(e,[{key:"enabled",get:function(){return this._enabled}},{key:"scale",get:function(){return this._scaleMultiplier}},{key:"ui",get:function(){return this._ui}},{key:"range",get:function(){return this._motion.range}}]),e}(),Be=function(){function e(e){var t=void 0===e?{}:e,n=t.ringOpacity,i=void 0===n?.3:n,r=t.dirIndicatorOpacity,o=void 0===r?1:r,s=t.fadeoutDuration,a=void 0===s?1e3:s,c=Math.PI/18,l=new h.o8S(.975,1,150,1,-6*c,30*c),u=new h.zf8(.1,30,0,2*Math.PI);l.rotateX(-Math.PI/2),u.rotateX(-Math.PI/2);for(var d=new h.o8S(.96,1.015,30,1,25*c,4*c),v=d.attributes.position,_=Math.floor(11*v.count/16),p=Math.floor(13*v.count/16),f=Math.floor((p-_+1)/2),m=(new h.Pa4).fromBufferAttribute(v,_).y,g=_;g<p;g++){var w=g-_,y=.025*(f-Math.abs(w-f));v.setY(g,m-y)}d.rotateX(-Math.PI/2);var b=new h.vBJ({transparent:!0,opacity:i,color:16777215}),E=new h.vBJ({transparent:!0,opacity:o,color:16777215}),x=new h.Kj0(l,b),P=new h.Kj0(u,b),k=new h.Kj0(d,E),M=new h.ZAu;M.add(x,P,k),M.position.setY(1e-4),this._mesh=M,this._ring=x,this._reticle=P,this._arrow=k,this._animator=new ye({duration:a}),this._opacityRange={min:i,max:o},this.hide()}var t=e.prototype;return t.updateSize=function(e){this._mesh.scale.setScalar(e.bbox.getBoundingSphere(new h.aLr).radius)},t.update=function(e){var t=e.delta,n=e.rotation,i=this._mesh,r=this._animator;if(i.visible){r.update(t);var o=this._ring.material,s=this._arrow.material,a=this._opacityRange;o.opacity=r.val*a.min,s.opacity=r.val*a.max,r.val<=0&&(i.visible=!1),i.quaternion.copy(n),i.updateMatrix()}},t.show=function(){this._mesh.visible=!0,this._animator.reset(1)},t.hide=function(){this._mesh.visible=!1},t.fadeout=function(){this._animator.setEndDelta(-1)},(0,o.Z)(e,[{key:"mesh",get:function(){return this._mesh}}]),e}();!function(e){e[e.WAITING=0]="WAITING",e[e.IN_DEADZONE=1]="IN_DEADZONE",e[e.OUT_OF_DEADZONE=2]="OUT_OF_DEADZONE"}(He||(He={}));var We=function(){function e(e){var t=(void 0===e?{}:e).size,n=void 0===t?.1:t;this._state=He.WAITING,this._detectedGesture=i.NONE,this._testingGestures=i.NONE,this._lastFingerCount=0,this._aspect=1,this._prevOneFingerPos=new h.FM8,this._prevTwoFingerPos=new h.FM8,this._initialTwoFingerDistance=0,this._prevOneFingerPosInitialized=!1,this._prevTwoFingerPosInitialized=!1,this._size=n}var t=e.prototype;return t.setAspect=function(e){this._aspect=e},t.setFirstInput=function(e){var t=e.length;1!==t||this._prevOneFingerPosInitialized?2!==t||this._prevTwoFingerPosInitialized||(this._prevTwoFingerPos.copy((new h.FM8).addVectors(e[0],e[1]).multiplyScalar(.5)),this._initialTwoFingerDistance=(new h.FM8).subVectors(e[0],e[1]).length(),this._prevTwoFingerPosInitialized=!0):(this._prevOneFingerPos.copy(e[0]),this._prevOneFingerPosInitialized=!0),this._lastFingerCount=t,this._state=He.IN_DEADZONE},t.addTestingGestures=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._testingGestures=this._testingGestures|t.reduce((function(e,t){return e|t}),i.NONE)},t.cleanup=function(){this._testingGestures=i.NONE,this._lastFingerCount=0,this._prevOneFingerPosInitialized=!1,this._prevTwoFingerPosInitialized=!1,this._initialTwoFingerDistance=0,this._detectedGesture=i.NONE,this._state=He.WAITING},t.applyScreenAspect=function(e){var t=this._aspect;e.forEach((function(e){t>1?e.setY(e.y*t):e.setX(e.x/t)}))},t.check=function(e){var t=this._state,n=this._size,r=this._testingGestures,o=this._lastFingerCount,s=e.length;if(t===He.OUT_OF_DEADZONE)return this._detectedGesture;if(this._lastFingerCount=s,this.applyScreenAspect(e),s!==o)return this.setFirstInput(e),i.NONE;if(1===s){var a=e[0],c=this._prevOneFingerPos.clone(),l=(new h.FM8).subVectors(a,c);l.length()>n&&(Math.abs(l.x)>Math.abs(l.y)?i.ONE_FINGER_HORIZONTAL&r&&(this._detectedGesture=i.ONE_FINGER_HORIZONTAL):i.ONE_FINGER_VERTICAL&r&&(this._detectedGesture=i.ONE_FINGER_VERTICAL))}else if(2===s){var u=(new h.FM8).addVectors(e[1],e[0]).multiplyScalar(.5),d=this._prevTwoFingerPos.clone(),v=(new h.FM8).subVectors(u,d);v.length()>n&&(Math.abs(v.x)>Math.abs(v.y)?i.TWO_FINGER_HORIZONTAL&r&&(this._detectedGesture=i.TWO_FINGER_HORIZONTAL):i.TWO_FINGER_VERTICAL&r&&(this._detectedGesture=i.TWO_FINGER_VERTICAL));var _=(new h.FM8).subVectors(e[1],e[0]).length();Math.abs(_-this._initialTwoFingerDistance)>n&&i.PINCH&r&&(this._detectedGesture=i.PINCH)}return this._detectedGesture!==i.NONE&&(this._state=He.OUT_OF_DEADZONE),this._detectedGesture},(0,o.Z)(e,[{key:"size",get:function(){return this._size},set:function(e){this._size=e}},{key:"inDeadzone",get:function(){return this._state===He.IN_DEADZONE}}]),e}(),qe=We,Ye=function(){function e(e,t,n){var r=this,o=n.rotate,s=n.translate,a=n.scale,c=n.ring,l=n.deadzone,u=n.initialScale;this._onSelectStart=function(e){var t=e.frame,n=r._view3D,o=r._arScene,s=r._hitTestSource,a=r._deadzoneChecker,c=r._rotateControl,l=r._translateControl,u=r._scaleControl,d=n.renderer.threeRenderer,v=d.xr.getCamera(new h.cPb),_=d.xr.getReferenceSpace();if(s&&!(v.cameras.length<=0)){var p=v.cameras[0],f=n.model;c.enabled&&a.addTestingGestures(i.ONE_FINGER),l.enabled&&a.addTestingGestures(i.ONE_FINGER),u.enabled&&a.addTestingGestures(i.PINCH);var m=t.getHitTestResultsForTransientInput(s),g=r._hitResultToVector(m);if(a.applyScreenAspect(g),a.setFirstInput(g),1===g.length){var w=t.getPose(m[0].inputSource.targetRaySpace,_);if(w){var y=(new h.Pa4).setFromMatrixPosition(p.matrixWorld),b=w.transform.position,E=new h.Pa4(b.x,b.y,b.z).sub(y).normalize(),x=new h.zHn(y,E),P=f.bbox.getBoundingSphere(new h.aLr);P.applyMatrix4(o.modelMovable.matrixWorld),x.intersectSphere(P,new h.Pa4)&&(r._modelHit=!0)}}r._vertical&&!r._modelHit||r._floorIndicator.show()}},this._onSelectEnd=function(){r._deactivate(),r._floorIndicator.fadeout()},this._view3D=e,this._arScene=t,this._vertical=!1,this._initialized=!1,this._modelHit=!1,this._hitTestSource=null,this._rotate=o,this._translate=s,this._scale=a,this._initialScale=u,this._rotateControl=new je(y(o)),this._translateControl=new Ge(y(s)),this._scaleControl=new Ue(y(a)),this._floorIndicator=new Be(c),this._deadzoneChecker=new qe(l)}var t=e.prototype;return t.init=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,r,o,s,a,c,u,h,d,v,_;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.model,i=t.session,r=t.size,o=t.vertical,s=t.hitPosition,a=t.hitRotation,c=this._arScene,u=this._translateControl,h=this._scaleControl,d=this._floorIndicator,v=this._deadzoneChecker,this._vertical=o,u.init(s,a,o),v.setAspect(r.height/r.width),c.add(d.mesh,h.ui.mesh),this.syncTargetModel(n),e.next=13,i.requestHitTestSourceForTransientInput({profile:Ie});case 13:_=e.sent,this._hitTestSource=_,this._initialized=!0;case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),t.destroy=function(e){this._initialized&&(this._hitTestSource&&(this._hitTestSource.cancel(),this._hitTestSource=null),this.disable(e),this._floorIndicator.hide(),this._scaleControl.ui.hide(),e.removeEventListener(Ne,this._onSelectStart),e.removeEventListener(Re,this._onSelectEnd),this._initialized=!1)},t.enable=function(e){var t=this._rotate,n=this._translate,i=this._scale,r=this._rotateControl,o=this._translateControl,s=this._scaleControl,a=this._vertical;e.addEventListener(Ne,this._onSelectStart),e.addEventListener(Re,this._onSelectEnd),t&&!a&&r.enable(),n&&o.enable(),i&&s.enable()},t.disable=function(e){var t=this._rotateControl,n=this._translateControl,i=this._scaleControl;e.removeEventListener(Ne,this._onSelectStart),e.removeEventListener(Re,this._onSelectEnd),this._deactivate(),t.disable(),n.disable(),i.disable()},t.update=function(e){var t,n=e.view3D,i=e.session,r=e.frame,o=this._hitTestSource;if(o&&n.model){var s=this._deadzoneChecker,a=i.inputSources,c=null!=(t=null==r?void 0:r.getHitTestResultsForTransientInput(o))?t:[],l={coords:this._hitResultToVector(c),inputSources:a,hitResults:c};s.inDeadzone?this._checkDeadzone(e,l):this._processInput(e,l),this._updateControls(e)}},t.syncTargetModel=function(e){var t=this._initialScale,n=this._translateControl.floorPosition,i=this._view3D.renderer.threeRenderer.xr.getCamera(new h.cPb).cameras[0];this._floorIndicator.updateSize(e),this._scaleControl.setInitialScale({scene:this._arScene,model:e,floorPosition:n,xrCam:i,initialScale:t})},t._deactivate=function(){this._modelHit=!1,this._deadzoneChecker.cleanup(),this._rotateControl.deactivate(),this._translateControl.deactivate(),this._scaleControl.deactivate()},t._checkDeadzone=function(e,t){var n=t.coords,r=this._arScene,o=this._rotateControl,s=this._translateControl,a=this._scaleControl,c=this._deadzoneChecker.check(n.map((function(e){return e.clone()})));if(c!==i.NONE)switch(c){case i.ONE_FINGER_HORIZONTAL:case i.ONE_FINGER_VERTICAL:this._modelHit?(s.activate(),s.setInitialPos(n)):(o.activate(),o.updateRotation(r.modelMovable.quaternion),o.setInitialPos(n));break;case i.PINCH:a.activate(e),a.setInitialPos(n)}},t._processInput=function(e,t){this._rotateControl.process(e,t),this._translateControl.process(e,t),this._scaleControl.process(e,t)},t._updateControls=function(e){var t=e.delta,n=this._arScene,i=this._rotateControl,r=this._translateControl,o=this._scaleControl,s=this._floorIndicator,a=1e3*t;i.update(e,a),r.update(e,a),o.update(e,a);var c=i.rotation,l=r.floorPosition;n.setRootPosition(l),s.update({delta:a,rotation:c})},t._hitResultToVector=function(e){return e.map((function(e){return(new h.FM8).set(e.inputSource.gamepad.axes[0],-e.inputSource.gamepad.axes[1])}))},(0,o.Z)(e,[{key:"rotate",get:function(){return this._rotateControl}},{key:"translate",get:function(){return this._translateControl}},{key:"scale",get:function(){return this._scaleControl}}]),e}(),Xe=Ye,Qe=function(){function e(){this._root=new h.xsS,this._modelRoot=new h.ZAu,this._modelMovable=new h.ZAu,this._modelFixed=new h.ZAu,this._arRoot=new h.ZAu;var e=this._root,t=this._modelRoot,n=this._modelMovable,i=this._modelFixed,r=this._arRoot;t.add(n),e.add(t,i,r)}var t=e.prototype;return t.init=function(e){var t=this._root,n=this._modelMovable,i=this._modelFixed,r=e.scene;n.add(r.userObjects,r.envObjects),i.add(r.fixedObjects),t.environment=r.root.environment,this.hideModel()},t.destroy=function(e){var t=this._modelMovable,n=this._modelFixed,i=e.scene;[].concat(t.children,n.children).forEach((function(e){i.root.add(e)}))},t.showModel=function(){this._modelRoot.visible=!0},t.hideModel=function(){this._modelRoot.visible=!1},t.add=function(){var e;(e=this._arRoot).add.apply(e,arguments)},t.setRootPosition=function(e){this._root.position.copy(e)},t.setWallRotation=function(e){this._root.quaternion.copy(e)},t.updateModelRootPosition=function(e,t){var n=this._modelRoot;if(t){var i=e.bbox.max.y-e.bbox.min.y;n.position.setZ(i/2),n.position.setY(-e.bbox.min.z),n.rotateX(-Math.PI/2),n.updateMatrix()}},t.setModelHovering=function(e){this._modelMovable.position.setY(e)},t.setModelRotation=function(e){this._modelMovable.quaternion.copy(e)},t.setModelScale=function(e){this._root.scale.setScalar(e)},(0,o.Z)(e,[{key:"root",get:function(){return this._root}},{key:"modelRoot",get:function(){return this._modelRoot}},{key:"modelMovable",get:function(){return this._modelMovable}},{key:"arRoot",get:function(){return this._arRoot}}]),e}(),Ke=Qe,Je=function(){function e(){this._root=null}e.isAvailable=function(){return null!=window.XRDOMOverlayState};var t=e.prototype;return t.destroy=function(){this._root=null},t.getFeatures=function(e){return this._root=e,Le(e)},(0,o.Z)(e,[{key:"root",get:function(){return this._root}}]),e}(),$e=function(){function e(){this._source=null}e.isAvailable=function(){return window.XRSession&&window.XRSession.prototype.requestHitTestSource};var t=e.prototype;return t.destroy=function(){this._source&&(this._source.cancel(),this._source=null)},t.init=function(e){var t=this;e.requestReferenceSpace(Ce).then((function(n){e.requestHitTestSource({space:n}).then((function(e){t._source=e}))}))},t.getFeatures=function(){return De},t.getResults=function(e){var t;return null!=(t=null==e?void 0:e.getHitTestResults(this._source))?t:[]},(0,o.Z)(e,[{key:"ready",get:function(){return null!=this._source}}]),e}(),et=function(){function e(e,t){var n=void 0===t?{}:t,i=n.features,r=void 0===i?ze:i,o=n.vertical,s=void 0!==o&&o,a=n.overlayRoot,c=void 0===a?null:a,l=n.rotate,u=void 0===l||l,h=n.translate,d=void 0===h||h,v=n.scale,_=void 0===v||v,p=n.ring,f=void 0===p?{}:p,m=n.deadzone,g=void 0===m?{}:m,w=n.initialScale,y=void 0===w?x:w;this._view3D=e,this._modelPlaced=!1,this.features=r,this.vertical=s,this.overlayRoot=c,this._arScene=new Ke,this._control=new Xe(e,this._arScene,{rotate:u,translate:d,scale:_,ring:f,deadzone:g,initialScale:y}),this._hitTest=new $e,this._domOverlay=new Je}e.isAvailable=function(){return navigator.xr&&navigator.xr.isSessionSupported&&$e.isAvailable()&&Je.isAvailable()?navigator.xr.isSessionSupported(Te):Promise.resolve(!1)};var t=e.prototype;return t.enter=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,o,s,a,c,u,d,v,_,p,f,m=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._view3D,n=this._arScene,i=t.renderer,o=i.threeRenderer,s=this._control,a=this._hitTest,c=this._domOverlay,u=this.vertical,d=this._getAllXRFeatures(),o.xr.enabled=!0,e.next=12,navigator.xr.requestSession(Te,d);case 12:return v=e.sent,_=o.getPixelRatio(),o.setPixelRatio(1),o.xr.setReferenceSpaceType(Se),e.next=18,o.xr.setSession(v);case 18:n.init(t),a.init(v),p=function(){var e=(0,r.Z)(l().mark((function e(){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=c.root,s.destroy(v),n.destroy(t),!m.overlayRoot&&r&&t.rootEl.removeChild(r),c.destroy(),t.scene.shadowPlane.updateShadow(),o.setPixelRatio(_),i.stopAnimationLoop(),i.setAnimationLoop(i.defaultRenderLoop),t.trigger(I,{target:t,type:I,session:m});case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v.addEventListener("end",p,{once:!0}),(f=new h.SUY).start(),i.stopAnimationLoop(),o.xr.setAnimationLoop((function(e,i){var r,a,c=o.xr.getCamera(new h.cPb),l=f.getDelta();if(!(c.cameras.length<=0)){var d=c.cameras[0],_=o.xr.getReferenceSpace(),p=v.renderState.baseLayer,g={width:null!=(r=null==p?void 0:p.framebufferWidth)?r:1,height:null!=(a=null==p?void 0:p.framebufferHeight)?a:1},w={view3D:t,scene:n,session:v,delta:l,frame:i,vertical:u,referenceSpace:_,xrCam:d,size:g},y=1e3*l;t.trigger(T,{type:T,target:t,delta:y}),m._modelPlaced?(s.update(w),t.animator.update(l),o.render(n.root,d)):m._initModelPosition(w),t.trigger(S,{type:S,target:t,delta:y})}})),t.trigger(R,{type:R,target:t,session:this});case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.exit=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._view3D.renderer.threeRenderer.xr.getSession(),e.abrupt("return",null==t?void 0:t.end());case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t._getAllXRFeatures=function(){var e,t=this.features,n=null!=(e=p(this.overlayRoot))?e:this._createARRootElement();return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.forEach((function(t){Object.keys(t).forEach((function(n){var i=t[n];Array.isArray(e[n])&&Array.isArray(i)?e[n]=[].concat(e[n],i):e[n]=i}))})),e}({},this._domOverlay.getFeatures(n),this._hitTest.getFeatures(),t)},t._initModelPosition=function(e){var t=e.frame,n=e.session,i=e.size,r=e.vertical,o=e.referenceSpace,s=this._view3D,a=s.model,c=this._arScene,l=this._hitTest;if(l.ready&&a){var u=this._control,d=l.getResults(t);if(!(d.length<=0)){var v=d[0].getPose(o);if(v){var _=(new h.yGw).fromArray(v.transform.matrix);if(!(!r&&_.elements[5]<.75||r&&(_.elements[5]>=.25||_.elements[5]<=-.25))){var p=(new h.Pa4).setFromMatrixPosition(_),f=new h._fP;if(r){var m=new h.Pa4(0,1,0),g=v.transform.orientation,w=m.clone().applyQuaternion(new h._fP(g.x,g.y,g.z,g.w)).normalize(),y=(new h.Pa4).crossVectors(new h.Pa4(0,1,0),w),b=(new h.yGw).makeBasis(y,m,w),E=new h.USm(0,0,0,"YXZ").setFromRotationMatrix(b);E.z=0,E.x=Math.PI/2,f.setFromEuler(E),c.setWallRotation(f)}c.updateModelRootPosition(a,r),c.setRootPosition(p),c.showModel(),l.destroy(),this._modelPlaced=!0,s.trigger(D,{type:D,target:s,session:this,model:a}),u.init({model:a,vertical:r,session:n,size:i,hitPosition:p,hitRotation:f});var x=u.scale.scale,P=new Oe({context:n,duration:1e3});P.on("progress",(function(e){c.setModelScale(e.easedProgress*x)})),P.on("finish",(function(){c.setModelScale(x),u.enable(n)})),P.start()}}}}},t._createARRootElement=function(){var e=this._view3D,t=document.createElement("div");return t.classList.add("view3d-ar-overlay"),e.rootEl.appendChild(t),e.once(I,(function(){e.rootEl.removeChild(t)})),t},(0,o.Z)(e,[{key:"control",get:function(){return this._control}},{key:"arScene",get:function(){return this._arScene}},{key:"hitTest",get:function(){return this._hitTest}},{key:"domOverlay",get:function(){return this._domOverlay}}]),e}();et.type=z;var tt=et,nt=n(3366),it=["file","mode","fallbackURL","title","link","sound","resizable","vertical","disableOcclusion","initialScale","shareText"],rt=function(){function e(e,t){var n=void 0===t?{}:t,i=n.file,r=void 0===i?null:i,o=n.mode,s=void 0===o?Z:o,a=n.fallbackURL,c=void 0===a?null:a,l=n.title,u=void 0===l?null:l,h=n.link,d=void 0===h?null:h,v=n.sound,_=void 0===v?null:v,p=n.resizable,f=void 0===p||p,m=n.vertical,g=void 0!==m&&m,w=n.disableOcclusion,y=void 0!==w&&w,b=n.initialScale,E=void 0===b?x:b,P=n.shareText,k=void 0===P?null:P,M=(0,nt.Z)(n,it);this._view3D=e,this.file=r,this.fallbackURL=c,this.mode=s,this.title=u,this.link=d,this.sound=_,this.resizable=f,this.vertical=g,this.disableOcclusion=y,this.initialScale=E,this.shareText=k,this.otherParams=M}e.isAvailable=function(){return Promise.resolve(/android/i.test(navigator.userAgent))};var t=e.prototype;return t.enter=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,r,o,s,a,c,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._view3D.model,(i=Object.assign({title:this.title,link:this.link,sound:this.sound,mode:this.mode,initial_scale:this.initialScale},this.otherParams)).resizable=b(this.resizable),i.enable_vertical_placement=b(this.vertical),i.disable_occlusion=b(this.disableOcclusion),i.share_text=this.shareText?encodeURIComponent(this.shareText):null,r=null!=(t=this.file)?t:n.src){e.next=9;break}return e.abrupt("return",Promise.reject(new d(_.FILE_NOT_SUPPORTED(null!=(o=this.file)?o:n.src),v.FILE_NOT_SUPPORTED)));case 9:i.file=new URL(r,window.location.href).href,s=this.fallbackURL,a=Object.keys(i).filter((function(e){return null!=i[e]})).map((function(e){return e+"="+i[e]})).join("&"),c=i.mode===Z?Fe(a,s):Ae(a,s||Ze(a)),(u=document.createElement("a")).href=c,u.click();case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.exit=function(){return Promise.resolve()},e}();rt.type=F;var ot=rt,st=function(){function e(e,t){var n=void 0===t?{}:t,i=n.allowsContentScaling,r=void 0===i||i,o=n.canonicalWebPageURL,s=void 0===o?null:o,a=n.applePayButtonType,c=void 0===a?null:a,l=n.callToAction,u=void 0===l?null:l,h=n.checkoutTitle,d=void 0===h?null:h,v=n.checkoutSubtitle,_=void 0===v?null:v,p=n.price,f=void 0===p?null:p,m=n.custom,g=void 0===m?null:m,w=n.customHeight,y=void 0===w?null:w;this._view3D=e,this.allowsContentScaling=r,this.canonicalWebPageURL=s,this.applePayButtonType=c,this.callToAction=u,this.checkoutTitle=d,this.checkoutSubtitle=_,this.price=f,this.custom=g,this.customHeight=y}e.isAvailable=function(){return Promise.resolve((e=document.createElement("a")).relList&&e.relList.supports&&e.relList.supports("ar")&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1));var e};var t=e.prototype;return t.enter=function(){var e=this._view3D,t=e.iosSrc;if(!t)return Promise.reject(new d(_.FILE_NOT_SUPPORTED(""+t),v.FILE_NOT_SUPPORTED));var n=this.canonicalWebPageURL,i=this.custom,r=window.location.href,o=document.createElement("a");o.setAttribute("rel","ar"),o.appendChild(document.createElement("img"));var s=Object.entries({applePayButtonType:this.applePayButtonType,callToAction:this.callToAction,checkoutTitle:this.checkoutTitle,checkoutSubtitle:this.checkoutSubtitle,price:this.price,customHeight:this.customHeight}).reduce((function(e,t){var n=t[0],i=t[1];return i&&(e[n]=i),e}),{}),a=new URL(t,r);return this.allowsContentScaling||(s.allowsContentScaling="0"),n&&(s.canonicalWebPageURL=new URL(n,r).href),i&&(s.custom=new URL(i,r).href),a.hash=new URLSearchParams(s).toString(),o.setAttribute("href",a.href),o.addEventListener("message",(function(t){"_apple_ar_quicklook_button_tapped"===t.data&&e.trigger(N,Object.assign({},t,{type:N,target:e}))}),!1),o.click(),Promise.resolve()},t.exit=function(){return Promise.resolve()},e}();st.type=A;var at,ct=st,lt=((at={})[z]=tt,at[F]=ot,at[A]=ct,at),ut=function(){function e(e){var t=this;this._view3D=e,this._activeSession=null,e.on(R,(function(e){var n=e.session;t._activeSession=n})),e.on(I,(function(){t._activeSession=null}))}var t=e.prototype;return t.isAvailable=function(){var e=(0,r.Z)(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._getSesssionClasses(),e.next=3,Promise.all(t.map((function(e){return e.isAvailable()})));case 3:return n=e.sent,e.abrupt("return",n.some((function(e){return!0===e})));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t.enter=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,r,o,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this._view3D).model&&t.initialized){e.next=3;break}throw new d(_.NOT_INITIALIZED,v.NOT_INITIALIZED);case 3:n=this._getSesssionClasses(),i=(0,Me.Z)(n);case 5:if((r=i()).done){e.next=21;break}return o=r.value,e.prev=7,e.next=10,o.isAvailable();case 10:if(!e.sent){e.next=15;break}return s=new o(t,y(t[o.type])),e.next=14,s.enter();case 14:return e.abrupt("return",Promise.resolve());case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(7);case 19:e.next=5;break;case 21:return e.abrupt("return",Promise.reject());case 22:case"end":return e.stop()}}),e,this,[[7,17]])})));return function(){return e.apply(this,arguments)}}(),t.exit=function(){var e=(0,r.Z)(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==(t=this._activeSession)||t.exit();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t._getSesssionClasses=function(){return this._getUsingSessionTypes().map((function(e){return lt[e]}))},t._getUsingSessionTypes=function(){var e=this._view3D;return e.arPriority.filter((function(t){return!!e[t]}))},(0,o.Z)(e,[{key:"activeSession",get:function(){return this._activeSession}}]),e}(),ht=ut,dt="grab",vt="grabbing",_t="",pt=function(e){function t(t,n){var i,r=void 0===n?{}:n,o=r.duration,s=void 0===o?ve:o,a=r.easing,c=void 0===a?de:a,l=r.scale,u=void 0===l?1:l;return(i=e.call(this)||this)._screenScale=new h.FM8(0,0),i._prevPos=new h.FM8(0,0),i._enabled=!1,i._onMouseDown=function(e){if(e.button===Y.LEFT){var t=i._view3D.renderer.canvas;e.preventDefault(),t.focus?t.focus():window.focus(),i._prevPos.set(e.clientX,e.clientY),window.addEventListener(Q,i._onMouseMove,!1),window.addEventListener(K,i._onMouseUp,!1),i.trigger(U)}},i._onMouseMove=function(e){e.preventDefault();var t=i._prevPos,n=new h.FM8(e.clientX,e.clientY).sub(t).multiplyScalar(i._scale);n.multiply(i._screenScale),i._xMotion.setEndDelta(n.x),i._yMotion.setEndDelta(n.y),t.set(e.clientX,e.clientY)},i._onMouseUp=function(){i._prevPos.set(0,0),window.removeEventListener(Q,i._onMouseMove,!1),window.removeEventListener(K,i._onMouseUp,!1),i.trigger(B)},i._onTouchStart=function(e){var t=e.touches[0];i._isFirstTouch=!0,i._prevPos.set(t.clientX,t.clientY)},i._onTouchMove=function(e){if(!(e.touches.length>1||i._isScrolling)){var t=e.touches[0],n=i._view3D.scrollable;if(!n||e.cancelable){if(i._isFirstTouch){if(n){var r=new h.FM8(t.clientX,t.clientY).sub(i._prevPos);if(Math.abs(r.y)>Math.abs(r.x))return void(i._isScrolling=!0)}i._isFirstTouch=!1}!n&&e.cancelable&&e.preventDefault(),e.stopPropagation();var o=i._prevPos,s=new h.FM8(t.clientX,t.clientY).sub(o).multiplyScalar(i._scale);s.multiply(i._screenScale),i._xMotion.setEndDelta(s.x),i._yMotion.setEndDelta(s.y),o.set(t.clientX,t.clientY)}}},i._onTouchEnd=function(e){var t=e.touches[0];t?i._prevPos.set(t.clientX,t.clientY):i._prevPos.set(0,0),i._isScrolling=!1},i._view3D=t,i._scale=u,i._duration=s,i._easing=c,i._isFirstTouch=!1,i._isScrolling=!1,i._xMotion=new ye({duration:s,range:fe,easing:c}),i._yMotion=new ye({duration:s,range:me,easing:c}),i}(0,a.Z)(t,e);var n=t.prototype;return n.destroy=function(){this.disable()},n.update=function(e){var t=this._view3D.camera,n=this._xMotion,i=this._yMotion,r=new h.FM8(n.update(e),i.update(e));t.yaw+=r.x,t.pitch+=r.y},n.resize=function(e){this._screenScale.set(360/e.width,180/e.height)},n.enable=function(){if(!this._enabled){var e=this._view3D.renderer.canvas;e.addEventListener(X,this._onMouseDown),e.addEventListener(J,this._onTouchStart,{passive:!0}),e.addEventListener($,this._onTouchMove,{passive:this._view3D.scrollable}),e.addEventListener(ee,this._onTouchEnd),this._enabled=!0,this.sync(),this.trigger(W)}},n.disable=function(){if(this._enabled){var e=this._view3D.renderer.canvas;e.removeEventListener(X,this._onMouseDown),window.removeEventListener(Q,this._onMouseMove),window.removeEventListener(K,this._onMouseUp),e.removeEventListener(J,this._onTouchStart),e.removeEventListener($,this._onTouchMove),e.removeEventListener(ee,this._onTouchEnd),this._enabled=!1,this.trigger(q)}},n.sync=function(){var e=this._view3D.camera;this._xMotion.reset(e.yaw),this._yMotion.reset(e.pitch)},(0,o.Z)(t,[{key:"enabled",get:function(){return this._enabled}},{key:"scale",get:function(){return this._scale},set:function(e){this._scale=e}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e,this._xMotion.duration=e,this._yMotion.duration=e}},{key:"easing",get:function(){return this._easing},set:function(e){this._easing=e,this._xMotion.easing=e,this._yMotion.easing=e}}]),t}(u.Z),ft=function(e){function t(t,n){var i,r=void 0===n?{}:n,o=r.easing,s=void 0===o?de:o,a=r.duration,c=void 0===a?0:a,l=r.scale,u=void 0===l?1:l;return(i=e.call(this)||this)._enabled=!1,i._touchInitialized=!1,i._prevPos=new h.FM8(0,0),i._screenSize=new h.FM8(0,0),i._onMouseDown=function(e){if(e.button===Y.RIGHT){var t=i._view3D.renderer.canvas;e.preventDefault(),t.focus?t.focus():window.focus(),i._prevPos.set(e.clientX,e.clientY),window.addEventListener(Q,i._onMouseMove,!1),window.addEventListener(K,i._onMouseUp,!1),window.addEventListener(ie,i._onContextMenu,!1),i.trigger(U)}},i._onMouseMove=function(e){e.preventDefault();var t=i._prevPos,n=new h.FM8(e.clientX,e.clientY).sub(t).multiplyScalar(i._scale);i._xMotion.setEndDelta(-n.x),i._yMotion.setEndDelta(n.y),t.set(e.clientX,e.clientY)},i._onMouseUp=function(){i._prevPos.set(0,0),window.removeEventListener(Q,i._onMouseMove,!1),window.removeEventListener(K,i._onMouseUp,!1),i.trigger(B)},i._onTouchStart=function(e){2===e.touches.length&&(!1!==e.cancelable&&e.preventDefault(),i._prevPos.copy(i._getTouchesMiddle(e.touches)),i._touchInitialized=!0)},i._onTouchMove=function(e){if(2===e.touches.length){!1!==e.cancelable&&e.preventDefault(),e.stopPropagation();var t=i._prevPos,n=i._getTouchesMiddle(e.touches);if(!i._touchInitialized)return t.copy(n),void(i._touchInitialized=!0);var r=(new h.FM8).subVectors(n,t).multiplyScalar(i._scale);i._xMotion.setEndDelta(-r.x),i._yMotion.setEndDelta(r.y),t.copy(n)}},i._onTouchEnd=function(e){2===e.touches.length?(i._prevPos.copy(i._getTouchesMiddle(e.touches)),i._touchInitialized=!0):i._touchInitialized=!1},i._onContextMenu=function(e){e.preventDefault(),window.removeEventListener(ie,i._onContextMenu,!1)},i._view3D=t,i._xMotion=new ye({duration:c,range:fe,easing:s}),i._yMotion=new ye({duration:c,range:fe,easing:s}),i._scale=u,i}(0,a.Z)(t,e);var n=t.prototype;return n.destroy=function(){this.disable()},n.update=function(e){var t=this._view3D.camera,n=this._screenSize,i=new h.FM8(this._xMotion.update(e),this._yMotion.update(e)),r=new h.Pa4(1,0,0).applyQuaternion(t.threeCamera.quaternion),o=new h.Pa4(0,1,0).applyQuaternion(t.threeCamera.quaternion),s=new h.FM8(t.renderWidth,t.renderHeight).divide(n);i.multiply(s),t.pivot.add(r.multiplyScalar(i.x)),t.pivot.add(o.multiplyScalar(i.y))},n.resize=function(e){this._screenSize.copy(new h.FM8(e.width,e.height))},n.enable=function(){if(!this._enabled){var e=this._view3D.renderer.canvas;e.addEventListener(X,this._onMouseDown,!1),e.addEventListener(J,this._onTouchStart,{passive:!1,capture:!1}),e.addEventListener($,this._onTouchMove,{passive:!1,capture:!1}),e.addEventListener(ee,this._onTouchEnd,{passive:!1,capture:!1}),this._enabled=!0,this.sync(),this.trigger(W)}},n.disable=function(){if(this._enabled){var e=this._view3D.renderer.canvas;e.removeEventListener(X,this._onMouseDown,!1),window.removeEventListener(Q,this._onMouseMove,!1),window.removeEventListener(K,this._onMouseUp,!1),e.removeEventListener(J,this._onTouchStart,!1),e.removeEventListener($,this._onTouchMove,!1),e.removeEventListener(ee,this._onTouchEnd,!1),window.removeEventListener(ie,this._onContextMenu,!1),this._enabled=!1,this.trigger(q)}},n.sync=function(){this._xMotion.reset(0),this._yMotion.reset(0)},n._getTouchesMiddle=function(e){return new h.FM8(e[0].clientX+e[1].clientX,e[0].clientY+e[1].clientY).multiplyScalar(.5)},(0,o.Z)(t,[{key:"enabled",get:function(){return this._enabled}},{key:"scale",get:function(){return this._scale},set:function(e){this._scale=e}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e,this._xMotion.duration=e,this._yMotion.duration=e}},{key:"easing",get:function(){return this._easing},set:function(e){this._easing=e,this._xMotion.easing=e,this._yMotion.easing=e}}]),t}(u.Z),mt=function(){function e(e,t){var n=this,i=void 0===t?{}:t,r=i.scale,o=void 0===r?1:r,s=i.duration,a=void 0===s?ve:s,c=i.minFov,l=void 0===c?1:c,u=i.maxFov,d=void 0===u?x:u,v=i.easing,_=void 0===v?de:v;this._wheelModifier=.02,this._touchModifier=.05,this._prevTouchDistance=-1,this._enabled=!1,this._onWheel=function(e){var t=n._view3D.wheelScrollable;if(0!==e.deltaY&&!t){e.preventDefault(),e.stopPropagation();var i=n._motion,r=-n._scale*n._wheelModifier*e.deltaY;i.setEndDelta(r)}},this._onTouchMove=function(e){var t=e.touches;if(2===t.length){!1!==e.cancelable&&e.preventDefault(),e.stopPropagation();var i=n._motion,r=n._prevTouchDistance,o=new h.FM8(t[0].pageX,t[0].pageY),s=new h.FM8(t[1].pageX,t[1].pageY),a=o.sub(s).length()*n._scale*n._touchModifier,c=a-r;n._prevTouchDistance=a,r<0||i.setEndDelta(c)}},this._onTouchEnd=function(){n._prevTouchDistance=-1},this._view3D=e,this._scale=o,this._duration=a,this._minFov=l,this._maxFov=d,this._easing=_,this._range={min:l,max:d===x?180:d},this._motion=new ye({duration:a,easing:_})}var t=e.prototype;return t.destroy=function(){this.disable()},t.update=function(e){var t=this._view3D.camera,n=this._motion;t.zoom-=n.update(e)},t.resize=function(e){},t.enable=function(){if(!this._enabled){var e=this._view3D.renderer.canvas;e.addEventListener(te,this._onWheel,{passive:!1,capture:!1}),e.addEventListener($,this._onTouchMove,{passive:!1,capture:!1}),e.addEventListener(ee,this._onTouchEnd,{passive:!1,capture:!1}),this._enabled=!0,this.sync()}},t.disable=function(){if(this._enabled){var e=this._view3D.renderer.canvas;e.removeEventListener(te,this._onWheel,!1),e.removeEventListener($,this._onTouchMove,!1),e.removeEventListener(ee,this._onTouchEnd,!1),this._enabled=!1}},t.sync=function(){var e=this._view3D.camera;this._motion.reset(e.zoom)},t.updateRange=function(){var e=this._maxFov,t=this._range,n=this._motion,i=this._view3D.camera.baseFov;e===x&&(t.max=Math.min(i+45,175)),n.range.min=t.min-i,n.range.max=t.max-i},(0,o.Z)(e,[{key:"enabled",get:function(){return this._enabled}},{key:"range",get:function(){return this._range}},{key:"scale",get:function(){return this._scale},set:function(e){this._scale=e}},{key:"duration",get:function(){return this._duration}},{key:"minFov",get:function(){return this._minFov}},{key:"maxFov",get:function(){return this._maxFov}},{key:"easing",get:function(){return this._easing}}]),e}(),gt=mt,wt=function(){function e(e){var t=this;this._onEnable=function(){var e=t._view3D,n=e.renderer.canvas;e.useGrabCursor&&(t._rotateControl.enabled||t._translateControl.enabled)&&n.style.cursor===_t&&t._setCursor(dt)},this._onDisable=function(){t._view3D.renderer.canvas.style.cursor!==_t&&!t._rotateControl.enabled&&!t._translateControl.enabled&&t._setCursor(_t)},this._onHold=function(){t._view3D.useGrabCursor&&(t._rotateControl.enabled||t._translateControl.enabled)&&t._setCursor(vt)},this._onRelease=function(){t._view3D.useGrabCursor&&(t._rotateControl.enabled||t._translateControl.enabled)&&t._setCursor(dt)},this._view3D=e,this._rotateControl=new pt(e,y(e.rotate)),this._translateControl=new ft(e,y(e.translate)),this._zoomControl=new gt(e,y(e.zoom)),[this._rotateControl,this._translateControl].forEach((function(e){var n;e.on(((n={})[U]=t._onHold,n[B]=t._onRelease,n[W]=t._onEnable,n[q]=t._onDisable,n))}))}var t=e.prototype;return t.destroy=function(){this._rotateControl.destroy(),this._translateControl.destroy(),this._zoomControl.destroy()},t.update=function(e){this._rotateControl.update(e),this._translateControl.update(e),this._zoomControl.update(e)},t.resize=function(e){this._rotateControl.resize(e),this._translateControl.resize(e),this._zoomControl.resize(e)},t.enable=function(){var e=this._view3D;e.rotate&&this._rotateControl.enable(),e.translate&&this._translateControl.enable(),e.zoom&&this._zoomControl.enable()},t.disable=function(){this._rotateControl.disable(),this._translateControl.disable(),this._zoomControl.disable()},t.sync=function(){this._rotateControl.sync(),this._translateControl.sync(),this._zoomControl.sync()},t.updateCursor=function(){var e=this._view3D.useGrabCursor?dt:_t;this._setCursor(e)},t._setCursor=function(e){var t=this._view3D;(t.useGrabCursor||e===_t)&&(t.renderer.canvas.style.cursor=e)},(0,o.Z)(e,[{key:"rotate",get:function(){return this._rotateControl}},{key:"translate",get:function(){return this._translateControl}},{key:"zoom",get:function(){return this._zoomControl}}]),e}(),yt=function(){function e(e,t){var n=this,i=void 0===t?{}:t,r=i.delay,o=void 0===r?2e3:r,s=i.delayOnMouseLeave,a=void 0===s?0:s,c=i.speed,l=void 0===c?1:c,u=i.pauseOnHover,h=void 0!==u&&u,d=i.canInterrupt,v=void 0===d||d,_=i.disableOnInterrupt,p=void 0!==_&&_;this._enabled=!1,this._interrupted=!1,this._interruptionTimer=-1,this._hovering=!1,this._onMouseDown=function(e){n._canInterrupt&&(e.button!==Y.LEFT&&e.button!==Y.RIGHT||(n._interrupted=!0,n._clearTimeout(),window.addEventListener(K,n._onMouseUp,!1)))},this._onMouseUp=function(){window.removeEventListener(K,n._onMouseUp,!1),n._setUninterruptedAfterDelay(n._delay)},this._onTouchStart=function(){n._canInterrupt&&(n._interrupted=!0,n._clearTimeout())},this._onTouchEnd=function(){n._setUninterruptedAfterDelay(n._delay)},this._onMouseEnter=function(){n._pauseOnHover&&(n._interrupted=!0,n._hovering=!0)},this._onMouseLeave=function(){n._pauseOnHover&&(n._hovering=!1,n._setUninterruptedAfterDelay(n._delayOnMouseLeave))},this._onWheel=function(){n._canInterrupt&&(n._interrupted=!0,n._setUninterruptedAfterDelay(n._delay))},this._view3D=e,this._delay=o,this._delayOnMouseLeave=a,this._speed=l,this._pauseOnHover=h,this._canInterrupt=v,this._disableOnInterrupt=p}var t=e.prototype;return t.destroy=function(){this.disable()},t.update=function(e){this._enabled&&(this._interrupted?this._disableOnInterrupt&&this.disable():this._view3D.camera.yaw+=this._speed*e/100)},t.enable=function(){if(!this._enabled){var e=this._view3D.renderer.canvas;e.addEventListener(X,this._onMouseDown,!1),e.addEventListener(J,this._onTouchStart,{passive:!1,capture:!1}),e.addEventListener(ee,this._onTouchEnd,{passive:!1,capture:!1}),e.addEventListener(re,this._onMouseEnter,!1),e.addEventListener(oe,this._onMouseLeave,!1),e.addEventListener(te,this._onWheel,{passive:!1,capture:!1}),this._enabled=!0}},t.disable=function(){if(this._enabled){var e=this._view3D.renderer.canvas;e.removeEventListener(X,this._onMouseDown,!1),window.removeEventListener(K,this._onMouseUp,!1),e.removeEventListener(J,this._onTouchStart,!1),e.removeEventListener(ee,this._onTouchEnd,!1),e.removeEventListener(re,this._onMouseEnter,!1),e.removeEventListener(oe,this._onMouseLeave,!1),e.removeEventListener(te,this._onWheel,!1),this._enabled=!1,this._interrupted=!1,this._hovering=!1,this._clearTimeout()}},t._setUninterruptedAfterDelay=function(e){var t=this;this._hovering||(this._clearTimeout(),e>0?this._interruptionTimer=window.setTimeout((function(){t._interrupted=!1,t._interruptionTimer=-1}),e):(this._interrupted=!1,this._interruptionTimer=-1))},t._clearTimeout=function(){this._interruptionTimer>=0&&(window.clearTimeout(this._interruptionTimer),this._interruptionTimer=-1)},(0,o.Z)(e,[{key:"enabled",get:function(){return this._enabled}},{key:"delay",get:function(){return this._delay},set:function(e){this._delay=e}},{key:"delayOnMouseLeave",get:function(){return this._delayOnMouseLeave},set:function(e){this._delayOnMouseLeave=e}},{key:"speed",get:function(){return this._speed},set:function(e){this._speed=e}},{key:"pauseOnHover",get:function(){return this._pauseOnHover},set:function(e){this._pauseOnHover=e}},{key:"canInterrupt",get:function(){return this._canInterrupt},set:function(e){this._canInterrupt=e}},{key:"disableOnInterrupt",get:function(){return this._disableOnInterrupt},set:function(e){this._disableOnInterrupt=e}}]),e}(),bt=n(8331),Et=n(5157),xt=n(7631),Pt=function(){function e(e){var t,n=e.src,i=e.scenes,r=e.animations,o=void 0===r?[]:r,s=e.fixSkinnedBbox,a=void 0!==s&&s,c=e.castShadow,l=void 0===c||c,u=e.receiveShadow,d=void 0!==u&&u;this._src=n,this._scene=new h.ZAu,(t=this._scene).add.apply(t,i),this._animations=o,this._bbox=this._getInitialBbox(a);var v=this._bbox.min.y;this._scene.translateY(-v),this._bbox.translate(new h.Pa4(0,-v,0)),this.castShadow=l,this.receiveShadow=d}var t=e.prototype;return t.reduceVertices=function(e,t){var n=this.meshes,i=t;return n.forEach((function(t){var n=t.geometry.attributes.position;if(n){t.updateMatrixWorld();for(var r=0;r<n.count;r++){var o=(new h.Pa4).fromBufferAttribute(n,r);o.applyMatrix4(t.matrixWorld),i=e(i,o)}}})),i},t._getInitialBbox=function(e){return this._scene.updateMatrixWorld(),e&&this._hasSkinnedMesh()?this._getSkeletonBbox():(new h.ZzF).setFromObject(this._scene)},t._getSkeletonBbox=function(){var e=new h.ZzF;return this.meshes.forEach((function(t){if(t.isSkinnedMesh){var n=t.geometry,i=n.attributes.position,r=n.attributes.skinIndex,o=n.attributes.skinWeight,s=t.skeleton;s.update();for(var a=s.boneMatrices,c=new h.yGw,l=function(n){c.identity();var s=new h.Ltg;s.set(0,0,0,0);var l=new h.Ltg;l.set(i.getX(n),i.getY(n),i.getZ(n),1).applyMatrix4(t.bindMatrix);var u=[o.getX(n),o.getY(n),o.getZ(n),o.getW(n)],d=[r.getX(n),r.getY(n),r.getZ(n),r.getW(n)];u.forEach((function(e,t){var n=(new h.yGw).fromArray(a,16*d[t]);s.add(l.clone().applyMatrix4(n).multiplyScalar(e))}));var v=(new h.Pa4).fromArray(s.applyMatrix4(t.bindMatrixInverse).toArray());v.applyMatrix4(t.matrixWorld),e.expandByPoint(v)},u=0;u<i.count;u++)l(u)}else e.expandByObject(t)})),e},t._getAllMeshes=function(){var e=[];return this._scene.traverse((function(t){t.isMesh&&e.push(t)})),e},t._hasSkinnedMesh=function(){return this._getAllMeshes().some((function(e){return e.isSkinnedMesh}))},(0,o.Z)(e,[{key:"src",get:function(){return this._src}},{key:"scene",get:function(){return this._scene}},{key:"animations",get:function(){return this._animations}},{key:"meshes",get:function(){return this._getAllMeshes()}},{key:"bbox",get:function(){return this._bbox}},{key:"castShadow",set:function(e){this.meshes.forEach((function(t){return t.castShadow=e}))}},{key:"receiveShadow",set:function(e){this.meshes.forEach((function(t){return t.receiveShadow=e}))}}]),e}(),kt=Pt,Mt=new Et._,Ot=new xt.a,Tt=function(){function e(e){this._view3D=e,this._loader=new bt.E;var t=this._loader;t.setCrossOrigin("anonymous"),t.setDRACOLoader(Mt),t.setKTX2Loader(Ot.detectSupport(e.renderer.threeRenderer))}e.setMeshoptDecoder=function(){var t=(0,r.Z)(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,i){var o=document.createElement("script");o.addEventListener("load",(0,r.Z)(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.MeshoptDecoder.ready;case 2:e.meshoptDecoder=window.MeshoptDecoder,document.body.removeChild(o),t();case 5:case"end":return n.stop()}}),n)})))),o.addEventListener("error",(function(){document.body.removeChild(o),i()})),o.src=new URL(n,location.href).href,document.body.appendChild(o)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();var t=e.prototype;return t.load=function(t){var n=this,i=this._view3D,r=this._loader;return Mt.setDecoderPath(i.dracoPath),Ot.setTranscoderPath(i.ktxPath),e.meshoptDecoder&&r.setMeshoptDecoder(e.meshoptDecoder),new Promise((function(e,o){try{r.load(t,(function(i){var r=n._parseToModel(i,t);e(r)}),(function(e){i.trigger(C,Object.assign({},e,{target:i,type:C}))}),(function(e){o(e)}))}catch(s){o(s)}}))},t.loadFromFiles=function(t){var n=this,i=this._view3D,r=this._loader,o=[],s=function(){o.forEach((function(e){URL.revokeObjectURL(e)}))};return Mt.setDecoderPath(i.dracoPath),Ot.setTranscoderPath(i.ktxPath),e.meshoptDecoder&&r.setMeshoptDecoder(e.meshoptDecoder),new Promise((function(e,i){if(t.length<=0)i(new Error("No files found"));else{var a=t.find((function(e){return/\.(gltf|glb)$/i.test(e.name)}));if(a){var c=new Map;t.forEach((function(e){c.set(e.name,e)}));var l=URL.createObjectURL(a);o.push(l);var u=new h.lLk;u.setURLModifier((function(e){var t=/[^\/|\\]+$/.exec(e),n=t&&t[0]||"";if(c.has(n)){var i=c.get(n),r=URL.createObjectURL(i);return o.push(r),r}return e})),r.manager=u,r.load(l,(function(t){var i=n._parseToModel(t,a.name);e(i),s()}),void 0,(function(e){i(e),s()}))}else i(new Error("No glTF file found"))}}))},t._parseToModel=function(e,t){var n=this._view3D.fixSkinnedBbox;return new kt({src:t,scenes:e.scenes,animations:e.animations,fixSkinnedBbox:n})},e}(),St=Tt,Ct=function(e){function t(t,n){var i,r=void 0===n?{}:n,o=r.src,a=void 0===o?null:o,c=r.iosSrc,l=void 0===c?null:c,u=r.dracoPath,h=void 0===u?"https://www.gstatic.com/draco/versioned/decoders/1.4.1/":u,f=r.ktxPath,m=void 0===f?"https://unpkg.com/three@0.134.0/examples/js/libs/basis/":f,g=r.meshoptPath,w=void 0===g?null:g,b=r.fixSkinnedBbox,E=void 0!==b&&b,P=r.skybox,k=void 0===P?null:P,M=r.envmap,O=void 0===M?null:M,T=r.background,S=void 0===T?null:T,C=r.fov,N=void 0===C?x:C,R=r.center,I=void 0===R?x:R,D=r.yaw,L=void 0===D?0:D,z=r.pitch,F=void 0===z?0:z,A=r.rotate,Z=void 0===A||A,H=r.translate,G=void 0===H||H,V=r.zoom,U=void 0===V||V,B=r.exposure,W=void 0===B?1:B,q=r.shadow,Y=void 0===q||q,X=r.autoplay,Q=void 0!==X&&X,K=r.scrollable,J=void 0===K||K,$=r.wheelScrollable,ee=void 0!==$&&$,te=r.useGrabCursor,ne=void 0===te||te,ie=r.webAR,re=void 0===ie||ie,oe=r.sceneViewer,se=void 0===oe||oe,ae=r.quickLook,ce=void 0===ae||ae,le=r.arPriority,he=void 0===le?ge:le,de=r.canvasSelector,ve=void 0===de?"canvas":de,_e=r.autoInit,pe=void 0===_e||_e,fe=r.autoResize,me=void 0===fe||fe,we=r.useResizeObserver,ye=void 0===we||we;return(i=e.call(this)||this)._rootEl=function(e,t){var n=p(e,t);if(!n)throw new d(_.WRONG_TYPE(e,["HTMLElement","string"]),v.WRONG_TYPE);return n}(t),i._src=a,i._iosSrc=l,i._dracoPath=h,i._ktxPath=m,i._meshoptPath=w,i._fixSkinnedBbox=E,i._fov=N,i._center=I,i._yaw=L,i._pitch=F,i._rotate=Z,i._translate=G,i._zoom=U,i._autoplay=Q,i._scrollable=J,i._wheelScrollable=ee,i._useGrabCursor=ne,i._skybox=k,i._envmap=O,i._background=S,i._exposure=W,i._shadow=Y,i._webAR=re,i._sceneViewer=se,i._quickLook=ce,i._arPriority=he,i._canvasSelector=ve,i._autoInit=pe,i._autoResize=me,i._useResizeObserver=ye,i._renderer=new j((0,s.Z)(i)),i._camera=new xe((0,s.Z)(i)),i._control=new wt((0,s.Z)(i)),i._scene=new ue((0,s.Z)(i)),i._animator=new ke(i._scene.userObjects),i._autoPlayer=new yt((0,s.Z)(i),y(Q)),i._autoResizer=new Pe((0,s.Z)(i)),i._arManager=new ht((0,s.Z)(i)),i._model=null,i._initialized=!1,a&&pe&&i.init(),i}(0,a.Z)(t,e);var n=t.prototype;return n.destroy=function(){this._scene.reset(),this._renderer.stopAnimationLoop(),this._control.destroy(),this._autoResizer.disable()},n.init=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,r,o,s,a,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._src){e.next=2;break}throw new d(_.PROVIDE_SRC_FIRST,v.PROVIDE_SRC_FIRST);case 2:if(this._autoResize&&this._autoResizer.enable(),t=this._scene,n=this._skybox,i=this._envmap,r=this._background,!(o=this._meshoptPath)||St.meshoptDecoder){e.next=11;break}return e.next=11,St.setMeshoptDecoder(o);case 11:return s=[this._loadModel(this._src)],n?s.push(t.setSkybox(n)):i&&s.push(t.setEnvMap(i)),!n&&r&&s.push(t.setBackground(r)),e.next=16,Promise.all(s);case 16:a=e.sent,c=a[0],this._display(c),this._control.enable(),this._autoplay&&this._autoPlayer.enable(),this._initialized=!0,this.trigger(P,{type:P,target:this});case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.resize=function(){this._renderer.resize();var e=this._renderer.size;this._camera.resize(e),this._control.resize(e),this.trigger(O,Object.assign({},e,{type:O,target:this}))},n.load=function(){var e=(0,r.Z)(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._initialized){e.next=8;break}return e.next=3,this._loadModel(t);case 3:n=e.sent,this._src=t,this._display(n),e.next=11;break;case 8:return this._src=t,e.next=11,this.init();case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.loadPlugins=function(){var e=(0,r.Z)(l().mark((function e(){var t,n,i,r=this,o=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=o.length,n=new Array(t),i=0;i<t;i++)n[i]=o[i];return e.abrupt("return",Promise.all(n.map((function(e){return e.init(r)}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n._loadModel=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new St(this),e.next=3,n.load(t);case 3:return i=e.sent,this.trigger(k,{type:k,target:this,model:i}),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n._display=function(e){var t=this._renderer,n=this._scene,i=this._camera,r=this._animator,o=t.threeRenderer.xr.isPresenting;if(n.reset(),n.add(e.scene),n.shadowPlane.update(e),i.fit(e,this._center),i.reset(0),r.reset(),r.setClips(e.animations),e.animations.length>0&&r.play(0),this._model=e,o){var s=this._arManager.activeSession;s&&s.control.syncTargetModel(e)}else t.stopAnimationLoop(),t.setAnimationLoop(t.defaultRenderLoop);this.trigger(M,{type:M,target:this,model:e})},(0,o.Z)(t,[{key:"renderer",get:function(){return this._renderer}},{key:"scene",get:function(){return this._scene}},{key:"camera",get:function(){return this._camera}},{key:"control",get:function(){return this._control}},{key:"autoPlayer",get:function(){return this._autoPlayer}},{key:"model",get:function(){return this._model}},{key:"animator",get:function(){return this._animator}},{key:"ar",get:function(){return this._arManager}},{key:"rootEl",get:function(){return this._rootEl}},{key:"initialized",get:function(){return this._initialized}},{key:"src",get:function(){return this._src}},{key:"iosSrc",get:function(){return this._iosSrc}},{key:"dracoPath",get:function(){return this._dracoPath}},{key:"ktxPath",get:function(){return this._ktxPath}},{key:"meshoptPath",get:function(){return this._meshoptPath}},{key:"fixSkinnedBbox",get:function(){return this._fixSkinnedBbox}},{key:"fov",get:function(){return this._fov}},{key:"center",get:function(){return this._center}},{key:"yaw",get:function(){return this._yaw}},{key:"pitch",get:function(){return this._pitch}},{key:"rotate",get:function(){return this._rotate}},{key:"translate",get:function(){return this._translate}},{key:"zoom",get:function(){return this._zoom}},{key:"autoplay",get:function(){return this._autoplay}},{key:"scrollable",get:function(){return this._scrollable}},{key:"wheelScrollable",get:function(){return this._wheelScrollable}},{key:"useGrabCursor",get:function(){return this._useGrabCursor},set:function(e){this._useGrabCursor=e,this._control.updateCursor()}},{key:"skybox",get:function(){return this._skybox},set:function(e){this._scene.setSkybox(e),this._skybox=e}},{key:"envmap",get:function(){return this._envmap},set:function(e){this._scene.setEnvMap(e),this._envmap=e}},{key:"background",get:function(){return this._background}},{key:"exposure",get:function(){return this._exposure},set:function(e){this._renderer.threeRenderer.toneMappingExposure=e,this._exposure=e}},{key:"shadow",get:function(){return this._shadow}},{key:"webAR",get:function(){return this._webAR}},{key:"sceneViewer",get:function(){return this._sceneViewer}},{key:"quickLook",get:function(){return this._quickLook}},{key:"arPriority",get:function(){return this._arPriority}},{key:"canvasSelector",get:function(){return this._canvasSelector}},{key:"autoInit",get:function(){return this._autoInit}},{key:"autoResize",get:function(){return this._autoResize}},{key:"useResizeObserver",get:function(){return this._useResizeObserver}}]),t}(u.Z);Ct.VERSION="#__VERSION__#";var Nt=Ct,Rt=function(){function e(){}var t=e.prototype;return t.init=function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.teardown=function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}(),It=Rt,Dt=function(e){function t(t){var n;return void 0===t&&(t={}),(n=e.call(this)||this)._options=t,n}(0,a.Z)(t,e);var n=t.prototype;return n.init=function(){var e=(0,r.Z)(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._addButton(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n._addButton=function(){var e=(0,r.Z)(l().mark((function e(t){var n,i,r,o,s,a,c,u,h,d=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._options,i=n.availableText,r=void 0===i?"View in AR":i,o=n.unavailableText,s=void 0===o?"AR is not available in this browser":o,e.next=3,t.ar.isAvailable();case 3:if(a=e.sent,c=document.createElement("button"),u=document.createElement("div"),h=document.createTextNode(a?r:s),c.classList.add("view3d-ar-button"),u.classList.add("view3d-tooltip"),c.disabled=!0,c.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" enable-background="new 0 0 24 24" viewBox="0 0 24 24" width="32px" height="32px"><g><rect fill="none" height="24" width="24" x="0" y="0"/></g><g><g><path d="M3,4c0-0.55,0.45-1,1-1h2V1H4C2.34,1,1,2.34,1,4v2h2V4z"/><path d="M3,20v-2H1v2c0,1.66,1.34,3,3,3h2v-2H4C3.45,21,3,20.55,3,20z"/><path d="M20,1h-2v2h2c0.55,0,1,0.45,1,1v2h2V4C23,2.34,21.66,1,20,1z"/><path d="M21,20c0,0.55-0.45,1-1,1h-2v2h2c1.66,0,3-1.34,3-3v-2h-2V20z"/><path d="M19,14.87V9.13c0-0.72-0.38-1.38-1-1.73l-5-2.88c-0.31-0.18-0.65-0.27-1-0.27s-0.69,0.09-1,0.27L6,7.39 C5.38,7.75,5,8.41,5,9.13v5.74c0,0.72,0.38,1.38,1,1.73l5,2.88c0.31,0.18,0.65,0.27,1,0.27s0.69-0.09,1-0.27l5-2.88 C18.62,16.25,19,15.59,19,14.87z M11,17.17l-4-2.3v-4.63l4,2.33V17.17z M12,10.84L8.04,8.53L12,6.25l3.96,2.28L12,10.84z M17,14.87l-4,2.3v-4.6l4-2.33V14.87z"/></g></g></svg>',c.appendChild(u),u.appendChild(h),t.rootEl.appendChild(c),!t.initialized){e.next=19;break}return e.next=17,this._setAvailable(t,c,a);case 17:e.next=20;break;case 19:t.once(M,(function(){d._setAvailable(t,c,a)}));case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n._setAvailable=function(){var e=(0,r.Z)(l().mark((function e(t,n,i){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i?(n.disabled=!1,n.addEventListener("click",(function(){t.ar.enter()}))):n.disabled=!0;case 1:case"end":return e.stop()}}),e)})));return function(t,n,i){return e.apply(this,arguments)}}(),t}(It),Lt=Dt,zt=function(e){function t(t){var n;return void 0===t&&(t={}),(n=e.call(this)||this)._options=t,n}return(0,a.Z)(t,e),t.prototype.init=function(){var e=(0,r.Z)(l().mark((function e(t){var n=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.on(R,(function(e){var i=e.session,r=i.domOverlay.root;if(r){if(n._cachedElements)Object.values(n._cachedElements).map((function(e){r.contains(e)||r.appendChild(e)}));else{var o=document.createElement("div");o.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="48px" height="48px" fill="#FFFFFF"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>',o.classList.add("view3d-ar-close"),r.appendChild(o),n._cachedElements={closeButton:o}}var s=n._cachedElements.closeButton,a=function(){i.exit()};s.addEventListener("click",a),t.once(I,(function(){s.parentElement&&s.parentElement.removeChild(s),s.removeEventListener("click",a)}))}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}(It),Ft=zt,At=Nt}}]);